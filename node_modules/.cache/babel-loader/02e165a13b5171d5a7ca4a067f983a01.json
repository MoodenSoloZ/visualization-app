{"ast":null,"code":"import _slicedToArray from \"/Users/weihangzhang/Documents/webpage/gosling-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"/Users/weihangzhang/Documents/webpage/gosling-react/src/example/VegaLite.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport { GoslingComponent } from 'gosling.js';\nimport { VegaLite } from 'react-vega';\nvar goslingSpec = {\n  layout: 'linear',\n  arrangement: 'vertical',\n  centerRadius: 0.8,\n  xDomain: {\n    chromosome: '1'\n  },\n  style: {\n    select: {\n      color: 'black',\n      stroke: 'black',\n      strokeWidth: 6,\n      arrange: 'behind',\n      opacity: 0.1\n    }\n  },\n  views: [{\n    tracks: [{\n      title: 'ALT + Mouse Drag For Range Selection',\n      id: 'scatterplot-track',\n      experimental: {\n        mouseEvents: true\n      },\n      data: {\n        url: 'https://server.gosling-lang.org/api/v1/tileset_info/?d=cistrome-multivec',\n        type: 'multivec',\n        row: 'sample',\n        column: 'position',\n        value: 'peak',\n        categories: ['sample 1', 'sample 2', 'sample 3', 'sample 4'],\n        binSize: 4\n      },\n      mark: 'point',\n      x: {\n        field: 'position',\n        type: 'genomic'\n      },\n      y: {\n        field: 'peak',\n        type: 'quantitative'\n      },\n      size: {\n        field: 'peak',\n        type: 'quantitative'\n      },\n      color: {\n        field: 'sample',\n        type: 'nominal',\n        legend: true\n      },\n      width: 600,\n      height: 200\n    }]\n  }]\n};\nvar vegaLiteSpec = {\n  width: 450,\n  height: 400,\n  mark: 'bar',\n  encoding: {\n    x: {\n      field: 'peak',\n      type: 'ordinal',\n      bin: true\n    },\n    y: {\n      field: 'peak',\n      type: 'quantitative',\n      aggregate: 'count'\n    },\n    color: {\n      field: 'sample',\n      type: 'nominal',\n      scale: {\n        domain: ['sample 1', 'sample 2', 'sample 3', 'sample 4'],\n        range: ['#E79F00', '#029F73', '#0072B2', '#CB7AA7']\n      }\n    }\n  },\n  data: {\n    name: 'table'\n  }\n};\nfunction VegaLiteExample() {\n  _s();\n  var gosRef = useRef(null);\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    selectedData = _useState2[0],\n    setSelectedData = _useState2[1];\n  useEffect(function () {\n    if (!gosRef.current) return;\n    gosRef.current.api.subscribe('rangeSelect', function (_, e) {\n      return setSelectedData(e.data);\n    });\n    return function () {\n      return gosRef.current.api.unsubscribe('rangeSelect');\n    };\n  }, [gosRef]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(GoslingComponent, {\n    ref: gosRef,\n    spec: goslingSpec,\n    experimental: {\n      reactive: true\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 4\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginLeft: 80\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(VegaLite, {\n    spec: vegaLiteSpec,\n    data: {\n      table: selectedData\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }\n  })));\n}\n_s(VegaLiteExample, \"G6//BpMkf7CTq+QMA5+ka/6sKbY=\");\n_c = VegaLiteExample;\nexport default VegaLiteExample;\nvar _c;\n$RefreshReg$(_c, \"VegaLiteExample\");","map":{"version":3,"names":["React","useEffect","useState","useRef","GoslingComponent","VegaLite","goslingSpec","layout","arrangement","centerRadius","xDomain","chromosome","style","select","color","stroke","strokeWidth","arrange","opacity","views","tracks","title","id","experimental","mouseEvents","data","url","type","row","column","value","categories","binSize","mark","x","field","y","size","legend","width","height","vegaLiteSpec","encoding","bin","aggregate","scale","domain","range","name","VegaLiteExample","gosRef","selectedData","setSelectedData","current","api","subscribe","_","e","unsubscribe","reactive","marginLeft","table"],"sources":["/Users/weihangzhang/Documents/webpage/gosling-react/src/example/VegaLite.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport { GoslingComponent } from 'gosling.js';\nimport { VegaLite } from 'react-vega'\n\nconst goslingSpec = {\n\tlayout: 'linear',\n\tarrangement: 'vertical',\n\tcenterRadius: 0.8,\n\txDomain: { chromosome: '1' },\n\tstyle: {\n\t\tselect: { color: 'black', stroke: 'black', strokeWidth: 6, arrange: 'behind', opacity: 0.1 }\n\t},\n\tviews: [\n\t\t{\n\t\t\ttracks: [\n\t\t\t\t{\n\t\t\t\t\ttitle: 'ALT + Mouse Drag For Range Selection',\n\t\t\t\t\tid: 'scatterplot-track',\n\t\t\t\t\texperimental: { mouseEvents: true },\n\t\t\t\t\tdata: {\n\t\t\t\t\t\turl: 'https://server.gosling-lang.org/api/v1/tileset_info/?d=cistrome-multivec',\n\t\t\t\t\t\ttype: 'multivec',\n\t\t\t\t\t\trow: 'sample',\n\t\t\t\t\t\tcolumn: 'position',\n\t\t\t\t\t\tvalue: 'peak',\n\t\t\t\t\t\tcategories: ['sample 1', 'sample 2', 'sample 3', 'sample 4'],\n\t\t\t\t\t\tbinSize: 4\n\t\t\t\t\t},\n\t\t\t\t\tmark: 'point',\n\t\t\t\t\tx: { field: 'position', type: 'genomic' },\n\t\t\t\t\ty: { field: 'peak', type: 'quantitative' },\n\t\t\t\t\tsize: { field: 'peak', type: 'quantitative' },\n\t\t\t\t\tcolor: { field: 'sample', type: 'nominal', legend: true },\n\t\t\t\t\twidth: 600,\n\t\t\t\t\theight: 200\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t]\n};\n\nconst vegaLiteSpec = {\n\twidth: 450,\n\theight: 400,\n\tmark: 'bar',\n\tencoding: {\n\t\tx: { field: 'peak', type: 'ordinal', bin: true },\n\t\ty: { field: 'peak', type: 'quantitative', aggregate: 'count' },\n\t\tcolor: { field: 'sample', type: 'nominal', scale: { domain: ['sample 1', 'sample 2', 'sample 3', 'sample 4'], range: ['#E79F00', '#029F73', '#0072B2', '#CB7AA7'] }}\n\t},\n\tdata: { name: 'table' }\n};\n\nfunction VegaLiteExample() {\n\tconst gosRef = useRef(null);\n\n\tconst [selectedData, setSelectedData] = useState([]);\n\n\tuseEffect(() => {\n\t\tif (!gosRef.current) return;\n\t\tgosRef.current.api.subscribe('rangeSelect', (_, e) => setSelectedData(e.data));\n\t\treturn () => gosRef.current.api.unsubscribe('rangeSelect');\n\t}, [gosRef]);\n\n\treturn (\n\t\t<>\n\t\t\t<GoslingComponent\n\t\t\t\tref={gosRef}\n\t\t\t\tspec={goslingSpec}\n\t\t\t\texperimental={{ reactive: true }}\n\t\t\t/>\n\n\t\t\t<div style={{ marginLeft: 80 }}>\n\t\t\t\t<VegaLite spec={vegaLiteSpec} data={{ table: selectedData }} />\n\t\t\t</div>\n\t\t</>\n\t);\n}\n\nexport default VegaLiteExample;"],"mappings":"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"},"metadata":{},"sourceType":"module"}