{"ast":null,"code":"import _defineProperty from \"/Users/weihangzhang/Documents/webpage/gosling-react/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { isNumber } from 'vega-util';\nimport { getViewConfigDiscreteStep } from '../../config';\nimport { isVgRangeStep } from '../../vega.schema';\nimport { getMarkPropOrConfig, signalOrValueRef } from '../common';\nimport * as encode from './encode';\nexport var tick = {\n  vgMark: 'rect',\n  encodeEntry: function encodeEntry(model) {\n    var config = model.config,\n      markDef = model.markDef;\n    var orient = markDef.orient;\n    var vgSizeChannel = orient === 'horizontal' ? 'width' : 'height';\n    var vgThicknessChannel = orient === 'horizontal' ? 'height' : 'width';\n    return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, encode.baseEncodeEntry(model, {\n      align: 'ignore',\n      baseline: 'ignore',\n      color: 'include',\n      orient: 'ignore',\n      size: 'ignore',\n      theta: 'ignore'\n    })), encode.pointPosition('x', model, {\n      defaultPos: 'mid',\n      vgChannel: 'xc'\n    })), encode.pointPosition('y', model, {\n      defaultPos: 'mid',\n      vgChannel: 'yc'\n    })), encode.nonPosition('size', model, {\n      defaultValue: defaultSize(model),\n      vgChannel: vgSizeChannel\n    })), _defineProperty({}, vgThicknessChannel, signalOrValueRef(getMarkPropOrConfig('thickness', markDef, config))));\n  }\n};\nfunction defaultSize(model) {\n  var _a;\n  var config = model.config,\n    markDef = model.markDef;\n  var orient = markDef.orient;\n  var vgSizeChannel = orient === 'horizontal' ? 'width' : 'height';\n  var scale = model.getScaleComponent(orient === 'horizontal' ? 'x' : 'y');\n  var markPropOrConfig = (_a = getMarkPropOrConfig('size', markDef, config, {\n    vgChannel: vgSizeChannel\n  })) !== null && _a !== void 0 ? _a : config.tick.bandSize;\n  if (markPropOrConfig !== undefined) {\n    return markPropOrConfig;\n  } else {\n    var scaleRange = scale ? scale.get('range') : undefined;\n    if (scaleRange && isVgRangeStep(scaleRange) && isNumber(scaleRange.step)) {\n      return scaleRange.step * 3 / 4;\n    }\n    var defaultViewStep = getViewConfigDiscreteStep(config.view, vgSizeChannel);\n    return defaultViewStep * 3 / 4;\n  }\n}","map":{"version":3,"sources":["../../../../src/compile/mark/tick.ts"],"names":[],"mappings":";AACA,SAAQ,QAAQ,QAAO,WAAW;AAClC,SAAQ,yBAAyB,QAAO,cAAc;AACtD,SAAQ,aAAa,QAAO,mBAAmB;AAC/C,SAAQ,mBAAmB,EAAE,gBAAgB,QAAO,WAAW;AAG/D,OAAO,KAAK,MAAM,MAAM,UAAU;AAElC,OAAO,IAAM,IAAI,GAAiB;EAChC,MAAM,EAAE,MAAM;EAEd,WAAW,EAAE,qBAAC,KAAgB,EAAI;IAChC,IAAO,MAAM,GAAa,KAAK,CAAxB,MAAM;MAAE,OAAO,GAAI,KAAK,CAAhB,OAAO;IACtB,IAAM,MAAM,GAAG,OAAO,CAAC,MAAM;IAE7B,IAAM,aAAa,GAAG,MAAM,KAAK,YAAY,GAAG,OAAO,GAAG,QAAQ;IAClE,IAAM,kBAAkB,GAAG,MAAM,KAAK,YAAY,GAAG,QAAQ,GAAG,OAAO;IAEvE,OAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,CAAA,CAAA,EACK,MAAM,CAAC,eAAe,CAAC,KAAK,EAAE;MAC/B,KAAK,EAAE,QAAQ;MACf,QAAQ,EAAE,QAAQ;MAClB,KAAK,EAAE,SAAS;MAChB,MAAM,EAAE,QAAQ;MAChB,IAAI,EAAE,QAAQ;MACd,KAAK,EAAE;KACR,CAAC,CAAA,EAEC,MAAM,CAAC,aAAa,CAAC,GAAG,EAAE,KAAK,EAAE;MAAC,UAAU,EAAE,KAAK;MAAE,SAAS,EAAE;IAAI,CAAC,CAAC,CAAA,EACtE,MAAM,CAAC,aAAa,CAAC,GAAG,EAAE,KAAK,EAAE;MAAC,UAAU,EAAE,KAAK;MAAE,SAAS,EAAE;IAAI,CAAC,CAAC,CAAA,EAGtE,MAAM,CAAC,WAAW,CAAC,MAAM,EAAE,KAAK,EAAE;MACnC,YAAY,EAAE,WAAW,CAAC,KAAK,CAAC;MAChC,SAAS,EAAE;KACZ,CAAC,CAAA,sBACD,kBAAkB,EAAG,gBAAgB,CAAC,mBAAmB,CAAC,WAAW,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC,EAAA;EAE7F;CACD;AAED,SAAS,WAAW,CAAC,KAAgB,EAAA;;EACnC,IAAO,MAAM,GAAa,KAAK,CAAxB,MAAM;IAAE,OAAO,GAAI,KAAK,CAAhB,OAAO;EACtB,IAAO,MAAM,GAAI,OAAO,CAAjB,MAAM;EAEb,IAAM,aAAa,GAAG,MAAM,KAAK,YAAY,GAAG,OAAO,GAAG,QAAQ;EAClE,IAAM,KAAK,GAAG,KAAK,CAAC,iBAAiB,CAAC,MAAM,KAAK,YAAY,GAAG,GAAG,GAAG,GAAG,CAAC;EAE1E,IAAM,gBAAgB,GACpB,CAAA,EAAA,GAAA,mBAAmB,CAAC,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE;IAAC,SAAS,EAAE;EAAa,CAAC,CAAC,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAI,MAAM,CAAC,IAAI,CAAC,QAAQ;EAElG,IAAI,gBAAgB,KAAK,SAAS,EAAE;IAClC,OAAO,gBAAgB;GACxB,MAAM;IACL,IAAM,UAAU,GAAG,KAAK,GAAG,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,SAAS;IACzD,IAAI,UAAU,IAAI,aAAa,CAAC,UAAU,CAAC,IAAI,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE;MACxE,OAAQ,UAAU,CAAC,IAAI,GAAG,CAAC,GAAI,CAAC;IACjC;IAED,IAAM,eAAe,GAAG,yBAAyB,CAAC,MAAM,CAAC,IAAI,EAAE,aAAa,CAAC;IAE7E,OAAQ,eAAe,GAAG,CAAC,GAAI,CAAC;EACjC;AACH","sourceRoot":"","sourcesContent":["import { isNumber } from 'vega-util';\nimport { getViewConfigDiscreteStep } from '../../config';\nimport { isVgRangeStep } from '../../vega.schema';\nimport { getMarkPropOrConfig, signalOrValueRef } from '../common';\nimport * as encode from './encode';\nexport const tick = {\n    vgMark: 'rect',\n    encodeEntry: (model) => {\n        const { config, markDef } = model;\n        const orient = markDef.orient;\n        const vgSizeChannel = orient === 'horizontal' ? 'width' : 'height';\n        const vgThicknessChannel = orient === 'horizontal' ? 'height' : 'width';\n        return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, encode.baseEncodeEntry(model, {\n            align: 'ignore',\n            baseline: 'ignore',\n            color: 'include',\n            orient: 'ignore',\n            size: 'ignore',\n            theta: 'ignore'\n        })), encode.pointPosition('x', model, { defaultPos: 'mid', vgChannel: 'xc' })), encode.pointPosition('y', model, { defaultPos: 'mid', vgChannel: 'yc' })), encode.nonPosition('size', model, {\n            defaultValue: defaultSize(model),\n            vgChannel: vgSizeChannel\n        })), { [vgThicknessChannel]: signalOrValueRef(getMarkPropOrConfig('thickness', markDef, config)) });\n    }\n};\nfunction defaultSize(model) {\n    var _a;\n    const { config, markDef } = model;\n    const { orient } = markDef;\n    const vgSizeChannel = orient === 'horizontal' ? 'width' : 'height';\n    const scale = model.getScaleComponent(orient === 'horizontal' ? 'x' : 'y');\n    const markPropOrConfig = (_a = getMarkPropOrConfig('size', markDef, config, { vgChannel: vgSizeChannel })) !== null && _a !== void 0 ? _a : config.tick.bandSize;\n    if (markPropOrConfig !== undefined) {\n        return markPropOrConfig;\n    }\n    else {\n        const scaleRange = scale ? scale.get('range') : undefined;\n        if (scaleRange && isVgRangeStep(scaleRange) && isNumber(scaleRange.step)) {\n            return (scaleRange.step * 3) / 4;\n        }\n        const defaultViewStep = getViewConfigDiscreteStep(config.view, vgSizeChannel);\n        return (defaultViewStep * 3) / 4;\n    }\n}\n//# sourceMappingURL=tick.js.map"]},"metadata":{},"sourceType":"module"}