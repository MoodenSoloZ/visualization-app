{"ast":null,"code":"import _slicedToArray from\"/Users/weihangzhang/Documents/webpage/gosling-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useRef,useState}from'react';import{GoslingComponent}from'gosling.js';function MouseEvents(){var gosRef=useRef();var _useState=useState(),_useState2=_slicedToArray(_useState,2),position=_useState2[0],setPosition=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];useEffect(function(){if(!gosRef.current)return;gosRef.current.api.subscribe('click',function(_,eventData){var p=eventData.genomicPosition;window.alert(p.chromosome);setPosition(\"\".concat(p.chromosome,\":\").concat(p.position));setData(eventData.data);});gosRef.current.api.subscribe('rangeSelect',function(_,eventData){if(!eventData||!eventData.genomicRange){// range selection cleared\nsetPosition('N/A');setData([]);}else{var p=eventData.genomicRange;if(p.length===2)setPosition(\"\".concat(p[0].chromosome,\":\").concat(p[0].position,\"-\").concat(p[1].chromosome,\":\").concat(p[1].position));setData(eventData.data.length>10?eventData.data.slice(0,10):eventData.data);}});return function(){gosRef.current.api.unsubscribe('click');gosRef.current.api.unsubscribe('rangeSelect');};},[gosRef]);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{style:{marginTop:30,marginLeft:80}},\"Selected Position: \",position?position:'N/A'),/*#__PURE__*/React.createElement(GoslingComponent,{ref:gosRef,spec:{title:'Basic Marks: bar',subtitle:'Tutorial Examples',tracks:[{experimental:{mouseEvents:true},layout:'linear',width:800,height:180,data:{url:'https://resgen.io/api/v1/tileset_info/?d=UvVPeLHuRDiYA3qwFlm7xQ',type:'multivec',row:'sample',column:'position',value:'peak',categories:['sample 1'],binSize:5},tooltip:[{field:'start',type:'genomic'},{field:'end',type:'genomic'},{field:'peak',type:'nominal'}],mark:'bar',x:{field:'start',type:'genomic',axis:'bottom'},xe:{field:'end',type:'genomic'},y:{field:'peak',type:'quantitative',axis:'right'},size:{value:5}}]},experimental:{reactive:true}}),data.length===0?null:/*#__PURE__*/React.createElement(\"div\",{className:\"mx-[60px]\"},/*#__PURE__*/React.createElement(\"table\",{className:\"table-fixed border-collapse border border-slate-400\"},/*#__PURE__*/React.createElement(\"thead\",{className:\"capitalize\"},/*#__PURE__*/React.createElement(\"tr\",{className:\"border border-slate-300  bg-slate-100\"},Object.keys(data[0]).map(function(d){return/*#__PURE__*/React.createElement(\"th\",{className:\"px-1\",key:d},d);}))),/*#__PURE__*/React.createElement(\"tbody\",null,data.map(function(d){return/*#__PURE__*/React.createElement(\"tr\",{className:\"border border-slate-300\",key:JSON.stringify(d)},Object.entries(d).map(function(datum){return/*#__PURE__*/React.createElement(\"td\",{className:\"px-1\",key:datum[0]},datum[1]);}));})))));}export default MouseEvents;","map":{"version":3,"names":["React","useEffect","useRef","useState","GoslingComponent","MouseEvents","gosRef","position","setPosition","data","setData","current","api","subscribe","_","eventData","p","genomicPosition","window","alert","chromosome","genomicRange","length","slice","unsubscribe","marginTop","marginLeft","title","subtitle","tracks","experimental","mouseEvents","layout","width","height","url","type","row","column","value","categories","binSize","tooltip","field","mark","x","axis","xe","y","size","reactive","Object","keys","map","d","JSON","stringify","entries","datum"],"sources":["/Users/weihangzhang/Documents/webpage/gosling-react/src/example/MouseEvents.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { GoslingComponent } from 'gosling.js';\n\nfunction MouseEvents() {\n\n\tconst gosRef = useRef();\n\tconst [position, setPosition] = useState();\n\tconst [data, setData] = useState([]);\n\n\tuseEffect(() => {\n\t\tif(!gosRef.current) return;\n\n\t\tgosRef.current.api.subscribe('click', (_, eventData) => {\n\t\t\tconst { genomicPosition: p } = eventData;\n\t\t\twindow.alert(p.chromosome);\n\t\t\tsetPosition(`${p.chromosome}:${p.position}`)\n\t\t\tsetData(eventData.data);\n\t\t});\n\n\t\tgosRef.current.api.subscribe('rangeSelect', (_, eventData) => {\n\t\t\tif(!eventData || !eventData.genomicRange) {\n\t\t\t\t// range selection cleared\n\t\t\t\tsetPosition('N/A');\n\t\t\t\tsetData([]);\n\t\t\t} else {\n\t\t\t\tconst { genomicRange: p } = eventData;\n\t\t\t\tif(p.length === 2) setPosition(`${p[0].chromosome}:${p[0].position}-${p[1].chromosome}:${p[1].position}`);\n\t\t\t\tsetData(eventData.data.length > 10 ? eventData.data.slice(0, 10) : eventData.data);\n\t\t\t}\n\t\t});\n\n\t\treturn () => {\n\t\t\tgosRef.current.api.unsubscribe('click');\n\t\t\tgosRef.current.api.unsubscribe('rangeSelect');\n\t\t}\n\t}, [gosRef]);\n\n\treturn (\n\t\t<div>\n\t\t\t<div style={{ marginTop: 30, marginLeft: 80 }}>\n\t\t\t\tSelected Position: {position ? position : 'N/A'}\n\t\t\t</div>\n\t\t\t<GoslingComponent\n\t\t\t\tref={gosRef}\n\t\t\t\tspec={{\n\t\t\t\t\ttitle: 'Basic Marks: bar',\n\t\t\t\t\tsubtitle: 'Tutorial Examples',\n\t\t\t\t\ttracks: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\texperimental: { mouseEvents: true },\n\t\t\t\t\t\t\tlayout: 'linear',\n\t\t\t\t\t\t\twidth: 800,\n\t\t\t\t\t\t\theight: 180,\n\t\t\t\t\t\t\tdata: \n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\turl: 'https://resgen.io/api/v1/tileset_info/?d=UvVPeLHuRDiYA3qwFlm7xQ',\n\t\t\t\t\t\t\t\ttype: 'multivec',\n\t\t\t\t\t\t\t\trow: 'sample',\n\t\t\t\t\t\t\t\tcolumn: 'position',\n\t\t\t\t\t\t\t\tvalue: 'peak',\n\t\t\t\t\t\t\t\tcategories: ['sample 1'],\n\t\t\t\t\t\t\t\tbinSize: 5\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttooltip: [\n\t\t\t\t\t\t\t\t{field: 'start', type: 'genomic'},\n\t\t\t\t\t\t\t\t{field: 'end', type: 'genomic'},\n\t\t\t\t\t\t\t\t{field: 'peak', type: 'nominal'},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tmark: 'bar',\n\t\t\t\t\t\t\tx: {field: 'start', type: 'genomic', axis: 'bottom'},\n\t\t\t\t\t\t\txe: {field: 'end', type: 'genomic'},\n\t\t\t\t\t\t\ty: {field: 'peak', type: 'quantitative', axis: 'right'},\n\t\t\t\t\t\t\tsize: {value: 5}\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}}\n\t\t\t\texperimental={{ reactive: true }}\n\t\t\t/>\n\t\t\t{data.length === 0 ? null : (<div  className='mx-[60px]'>\n\t\t\t\t<table className='table-fixed border-collapse border border-slate-400'>\n\t\t\t\t\t<thead className='capitalize'>\n\t\t\t\t\t    <tr className='border border-slate-300  bg-slate-100'>{Object.keys(data[0]).map(d => <th className='px-1' key={d}>{d}</th>)}</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{data.map(d => <tr className='border border-slate-300' key={JSON.stringify(d)}>{Object.entries(d).map(datum => <td className='px-1' key={datum[0]}>{datum[1]}</td>)}</tr>)}\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>)}\n\t\t</div>\n\t);\n}\n\nexport default MouseEvents;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}