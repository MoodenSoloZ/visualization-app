{"ast":null,"code":"import _createForOfIteratorHelper from \"/Users/weihangzhang/Documents/webpage/gosling-react/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _slicedToArray from \"/Users/weihangzhang/Documents/webpage/gosling-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _toConsumableArray from \"/Users/weihangzhang/Documents/webpage/gosling-react/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport { truthy, error, hasOwnProperty, isFunction, isString, stringValue, extend, isArray, isObject, field, peek, identity, array as array$1, isBoolean, isDate, isNumber, isRegExp, toBoolean, toDate as _toDate, toNumber, toString, flush, lerp, pad, span, inrange, truncate, quarter, utcquarter, extent as _extent, clampRange, panLinear, panLog, panPow, panSymlog, zoomLinear, zoomLog, zoomPow, zoomSymlog } from 'vega-util';\nimport { Literal, codegenExpression, constants, functions, parseExpression, CallExpression } from 'vega-expression';\nimport { geoBounds as geoBounds$1, geoCentroid as geoCentroid$1, geoArea as geoArea$1 } from 'd3-geo';\nimport { rgb, lab, hcl, hsl } from 'd3-color';\nimport { isTuple } from 'vega-dataflow';\nimport { bandSpace, scale as scale$1, scaleFraction } from 'vega-scale';\nimport { Gradient, pathRender, pathParse, Bounds, intersect as intersect$1 } from 'vega-scenegraph';\nimport { selectionVisitor, selectionTest, selectionIdTest, selectionResolve, selectionTuples } from 'vega-selections';\nimport { random as _random, cumulativeNormal, cumulativeLogNormal, cumulativeUniform, densityNormal, densityLogNormal, densityUniform, quantileNormal, quantileLogNormal, quantileUniform, sampleNormal, sampleLogNormal, sampleUniform } from 'vega-statistics';\nimport { utcOffset, utcSequence, timeOffset, timeSequence, timeUnitSpecifier, week, utcweek, dayofyear, utcdayofyear } from 'vega-time';\nimport { range as range$1 } from 'd3-array';\nfunction data(name) {\n  var data = this.context.data[name];\n  return data ? data.values.value : [];\n}\nfunction indata(name, field, value) {\n  var index = this.context.data[name]['index:' + field],\n    entry = index ? index.value.get(value) : undefined;\n  return entry ? entry.count : entry;\n}\nfunction setdata(name, tuples) {\n  var df = this.context.dataflow,\n    data = this.context.data[name],\n    input = data.input;\n  df.pulse(input, df.changeset().remove(truthy).insert(tuples));\n  return 1;\n}\nfunction encode(item, name, retval) {\n  if (item) {\n    var df = this.context.dataflow,\n      target = item.mark.source;\n    df.pulse(target, df.changeset().encode(item, name));\n  }\n  return retval !== undefined ? retval : item;\n}\nvar wrap = function wrap(method) {\n  return function (value, spec) {\n    var locale = this.context.dataflow.locale();\n    return locale[method](spec)(value);\n  };\n};\nvar format = wrap('format');\nvar timeFormat = wrap('timeFormat');\nvar utcFormat = wrap('utcFormat');\nvar timeParse = wrap('timeParse');\nvar utcParse = wrap('utcParse');\nvar dateObj = new Date(2000, 0, 1);\nfunction time(month, day, specifier) {\n  if (!Number.isInteger(month) || !Number.isInteger(day)) return '';\n  dateObj.setYear(2000);\n  dateObj.setMonth(month);\n  dateObj.setDate(day);\n  return timeFormat.call(this, dateObj, specifier);\n}\nfunction monthFormat(month) {\n  return time.call(this, month, 1, '%B');\n}\nfunction monthAbbrevFormat(month) {\n  return time.call(this, month, 1, '%b');\n}\nfunction dayFormat(day) {\n  return time.call(this, 0, 2 + day, '%A');\n}\nfunction dayAbbrevFormat(day) {\n  return time.call(this, 0, 2 + day, '%a');\n}\nvar DataPrefix = ':';\nvar IndexPrefix = '@';\nvar ScalePrefix = '%';\nvar SignalPrefix = '$';\nfunction dataVisitor(name, args, scope, params) {\n  if (args[0].type !== Literal) {\n    error('First argument to data functions must be a string literal.');\n  }\n  var data = args[0].value,\n    dataName = DataPrefix + data;\n  if (!hasOwnProperty(dataName, params)) {\n    try {\n      params[dataName] = scope.getData(data).tuplesRef();\n    } catch (err) {// if data set does not exist, there's nothing to track\n    }\n  }\n}\nfunction indataVisitor(name, args, scope, params) {\n  if (args[0].type !== Literal) error('First argument to indata must be a string literal.');\n  if (args[1].type !== Literal) error('Second argument to indata must be a string literal.');\n  var data = args[0].value,\n    field = args[1].value,\n    indexName = IndexPrefix + field;\n  if (!hasOwnProperty(indexName, params)) {\n    params[indexName] = scope.getData(data).indataRef(scope, field);\n  }\n}\nfunction scaleVisitor(name, args, scope, params) {\n  if (args[0].type === Literal) {\n    // add scale dependency\n    addScaleDependency(scope, params, args[0].value);\n  } else {\n    // indirect scale lookup; add all scales as parameters\n    for (name in scope.scales) {\n      addScaleDependency(scope, params, name);\n    }\n  }\n}\nfunction addScaleDependency(scope, params, name) {\n  var scaleName = ScalePrefix + name;\n  if (!hasOwnProperty(params, scaleName)) {\n    try {\n      params[scaleName] = scope.scaleRef(name);\n    } catch (err) {// TODO: error handling? warning?\n    }\n  }\n}\nfunction getScale(name, ctx) {\n  var s;\n  return isFunction(name) ? name : isString(name) ? (s = ctx.scales[name]) && s.value : undefined;\n}\nfunction internalScaleFunctions(codegen, fnctx, visitors) {\n  // add helper method to the 'this' expression function context\n  fnctx.__bandwidth = function (s) {\n    return s && s.bandwidth ? s.bandwidth() : 0;\n  }; // register AST visitors for internal scale functions\n\n  visitors._bandwidth = scaleVisitor;\n  visitors._range = scaleVisitor;\n  visitors._scale = scaleVisitor; // resolve scale reference directly to the signal hash argument\n\n  var ref = function ref(arg) {\n    return '_[' + (arg.type === Literal ? stringValue(ScalePrefix + arg.value) : stringValue(ScalePrefix) + '+' + codegen(arg)) + ']';\n  }; // define and return internal scale function code generators\n  // these internal functions are called by mark encoders\n\n  return {\n    _bandwidth: function _bandwidth(args) {\n      return \"this.__bandwidth(\".concat(ref(args[0]), \")\");\n    },\n    _range: function _range(args) {\n      return \"\".concat(ref(args[0]), \".range()\");\n    },\n    _scale: function _scale(args) {\n      return \"\".concat(ref(args[0]), \"(\").concat(codegen(args[1]), \")\");\n    }\n  };\n}\nfunction geoMethod(methodName, globalMethod) {\n  return function (projection, geojson, group) {\n    if (projection) {\n      // projection defined, use it\n      var p = getScale(projection, (group || this).context);\n      return p && p.path[methodName](geojson);\n    } else {\n      // projection undefined, use global method\n      return globalMethod(geojson);\n    }\n  };\n}\nvar geoArea = geoMethod('area', geoArea$1);\nvar geoBounds = geoMethod('bounds', geoBounds$1);\nvar geoCentroid = geoMethod('centroid', geoCentroid$1);\nfunction inScope(item) {\n  var group = this.context.group;\n  var value = false;\n  if (group) while (item) {\n    if (item === group) {\n      value = true;\n      break;\n    }\n    item = item.mark.group;\n  }\n  return value;\n}\nfunction log(df, method, args) {\n  try {\n    df[method].apply(df, ['EXPRESSION'].concat([].slice.call(args)));\n  } catch (err) {\n    df.warn(err);\n  }\n  return args[args.length - 1];\n}\nfunction warn() {\n  return log(this.context.dataflow, 'warn', arguments);\n}\nfunction info() {\n  return log(this.context.dataflow, 'info', arguments);\n}\nfunction debug() {\n  return log(this.context.dataflow, 'debug', arguments);\n}\nfunction channel_luminance_value(channelValue) {\n  var val = channelValue / 255;\n  if (val <= 0.03928) {\n    return val / 12.92;\n  }\n  return Math.pow((val + 0.055) / 1.055, 2.4);\n}\nfunction luminance(color) {\n  var c = rgb(color),\n    r = channel_luminance_value(c.r),\n    g = channel_luminance_value(c.g),\n    b = channel_luminance_value(c.b);\n  return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n} // https://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef\n\nfunction contrast(color1, color2) {\n  var lum1 = luminance(color1),\n    lum2 = luminance(color2),\n    lumL = Math.max(lum1, lum2),\n    lumD = Math.min(lum1, lum2);\n  return (lumL + 0.05) / (lumD + 0.05);\n}\nfunction merge() {\n  var args = [].slice.call(arguments);\n  args.unshift({});\n  return extend.apply(void 0, _toConsumableArray(args));\n}\nfunction equal(a, b) {\n  return a === b || a !== a && b !== b ? true : isArray(a) ? isArray(b) && a.length === b.length ? equalArray(a, b) : false : isObject(a) && isObject(b) ? equalObject(a, b) : false;\n}\nfunction equalArray(a, b) {\n  for (var i = 0, n = a.length; i < n; ++i) {\n    if (!equal(a[i], b[i])) return false;\n  }\n  return true;\n}\nfunction equalObject(a, b) {\n  for (var key in a) {\n    if (!equal(a[key], b[key])) return false;\n  }\n  return true;\n}\nfunction removePredicate(props) {\n  return function (_) {\n    return equalObject(props, _);\n  };\n}\nfunction modify(name, insert, remove, toggle, modify, values) {\n  var df = this.context.dataflow,\n    data = this.context.data[name],\n    input = data.input,\n    stamp = df.stamp();\n  var changes = data.changes,\n    predicate,\n    key;\n  if (df._trigger === false || !(input.value.length || insert || toggle)) {\n    // nothing to do!\n    return 0;\n  }\n  if (!changes || changes.stamp < stamp) {\n    data.changes = changes = df.changeset();\n    changes.stamp = stamp;\n    df.runAfter(function () {\n      data.modified = true;\n      df.pulse(input, changes).run();\n    }, true, 1);\n  }\n  if (remove) {\n    predicate = remove === true ? truthy : isArray(remove) || isTuple(remove) ? remove : removePredicate(remove);\n    changes.remove(predicate);\n  }\n  if (insert) {\n    changes.insert(insert);\n  }\n  if (toggle) {\n    predicate = removePredicate(toggle);\n    if (input.value.some(predicate)) {\n      changes.remove(predicate);\n    } else {\n      changes.insert(toggle);\n    }\n  }\n  if (modify) {\n    for (key in values) {\n      changes.modify(modify, key, values[key]);\n    }\n  }\n  return 1;\n}\nfunction pinchDistance(event) {\n  var t = event.touches,\n    dx = t[0].clientX - t[1].clientX,\n    dy = t[0].clientY - t[1].clientY;\n  return Math.sqrt(dx * dx + dy * dy);\n}\nfunction pinchAngle(event) {\n  var t = event.touches;\n  return Math.atan2(t[0].clientY - t[1].clientY, t[0].clientX - t[1].clientX);\n}\nvar accessors = {};\nfunction pluck(data, name) {\n  var accessor = accessors[name] || (accessors[name] = field(name));\n  return isArray(data) ? data.map(accessor) : accessor(data);\n}\nfunction array(seq) {\n  return isArray(seq) || ArrayBuffer.isView(seq) ? seq : null;\n}\nfunction sequence(seq) {\n  return array(seq) || (isString(seq) ? seq : null);\n}\nfunction join(seq) {\n  var _array;\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n  return (_array = array(seq)).join.apply(_array, args);\n}\nfunction indexof(seq) {\n  var _sequence;\n  for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    args[_key2 - 1] = arguments[_key2];\n  }\n  return (_sequence = sequence(seq)).indexOf.apply(_sequence, args);\n}\nfunction lastindexof(seq) {\n  var _sequence2;\n  for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n    args[_key3 - 1] = arguments[_key3];\n  }\n  return (_sequence2 = sequence(seq)).lastIndexOf.apply(_sequence2, args);\n}\nfunction slice(seq) {\n  var _sequence3;\n  for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n    args[_key4 - 1] = arguments[_key4];\n  }\n  return (_sequence3 = sequence(seq)).slice.apply(_sequence3, args);\n}\nfunction replace(str, pattern, repl) {\n  if (isFunction(repl)) error('Function argument passed to replace.');\n  return String(str).replace(pattern, repl);\n}\nfunction reverse(seq) {\n  return array(seq).slice().reverse();\n}\nfunction bandspace(count, paddingInner, paddingOuter) {\n  return bandSpace(count || 0, paddingInner || 0, paddingOuter || 0);\n}\nfunction bandwidth(name, group) {\n  var s = getScale(name, (group || this).context);\n  return s && s.bandwidth ? s.bandwidth() : 0;\n}\nfunction copy(name, group) {\n  var s = getScale(name, (group || this).context);\n  return s ? s.copy() : undefined;\n}\nfunction domain(name, group) {\n  var s = getScale(name, (group || this).context);\n  return s ? s.domain() : [];\n}\nfunction invert(name, range, group) {\n  var s = getScale(name, (group || this).context);\n  return !s ? undefined : isArray(range) ? (s.invertRange || s.invert)(range) : (s.invert || s.invertExtent)(range);\n}\nfunction range(name, group) {\n  var s = getScale(name, (group || this).context);\n  return s && s.range ? s.range() : [];\n}\nfunction scale(name, value, group) {\n  var s = getScale(name, (group || this).context);\n  return s ? s(value) : undefined;\n}\nfunction scaleGradient(scale, p0, p1, count, group) {\n  scale = getScale(scale, (group || this).context);\n  var gradient = Gradient(p0, p1);\n  var stops = scale.domain(),\n    min = stops[0],\n    max = peek(stops),\n    fraction = identity;\n  if (!(max - min)) {\n    // expand scale if domain has zero span, fix #1479\n    scale = (scale.interpolator ? scale$1('sequential')().interpolator(scale.interpolator()) : scale$1('linear')().interpolate(scale.interpolate()).range(scale.range())).domain([min = 0, max = 1]);\n  } else {\n    fraction = scaleFraction(scale, min, max);\n  }\n  if (scale.ticks) {\n    stops = scale.ticks(+count || 15);\n    if (min !== stops[0]) stops.unshift(min);\n    if (max !== peek(stops)) stops.push(max);\n  }\n  stops.forEach(function (_) {\n    return gradient.stop(fraction(_), scale(_));\n  });\n  return gradient;\n}\nfunction geoShape(projection, geojson, group) {\n  var p = getScale(projection, (group || this).context);\n  return function (context) {\n    return p ? p.path.context(context)(geojson) : '';\n  };\n}\nfunction pathShape(path) {\n  var p = null;\n  return function (context) {\n    return context ? pathRender(context, p = p || pathParse(path)) : path;\n  };\n}\nvar datum = function datum(d) {\n  return d.data;\n};\nfunction treeNodes(name, context) {\n  var tree = data.call(context, name);\n  return tree.root && tree.root.lookup || {};\n}\nfunction treePath(name, source, target) {\n  var nodes = treeNodes(name, this),\n    s = nodes[source],\n    t = nodes[target];\n  return s && t ? s.path(t).map(datum) : undefined;\n}\nfunction treeAncestors(name, node) {\n  var n = treeNodes(name, this)[node];\n  return n ? n.ancestors().map(datum) : undefined;\n}\nvar _window = function _window() {\n  return typeof window !== 'undefined' && window || null;\n};\nfunction screen() {\n  var w = _window();\n  return w ? w.screen : {};\n}\nfunction windowSize() {\n  var w = _window();\n  return w ? [w.innerWidth, w.innerHeight] : [undefined, undefined];\n}\nfunction containerSize() {\n  var view = this.context.dataflow,\n    el = view.container && view.container();\n  return el ? [el.clientWidth, el.clientHeight] : [undefined, undefined];\n}\nfunction intersect(b, opt, group) {\n  if (!b) return [];\n  var _b = _slicedToArray(b, 2),\n    u = _b[0],\n    v = _b[1],\n    box = new Bounds().set(u[0], u[1], v[0], v[1]),\n    scene = group || this.context.dataflow.scenegraph().root;\n  return intersect$1(scene, box, filter(opt));\n}\nfunction filter(opt) {\n  var p = null;\n  if (opt) {\n    var types = array$1(opt.marktype),\n      names = array$1(opt.markname);\n    p = function p(_) {\n      return (!types.length || types.some(function (t) {\n        return _.marktype === t;\n      })) && (!names.length || names.some(function (s) {\n        return _.name === s;\n      }));\n    };\n  }\n  return p;\n}\n\n/**\n * Appends a new point to the lasso\n * \n * @param {*} lasso the lasso in pixel space\n * @param {*} x the x coordinate in pixel space\n * @param {*} y the y coordinate in pixel space\n * @param {*} minDist the minimum distance, in pixels, that thenew point needs to be apart from the last point\n * @returns a new array containing the lasso with the new point\n */\n\nfunction lassoAppend(lasso, x, y) {\n  var minDist = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 5;\n  var last = lasso[lasso.length - 1]; // Add point to lasso if distance to last point exceed minDist or its the first point\n\n  if (last === undefined || Math.sqrt(Math.pow(last[0] - x, 2) + Math.pow(last[1] - y, 2)) > minDist) {\n    lasso.push([x, y]);\n    return _toConsumableArray(lasso);\n  }\n  return lasso;\n}\n/**\n * Generates a svg path command which draws a lasso\n * \n * @param {*} lasso the lasso in pixel space in the form [[x,y], [x,y], ...]\n * @returns the svg path command that draws the lasso\n */\n\nfunction lassoPath(lasso) {\n  return (lasso !== null && lasso !== void 0 ? lasso : []).reduce(function (svg, _ref, i) {\n    var _ref2 = _slicedToArray(_ref, 2),\n      x = _ref2[0],\n      y = _ref2[1];\n    return svg += i == 0 ? \"M \".concat(x, \",\").concat(y, \" \") : i === lasso.length - 1 ? ' Z' : \"L \".concat(x, \",\").concat(y, \" \");\n  }, '');\n}\n/**\n * Inverts the lasso from pixel space to an array of vega scenegraph tuples\n * \n * @param {*} data the dataset\n * @param {*} pixelLasso the lasso in pixel space, [[x,y], [x,y], ...]\n * @param {*} unit the unit where the lasso is defined\n * \n * @returns an array of vega scenegraph tuples\n */\n\nfunction intersectLasso(markname, pixelLasso, unit) {\n  var x = unit.x,\n    y = unit.y,\n    mark = unit.mark;\n  var bb = new Bounds().set(Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER, Number.MIN_SAFE_INTEGER, Number.MIN_SAFE_INTEGER); // Get bounding box around lasso\n  var _iterator = _createForOfIteratorHelper(pixelLasso),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var _step$value = _slicedToArray(_step.value, 2),\n        px = _step$value[0],\n        py = _step$value[1];\n      if (px < bb.x1) bb.x1 = px;\n      if (px > bb.x2) bb.x2 = px;\n      if (py < bb.y1) bb.y1 = py;\n      if (py > bb.y2) bb.y2 = py;\n    } // Translate bb against unit coordinates\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  bb.translate(x, y);\n  var intersection = intersect([[bb.x1, bb.y1], [bb.x2, bb.y2]], markname, mark); // Check every point against the lasso\n\n  return intersection.filter(function (tuple) {\n    return pointInPolygon(tuple.x, tuple.y, pixelLasso);\n  });\n}\n/**\n * Performs a test if a point is inside a polygon based on the idea from\n * https://wrf.ecse.rpi.edu/Research/Short_Notes/pnpoly.html\n * \n * This method will not need the same start/end point since it wraps around the edges of the array\n * \n * @param {*} test a point to test against\n * @param {*} polygon a polygon in the form [[x,y], [x,y], ...]\n * @returns true if the point lies inside the polygon, false otherwise\n */\n\nfunction pointInPolygon(testx, testy, polygon) {\n  var intersections = 0;\n  for (var i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {\n    var _polygon$j = _slicedToArray(polygon[j], 2),\n      prevX = _polygon$j[0],\n      prevY = _polygon$j[1];\n    var _polygon$i = _slicedToArray(polygon[i], 2),\n      x = _polygon$i[0],\n      y = _polygon$i[1]; // count intersections\n\n    if (y > testy != prevY > testy && testx < (prevX - x) * (testy - y) / (prevY - y) + x) {\n      intersections++;\n    }\n  } // point is in polygon if intersection count is odd\n\n  return intersections & 1;\n}\nvar functionContext = {\n  random: function random() {\n    return _random();\n  },\n  // override default\n  cumulativeNormal: cumulativeNormal,\n  cumulativeLogNormal: cumulativeLogNormal,\n  cumulativeUniform: cumulativeUniform,\n  densityNormal: densityNormal,\n  densityLogNormal: densityLogNormal,\n  densityUniform: densityUniform,\n  quantileNormal: quantileNormal,\n  quantileLogNormal: quantileLogNormal,\n  quantileUniform: quantileUniform,\n  sampleNormal: sampleNormal,\n  sampleLogNormal: sampleLogNormal,\n  sampleUniform: sampleUniform,\n  isArray: isArray,\n  isBoolean: isBoolean,\n  isDate: isDate,\n  isDefined: function isDefined(_) {\n    return _ !== undefined;\n  },\n  isNumber: isNumber,\n  isObject: isObject,\n  isRegExp: isRegExp,\n  isString: isString,\n  isTuple: isTuple,\n  isValid: function isValid(_) {\n    return _ != null && _ === _;\n  },\n  toBoolean: toBoolean,\n  toDate: function toDate(_) {\n    return _toDate(_);\n  },\n  // suppress extra arguments\n  toNumber: toNumber,\n  toString: toString,\n  indexof: indexof,\n  join: join,\n  lastindexof: lastindexof,\n  replace: replace,\n  reverse: reverse,\n  slice: slice,\n  flush: flush,\n  lerp: lerp,\n  merge: merge,\n  pad: pad,\n  peek: peek,\n  pluck: pluck,\n  span: span,\n  inrange: inrange,\n  truncate: truncate,\n  rgb: rgb,\n  lab: lab,\n  hcl: hcl,\n  hsl: hsl,\n  luminance: luminance,\n  contrast: contrast,\n  sequence: range$1,\n  format: format,\n  utcFormat: utcFormat,\n  utcParse: utcParse,\n  utcOffset: utcOffset,\n  utcSequence: utcSequence,\n  timeFormat: timeFormat,\n  timeParse: timeParse,\n  timeOffset: timeOffset,\n  timeSequence: timeSequence,\n  timeUnitSpecifier: timeUnitSpecifier,\n  monthFormat: monthFormat,\n  monthAbbrevFormat: monthAbbrevFormat,\n  dayFormat: dayFormat,\n  dayAbbrevFormat: dayAbbrevFormat,\n  quarter: quarter,\n  utcquarter: utcquarter,\n  week: week,\n  utcweek: utcweek,\n  dayofyear: dayofyear,\n  utcdayofyear: utcdayofyear,\n  warn: warn,\n  info: info,\n  debug: debug,\n  extent: function extent(_) {\n    return _extent(_);\n  },\n  // suppress extra arguments\n  inScope: inScope,\n  intersect: intersect,\n  clampRange: clampRange,\n  pinchDistance: pinchDistance,\n  pinchAngle: pinchAngle,\n  screen: screen,\n  containerSize: containerSize,\n  windowSize: windowSize,\n  bandspace: bandspace,\n  setdata: setdata,\n  pathShape: pathShape,\n  panLinear: panLinear,\n  panLog: panLog,\n  panPow: panPow,\n  panSymlog: panSymlog,\n  zoomLinear: zoomLinear,\n  zoomLog: zoomLog,\n  zoomPow: zoomPow,\n  zoomSymlog: zoomSymlog,\n  encode: encode,\n  modify: modify,\n  lassoAppend: lassoAppend,\n  lassoPath: lassoPath,\n  intersectLasso: intersectLasso\n};\nvar eventFunctions = ['view', 'item', 'group', 'xy', 'x', 'y'],\n  // event functions\n  eventPrefix = 'event.vega.',\n  // event function prefix\n  thisPrefix = 'this.',\n  // function context prefix\n  astVisitors = {}; // AST visitors for dependency analysis\n// export code generator parameters\n\nvar codegenParams = {\n  forbidden: ['_'],\n  allowed: ['datum', 'event', 'item'],\n  fieldvar: 'datum',\n  globalvar: function globalvar(id) {\n    return \"_[\".concat(stringValue(SignalPrefix + id), \"]\");\n  },\n  functions: buildFunctions,\n  constants: constants,\n  visitors: astVisitors\n}; // export code generator\n\nvar codeGenerator = codegenExpression(codegenParams); // Build expression function registry\n\nfunction buildFunctions(codegen) {\n  var fn = functions(codegen);\n  eventFunctions.forEach(function (name) {\n    return fn[name] = eventPrefix + name;\n  });\n  for (var name in functionContext) {\n    fn[name] = thisPrefix + name;\n  }\n  extend(fn, internalScaleFunctions(codegen, functionContext, astVisitors));\n  return fn;\n} // Register an expression function\n\nfunction expressionFunction(name, fn, visitor) {\n  if (arguments.length === 1) {\n    return functionContext[name];\n  } // register with the functionContext\n\n  functionContext[name] = fn; // if there is an astVisitor register that, too\n\n  if (visitor) astVisitors[name] = visitor; // if the code generator has already been initialized,\n  // we need to also register the function with it\n\n  if (codeGenerator) codeGenerator.functions[name] = thisPrefix + name;\n  return this;\n} // register expression functions with ast visitors\n\nexpressionFunction('bandwidth', bandwidth, scaleVisitor);\nexpressionFunction('copy', copy, scaleVisitor);\nexpressionFunction('domain', domain, scaleVisitor);\nexpressionFunction('range', range, scaleVisitor);\nexpressionFunction('invert', invert, scaleVisitor);\nexpressionFunction('scale', scale, scaleVisitor);\nexpressionFunction('gradient', scaleGradient, scaleVisitor);\nexpressionFunction('geoArea', geoArea, scaleVisitor);\nexpressionFunction('geoBounds', geoBounds, scaleVisitor);\nexpressionFunction('geoCentroid', geoCentroid, scaleVisitor);\nexpressionFunction('geoShape', geoShape, scaleVisitor);\nexpressionFunction('indata', indata, indataVisitor);\nexpressionFunction('data', data, dataVisitor);\nexpressionFunction('treePath', treePath, dataVisitor);\nexpressionFunction('treeAncestors', treeAncestors, dataVisitor); // register Vega-Lite selection functions\n\nexpressionFunction('vlSelectionTest', selectionTest, selectionVisitor);\nexpressionFunction('vlSelectionIdTest', selectionIdTest, selectionVisitor);\nexpressionFunction('vlSelectionResolve', selectionResolve, selectionVisitor);\nexpressionFunction('vlSelectionTuples', selectionTuples);\nfunction parser(expr, scope) {\n  var params = {}; // parse the expression to an abstract syntax tree (ast)\n\n  var ast;\n  try {\n    expr = isString(expr) ? expr : stringValue(expr) + '';\n    ast = parseExpression(expr);\n  } catch (err) {\n    error('Expression parse error: ' + expr);\n  } // analyze ast function calls for dependencies\n\n  ast.visit(function (node) {\n    if (node.type !== CallExpression) return;\n    var name = node.callee.name,\n      visit = codegenParams.visitors[name];\n    if (visit) visit(name, node.arguments, scope, params);\n  }); // perform code generation\n\n  var gen = codeGenerator(ast); // collect signal dependencies\n\n  gen.globals.forEach(function (name) {\n    var signalName = SignalPrefix + name;\n    if (!hasOwnProperty(params, signalName) && scope.getSignal(name)) {\n      params[signalName] = scope.signalRef(name);\n    }\n  }); // return generated expression code and dependencies\n\n  return {\n    $expr: extend({\n      code: gen.code\n    }, scope.options.ast ? {\n      ast: ast\n    } : null),\n    $fields: gen.fields,\n    $params: params\n  };\n}\nexport { DataPrefix, IndexPrefix, ScalePrefix, SignalPrefix, bandspace, bandwidth, codeGenerator, codegenParams, containerSize, contrast, copy, data, dataVisitor, dayAbbrevFormat, dayFormat, debug, domain, encode, expressionFunction, format, functionContext, geoArea, geoBounds, geoCentroid, geoShape, inScope, indata, indataVisitor, indexof, info, invert, join, lastindexof, luminance, merge, modify, monthAbbrevFormat, monthFormat, parser as parseExpression, pathShape, pinchAngle, pinchDistance, pluck, range, replace, reverse, scale, scaleGradient, scaleVisitor, screen, setdata, slice, timeFormat, timeParse, treeAncestors, treePath, utcFormat, utcParse, warn, windowSize };","map":{"version":3,"names":["truthy","error","hasOwnProperty","isFunction","isString","stringValue","extend","isArray","isObject","field","peek","identity","array","array$1","isBoolean","isDate","isNumber","isRegExp","toBoolean","toDate","toNumber","toString","flush","lerp","pad","span","inrange","truncate","quarter","utcquarter","extent","clampRange","panLinear","panLog","panPow","panSymlog","zoomLinear","zoomLog","zoomPow","zoomSymlog","Literal","codegenExpression","constants","functions","parseExpression","CallExpression","geoBounds","geoBounds$1","geoCentroid","geoCentroid$1","geoArea","geoArea$1","rgb","lab","hcl","hsl","isTuple","bandSpace","scale","scale$1","scaleFraction","Gradient","pathRender","pathParse","Bounds","intersect","intersect$1","selectionVisitor","selectionTest","selectionIdTest","selectionResolve","selectionTuples","random","cumulativeNormal","cumulativeLogNormal","cumulativeUniform","densityNormal","densityLogNormal","densityUniform","quantileNormal","quantileLogNormal","quantileUniform","sampleNormal","sampleLogNormal","sampleUniform","utcOffset","utcSequence","timeOffset","timeSequence","timeUnitSpecifier","week","utcweek","dayofyear","utcdayofyear","range","range$1","data","name","context","values","value","indata","index","entry","get","undefined","count","setdata","tuples","df","dataflow","input","pulse","changeset","remove","insert","encode","item","retval","target","mark","source","wrap","method","spec","locale","format","timeFormat","utcFormat","timeParse","utcParse","dateObj","Date","time","month","day","specifier","Number","isInteger","setYear","setMonth","setDate","call","monthFormat","monthAbbrevFormat","dayFormat","dayAbbrevFormat","DataPrefix","IndexPrefix","ScalePrefix","SignalPrefix","dataVisitor","args","scope","params","type","dataName","getData","tuplesRef","err","indataVisitor","indexName","indataRef","scaleVisitor","addScaleDependency","scales","scaleName","scaleRef","getScale","ctx","s","internalScaleFunctions","codegen","fnctx","visitors","__bandwidth","bandwidth","_bandwidth","_range","_scale","ref","arg","concat","geoMethod","methodName","globalMethod","projection","geojson","group","p","path","inScope","log","apply","slice","warn","length","arguments","info","debug","channel_luminance_value","channelValue","val","Math","pow","luminance","color","c","r","g","b","contrast","color1","color2","lum1","lum2","lumL","max","lumD","min","merge","unshift","equal","a","equalArray","equalObject","i","n","key","removePredicate","props","_","modify","toggle","stamp","changes","predicate","_trigger","runAfter","modified","run","some","pinchDistance","event","t","touches","dx","clientX","dy","clientY","sqrt","pinchAngle","atan2","accessors","pluck","accessor","map","seq","ArrayBuffer","isView","sequence","join","_len","Array","_key","indexof","_len2","_key2","indexOf","lastindexof","_len3","_key3","lastIndexOf","_len4","_key4","replace","str","pattern","repl","String","reverse","bandspace","paddingInner","paddingOuter","copy","domain","invert","invertRange","invertExtent","scaleGradient","p0","p1","gradient","stops","fraction","interpolator","interpolate","ticks","push","forEach","stop","geoShape","pathShape","datum","d","treeNodes","tree","root","lookup","treePath","nodes","treeAncestors","node","ancestors","_window","window","screen","w","windowSize","innerWidth","innerHeight","containerSize","view","el","container","clientWidth","clientHeight","opt","u","v","box","set","scene","scenegraph","filter","types","marktype","names","markname","lassoAppend","lasso","x","y","minDist","last","lassoPath","reduce","svg","_ref","intersectLasso","pixelLasso","unit","bb","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","px","py","x1","x2","y1","y2","translate","intersection","tuple","pointInPolygon","testx","testy","polygon","intersections","j","prevX","prevY","functionContext","isDefined","isValid","eventFunctions","eventPrefix","thisPrefix","astVisitors","codegenParams","forbidden","allowed","fieldvar","globalvar","id","buildFunctions","codeGenerator","fn","expressionFunction","visitor","parser","expr","ast","visit","callee","gen","globals","signalName","getSignal","signalRef","$expr","code","options","$fields","fields","$params"],"sources":["/Users/weihangzhang/Documents/webpage/gosling-react/node_modules/vega-functions/build/vega-functions.module.js"],"sourcesContent":["import { truthy, error, hasOwnProperty, isFunction, isString, stringValue, extend, isArray, isObject, field, peek, identity, array as array$1, isBoolean, isDate, isNumber, isRegExp, toBoolean, toDate, toNumber, toString, flush, lerp, pad, span, inrange, truncate, quarter, utcquarter, extent, clampRange, panLinear, panLog, panPow, panSymlog, zoomLinear, zoomLog, zoomPow, zoomSymlog } from 'vega-util';\nimport { Literal, codegenExpression, constants, functions, parseExpression, CallExpression } from 'vega-expression';\nimport { geoBounds as geoBounds$1, geoCentroid as geoCentroid$1, geoArea as geoArea$1 } from 'd3-geo';\nimport { rgb, lab, hcl, hsl } from 'd3-color';\nimport { isTuple } from 'vega-dataflow';\nimport { bandSpace, scale as scale$1, scaleFraction } from 'vega-scale';\nimport { Gradient, pathRender, pathParse, Bounds, intersect as intersect$1 } from 'vega-scenegraph';\nimport { selectionVisitor, selectionTest, selectionIdTest, selectionResolve, selectionTuples } from 'vega-selections';\nimport { random, cumulativeNormal, cumulativeLogNormal, cumulativeUniform, densityNormal, densityLogNormal, densityUniform, quantileNormal, quantileLogNormal, quantileUniform, sampleNormal, sampleLogNormal, sampleUniform } from 'vega-statistics';\nimport { utcOffset, utcSequence, timeOffset, timeSequence, timeUnitSpecifier, week, utcweek, dayofyear, utcdayofyear } from 'vega-time';\nimport { range as range$1 } from 'd3-array';\n\nfunction data(name) {\n  const data = this.context.data[name];\n  return data ? data.values.value : [];\n}\nfunction indata(name, field, value) {\n  const index = this.context.data[name]['index:' + field],\n        entry = index ? index.value.get(value) : undefined;\n  return entry ? entry.count : entry;\n}\nfunction setdata(name, tuples) {\n  const df = this.context.dataflow,\n        data = this.context.data[name],\n        input = data.input;\n  df.pulse(input, df.changeset().remove(truthy).insert(tuples));\n  return 1;\n}\n\nfunction encode (item, name, retval) {\n  if (item) {\n    const df = this.context.dataflow,\n          target = item.mark.source;\n    df.pulse(target, df.changeset().encode(item, name));\n  }\n\n  return retval !== undefined ? retval : item;\n}\n\nconst wrap = method => function (value, spec) {\n  const locale = this.context.dataflow.locale();\n  return locale[method](spec)(value);\n};\n\nconst format = wrap('format');\nconst timeFormat = wrap('timeFormat');\nconst utcFormat = wrap('utcFormat');\nconst timeParse = wrap('timeParse');\nconst utcParse = wrap('utcParse');\nconst dateObj = new Date(2000, 0, 1);\n\nfunction time(month, day, specifier) {\n  if (!Number.isInteger(month) || !Number.isInteger(day)) return '';\n  dateObj.setYear(2000);\n  dateObj.setMonth(month);\n  dateObj.setDate(day);\n  return timeFormat.call(this, dateObj, specifier);\n}\n\nfunction monthFormat(month) {\n  return time.call(this, month, 1, '%B');\n}\nfunction monthAbbrevFormat(month) {\n  return time.call(this, month, 1, '%b');\n}\nfunction dayFormat(day) {\n  return time.call(this, 0, 2 + day, '%A');\n}\nfunction dayAbbrevFormat(day) {\n  return time.call(this, 0, 2 + day, '%a');\n}\n\nconst DataPrefix = ':';\nconst IndexPrefix = '@';\nconst ScalePrefix = '%';\nconst SignalPrefix = '$';\n\nfunction dataVisitor(name, args, scope, params) {\n  if (args[0].type !== Literal) {\n    error('First argument to data functions must be a string literal.');\n  }\n\n  const data = args[0].value,\n        dataName = DataPrefix + data;\n\n  if (!hasOwnProperty(dataName, params)) {\n    try {\n      params[dataName] = scope.getData(data).tuplesRef();\n    } catch (err) {// if data set does not exist, there's nothing to track\n    }\n  }\n}\nfunction indataVisitor(name, args, scope, params) {\n  if (args[0].type !== Literal) error('First argument to indata must be a string literal.');\n  if (args[1].type !== Literal) error('Second argument to indata must be a string literal.');\n  const data = args[0].value,\n        field = args[1].value,\n        indexName = IndexPrefix + field;\n\n  if (!hasOwnProperty(indexName, params)) {\n    params[indexName] = scope.getData(data).indataRef(scope, field);\n  }\n}\nfunction scaleVisitor(name, args, scope, params) {\n  if (args[0].type === Literal) {\n    // add scale dependency\n    addScaleDependency(scope, params, args[0].value);\n  } else {\n    // indirect scale lookup; add all scales as parameters\n    for (name in scope.scales) {\n      addScaleDependency(scope, params, name);\n    }\n  }\n}\n\nfunction addScaleDependency(scope, params, name) {\n  const scaleName = ScalePrefix + name;\n\n  if (!hasOwnProperty(params, scaleName)) {\n    try {\n      params[scaleName] = scope.scaleRef(name);\n    } catch (err) {// TODO: error handling? warning?\n    }\n  }\n}\n\nfunction getScale(name, ctx) {\n  let s;\n  return isFunction(name) ? name : isString(name) ? (s = ctx.scales[name]) && s.value : undefined;\n}\nfunction internalScaleFunctions(codegen, fnctx, visitors) {\n  // add helper method to the 'this' expression function context\n  fnctx.__bandwidth = s => s && s.bandwidth ? s.bandwidth() : 0; // register AST visitors for internal scale functions\n\n\n  visitors._bandwidth = scaleVisitor;\n  visitors._range = scaleVisitor;\n  visitors._scale = scaleVisitor; // resolve scale reference directly to the signal hash argument\n\n  const ref = arg => '_[' + (arg.type === Literal ? stringValue(ScalePrefix + arg.value) : stringValue(ScalePrefix) + '+' + codegen(arg)) + ']'; // define and return internal scale function code generators\n  // these internal functions are called by mark encoders\n\n\n  return {\n    _bandwidth: args => \"this.__bandwidth(\".concat(ref(args[0]), \")\"),\n    _range: args => \"\".concat(ref(args[0]), \".range()\"),\n    _scale: args => \"\".concat(ref(args[0]), \"(\").concat(codegen(args[1]), \")\")\n  };\n}\n\nfunction geoMethod(methodName, globalMethod) {\n  return function (projection, geojson, group) {\n    if (projection) {\n      // projection defined, use it\n      const p = getScale(projection, (group || this).context);\n      return p && p.path[methodName](geojson);\n    } else {\n      // projection undefined, use global method\n      return globalMethod(geojson);\n    }\n  };\n}\n\nconst geoArea = geoMethod('area', geoArea$1);\nconst geoBounds = geoMethod('bounds', geoBounds$1);\nconst geoCentroid = geoMethod('centroid', geoCentroid$1);\n\nfunction inScope (item) {\n  const group = this.context.group;\n  let value = false;\n  if (group) while (item) {\n    if (item === group) {\n      value = true;\n      break;\n    }\n\n    item = item.mark.group;\n  }\n  return value;\n}\n\nfunction log(df, method, args) {\n  try {\n    df[method].apply(df, ['EXPRESSION'].concat([].slice.call(args)));\n  } catch (err) {\n    df.warn(err);\n  }\n\n  return args[args.length - 1];\n}\n\nfunction warn() {\n  return log(this.context.dataflow, 'warn', arguments);\n}\nfunction info() {\n  return log(this.context.dataflow, 'info', arguments);\n}\nfunction debug() {\n  return log(this.context.dataflow, 'debug', arguments);\n}\n\nfunction channel_luminance_value(channelValue) {\n  const val = channelValue / 255;\n\n  if (val <= 0.03928) {\n    return val / 12.92;\n  }\n\n  return Math.pow((val + 0.055) / 1.055, 2.4);\n}\n\nfunction luminance(color) {\n  const c = rgb(color),\n        r = channel_luminance_value(c.r),\n        g = channel_luminance_value(c.g),\n        b = channel_luminance_value(c.b);\n  return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n} // https://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef\n\nfunction contrast(color1, color2) {\n  const lum1 = luminance(color1),\n        lum2 = luminance(color2),\n        lumL = Math.max(lum1, lum2),\n        lumD = Math.min(lum1, lum2);\n  return (lumL + 0.05) / (lumD + 0.05);\n}\n\nfunction merge () {\n  const args = [].slice.call(arguments);\n  args.unshift({});\n  return extend(...args);\n}\n\nfunction equal(a, b) {\n  return a === b || a !== a && b !== b ? true : isArray(a) ? isArray(b) && a.length === b.length ? equalArray(a, b) : false : isObject(a) && isObject(b) ? equalObject(a, b) : false;\n}\n\nfunction equalArray(a, b) {\n  for (let i = 0, n = a.length; i < n; ++i) {\n    if (!equal(a[i], b[i])) return false;\n  }\n\n  return true;\n}\n\nfunction equalObject(a, b) {\n  for (const key in a) {\n    if (!equal(a[key], b[key])) return false;\n  }\n\n  return true;\n}\n\nfunction removePredicate(props) {\n  return _ => equalObject(props, _);\n}\n\nfunction modify (name, insert, remove, toggle, modify, values) {\n  const df = this.context.dataflow,\n        data = this.context.data[name],\n        input = data.input,\n        stamp = df.stamp();\n  let changes = data.changes,\n      predicate,\n      key;\n\n  if (df._trigger === false || !(input.value.length || insert || toggle)) {\n    // nothing to do!\n    return 0;\n  }\n\n  if (!changes || changes.stamp < stamp) {\n    data.changes = changes = df.changeset();\n    changes.stamp = stamp;\n    df.runAfter(() => {\n      data.modified = true;\n      df.pulse(input, changes).run();\n    }, true, 1);\n  }\n\n  if (remove) {\n    predicate = remove === true ? truthy : isArray(remove) || isTuple(remove) ? remove : removePredicate(remove);\n    changes.remove(predicate);\n  }\n\n  if (insert) {\n    changes.insert(insert);\n  }\n\n  if (toggle) {\n    predicate = removePredicate(toggle);\n\n    if (input.value.some(predicate)) {\n      changes.remove(predicate);\n    } else {\n      changes.insert(toggle);\n    }\n  }\n\n  if (modify) {\n    for (key in values) {\n      changes.modify(modify, key, values[key]);\n    }\n  }\n\n  return 1;\n}\n\nfunction pinchDistance(event) {\n  const t = event.touches,\n        dx = t[0].clientX - t[1].clientX,\n        dy = t[0].clientY - t[1].clientY;\n  return Math.sqrt(dx * dx + dy * dy);\n}\nfunction pinchAngle(event) {\n  const t = event.touches;\n  return Math.atan2(t[0].clientY - t[1].clientY, t[0].clientX - t[1].clientX);\n}\n\nconst accessors = {};\nfunction pluck (data, name) {\n  const accessor = accessors[name] || (accessors[name] = field(name));\n  return isArray(data) ? data.map(accessor) : accessor(data);\n}\n\nfunction array(seq) {\n  return isArray(seq) || ArrayBuffer.isView(seq) ? seq : null;\n}\n\nfunction sequence(seq) {\n  return array(seq) || (isString(seq) ? seq : null);\n}\n\nfunction join(seq) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n\n  return array(seq).join(...args);\n}\nfunction indexof(seq) {\n  for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    args[_key2 - 1] = arguments[_key2];\n  }\n\n  return sequence(seq).indexOf(...args);\n}\nfunction lastindexof(seq) {\n  for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n    args[_key3 - 1] = arguments[_key3];\n  }\n\n  return sequence(seq).lastIndexOf(...args);\n}\nfunction slice(seq) {\n  for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n    args[_key4 - 1] = arguments[_key4];\n  }\n\n  return sequence(seq).slice(...args);\n}\nfunction replace(str, pattern, repl) {\n  if (isFunction(repl)) error('Function argument passed to replace.');\n  return String(str).replace(pattern, repl);\n}\nfunction reverse(seq) {\n  return array(seq).slice().reverse();\n}\n\nfunction bandspace(count, paddingInner, paddingOuter) {\n  return bandSpace(count || 0, paddingInner || 0, paddingOuter || 0);\n}\nfunction bandwidth(name, group) {\n  const s = getScale(name, (group || this).context);\n  return s && s.bandwidth ? s.bandwidth() : 0;\n}\nfunction copy(name, group) {\n  const s = getScale(name, (group || this).context);\n  return s ? s.copy() : undefined;\n}\nfunction domain(name, group) {\n  const s = getScale(name, (group || this).context);\n  return s ? s.domain() : [];\n}\nfunction invert(name, range, group) {\n  const s = getScale(name, (group || this).context);\n  return !s ? undefined : isArray(range) ? (s.invertRange || s.invert)(range) : (s.invert || s.invertExtent)(range);\n}\nfunction range(name, group) {\n  const s = getScale(name, (group || this).context);\n  return s && s.range ? s.range() : [];\n}\nfunction scale(name, value, group) {\n  const s = getScale(name, (group || this).context);\n  return s ? s(value) : undefined;\n}\n\nfunction scaleGradient (scale, p0, p1, count, group) {\n  scale = getScale(scale, (group || this).context);\n  const gradient = Gradient(p0, p1);\n  let stops = scale.domain(),\n      min = stops[0],\n      max = peek(stops),\n      fraction = identity;\n\n  if (!(max - min)) {\n    // expand scale if domain has zero span, fix #1479\n    scale = (scale.interpolator ? scale$1('sequential')().interpolator(scale.interpolator()) : scale$1('linear')().interpolate(scale.interpolate()).range(scale.range())).domain([min = 0, max = 1]);\n  } else {\n    fraction = scaleFraction(scale, min, max);\n  }\n\n  if (scale.ticks) {\n    stops = scale.ticks(+count || 15);\n    if (min !== stops[0]) stops.unshift(min);\n    if (max !== peek(stops)) stops.push(max);\n  }\n\n  stops.forEach(_ => gradient.stop(fraction(_), scale(_)));\n  return gradient;\n}\n\nfunction geoShape(projection, geojson, group) {\n  const p = getScale(projection, (group || this).context);\n  return function (context) {\n    return p ? p.path.context(context)(geojson) : '';\n  };\n}\nfunction pathShape(path) {\n  let p = null;\n  return function (context) {\n    return context ? pathRender(context, p = p || pathParse(path)) : path;\n  };\n}\n\nconst datum = d => d.data;\n\nfunction treeNodes(name, context) {\n  const tree = data.call(context, name);\n  return tree.root && tree.root.lookup || {};\n}\n\nfunction treePath(name, source, target) {\n  const nodes = treeNodes(name, this),\n        s = nodes[source],\n        t = nodes[target];\n  return s && t ? s.path(t).map(datum) : undefined;\n}\nfunction treeAncestors(name, node) {\n  const n = treeNodes(name, this)[node];\n  return n ? n.ancestors().map(datum) : undefined;\n}\n\nconst _window = () => typeof window !== 'undefined' && window || null;\n\nfunction screen() {\n  const w = _window();\n\n  return w ? w.screen : {};\n}\nfunction windowSize() {\n  const w = _window();\n\n  return w ? [w.innerWidth, w.innerHeight] : [undefined, undefined];\n}\nfunction containerSize() {\n  const view = this.context.dataflow,\n        el = view.container && view.container();\n  return el ? [el.clientWidth, el.clientHeight] : [undefined, undefined];\n}\n\nfunction intersect (b, opt, group) {\n  if (!b) return [];\n  const [u, v] = b,\n        box = new Bounds().set(u[0], u[1], v[0], v[1]),\n        scene = group || this.context.dataflow.scenegraph().root;\n  return intersect$1(scene, box, filter(opt));\n}\n\nfunction filter(opt) {\n  let p = null;\n\n  if (opt) {\n    const types = array$1(opt.marktype),\n          names = array$1(opt.markname);\n\n    p = _ => (!types.length || types.some(t => _.marktype === t)) && (!names.length || names.some(s => _.name === s));\n  }\n\n  return p;\n}\n\n/**\n * Appends a new point to the lasso\n * \n * @param {*} lasso the lasso in pixel space\n * @param {*} x the x coordinate in pixel space\n * @param {*} y the y coordinate in pixel space\n * @param {*} minDist the minimum distance, in pixels, that thenew point needs to be apart from the last point\n * @returns a new array containing the lasso with the new point\n */\n\nfunction lassoAppend(lasso, x, y) {\n  let minDist = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 5;\n  const last = lasso[lasso.length - 1]; // Add point to lasso if distance to last point exceed minDist or its the first point\n\n  if (last === undefined || Math.sqrt((last[0] - x) ** 2 + (last[1] - y) ** 2) > minDist) {\n    lasso.push([x, y]);\n    return [...lasso];\n  }\n\n  return lasso;\n}\n/**\n * Generates a svg path command which draws a lasso\n * \n * @param {*} lasso the lasso in pixel space in the form [[x,y], [x,y], ...]\n * @returns the svg path command that draws the lasso\n */\n\nfunction lassoPath(lasso) {\n  return (lasso !== null && lasso !== void 0 ? lasso : []).reduce((svg, _ref, i) => {\n    let [x, y] = _ref;\n    return svg += i == 0 ? \"M \".concat(x, \",\").concat(y, \" \") : i === lasso.length - 1 ? ' Z' : \"L \".concat(x, \",\").concat(y, \" \");\n  }, '');\n}\n/**\n * Inverts the lasso from pixel space to an array of vega scenegraph tuples\n * \n * @param {*} data the dataset\n * @param {*} pixelLasso the lasso in pixel space, [[x,y], [x,y], ...]\n * @param {*} unit the unit where the lasso is defined\n * \n * @returns an array of vega scenegraph tuples\n */\n\nfunction intersectLasso(markname, pixelLasso, unit) {\n  const {\n    x,\n    y,\n    mark\n  } = unit;\n  const bb = new Bounds().set(Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER, Number.MIN_SAFE_INTEGER, Number.MIN_SAFE_INTEGER); // Get bounding box around lasso\n\n  for (const [px, py] of pixelLasso) {\n    if (px < bb.x1) bb.x1 = px;\n    if (px > bb.x2) bb.x2 = px;\n    if (py < bb.y1) bb.y1 = py;\n    if (py > bb.y2) bb.y2 = py;\n  } // Translate bb against unit coordinates\n\n\n  bb.translate(x, y);\n  const intersection = intersect([[bb.x1, bb.y1], [bb.x2, bb.y2]], markname, mark); // Check every point against the lasso\n\n  return intersection.filter(tuple => pointInPolygon(tuple.x, tuple.y, pixelLasso));\n}\n/**\n * Performs a test if a point is inside a polygon based on the idea from\n * https://wrf.ecse.rpi.edu/Research/Short_Notes/pnpoly.html\n * \n * This method will not need the same start/end point since it wraps around the edges of the array\n * \n * @param {*} test a point to test against\n * @param {*} polygon a polygon in the form [[x,y], [x,y], ...]\n * @returns true if the point lies inside the polygon, false otherwise\n */\n\nfunction pointInPolygon(testx, testy, polygon) {\n  let intersections = 0;\n\n  for (let i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {\n    const [prevX, prevY] = polygon[j];\n    const [x, y] = polygon[i]; // count intersections\n\n    if (y > testy != prevY > testy && testx < (prevX - x) * (testy - y) / (prevY - y) + x) {\n      intersections++;\n    }\n  } // point is in polygon if intersection count is odd\n\n\n  return intersections & 1;\n}\n\nconst functionContext = {\n  random() {\n    return random();\n  },\n\n  // override default\n  cumulativeNormal,\n  cumulativeLogNormal,\n  cumulativeUniform,\n  densityNormal,\n  densityLogNormal,\n  densityUniform,\n  quantileNormal,\n  quantileLogNormal,\n  quantileUniform,\n  sampleNormal,\n  sampleLogNormal,\n  sampleUniform,\n  isArray,\n  isBoolean,\n  isDate,\n\n  isDefined(_) {\n    return _ !== undefined;\n  },\n\n  isNumber,\n  isObject,\n  isRegExp,\n  isString,\n  isTuple,\n\n  isValid(_) {\n    return _ != null && _ === _;\n  },\n\n  toBoolean,\n\n  toDate(_) {\n    return toDate(_);\n  },\n\n  // suppress extra arguments\n  toNumber,\n  toString,\n  indexof,\n  join,\n  lastindexof,\n  replace,\n  reverse,\n  slice,\n  flush,\n  lerp,\n  merge,\n  pad,\n  peek,\n  pluck,\n  span,\n  inrange,\n  truncate,\n  rgb,\n  lab,\n  hcl,\n  hsl,\n  luminance,\n  contrast,\n  sequence: range$1,\n  format,\n  utcFormat,\n  utcParse,\n  utcOffset,\n  utcSequence,\n  timeFormat,\n  timeParse,\n  timeOffset,\n  timeSequence,\n  timeUnitSpecifier,\n  monthFormat,\n  monthAbbrevFormat,\n  dayFormat,\n  dayAbbrevFormat,\n  quarter,\n  utcquarter,\n  week,\n  utcweek,\n  dayofyear,\n  utcdayofyear,\n  warn,\n  info,\n  debug,\n\n  extent(_) {\n    return extent(_);\n  },\n\n  // suppress extra arguments\n  inScope,\n  intersect,\n  clampRange,\n  pinchDistance,\n  pinchAngle,\n  screen,\n  containerSize,\n  windowSize,\n  bandspace,\n  setdata,\n  pathShape,\n  panLinear,\n  panLog,\n  panPow,\n  panSymlog,\n  zoomLinear,\n  zoomLog,\n  zoomPow,\n  zoomSymlog,\n  encode,\n  modify,\n  lassoAppend,\n  lassoPath,\n  intersectLasso\n};\nconst eventFunctions = ['view', 'item', 'group', 'xy', 'x', 'y'],\n      // event functions\neventPrefix = 'event.vega.',\n      // event function prefix\nthisPrefix = 'this.',\n      // function context prefix\nastVisitors = {}; // AST visitors for dependency analysis\n// export code generator parameters\n\nconst codegenParams = {\n  forbidden: ['_'],\n  allowed: ['datum', 'event', 'item'],\n  fieldvar: 'datum',\n  globalvar: id => \"_[\".concat(stringValue(SignalPrefix + id), \"]\"),\n  functions: buildFunctions,\n  constants: constants,\n  visitors: astVisitors\n}; // export code generator\n\nconst codeGenerator = codegenExpression(codegenParams); // Build expression function registry\n\nfunction buildFunctions(codegen) {\n  const fn = functions(codegen);\n  eventFunctions.forEach(name => fn[name] = eventPrefix + name);\n\n  for (const name in functionContext) {\n    fn[name] = thisPrefix + name;\n  }\n\n  extend(fn, internalScaleFunctions(codegen, functionContext, astVisitors));\n  return fn;\n} // Register an expression function\n\n\nfunction expressionFunction(name, fn, visitor) {\n  if (arguments.length === 1) {\n    return functionContext[name];\n  } // register with the functionContext\n\n\n  functionContext[name] = fn; // if there is an astVisitor register that, too\n\n  if (visitor) astVisitors[name] = visitor; // if the code generator has already been initialized,\n  // we need to also register the function with it\n\n  if (codeGenerator) codeGenerator.functions[name] = thisPrefix + name;\n  return this;\n} // register expression functions with ast visitors\n\nexpressionFunction('bandwidth', bandwidth, scaleVisitor);\nexpressionFunction('copy', copy, scaleVisitor);\nexpressionFunction('domain', domain, scaleVisitor);\nexpressionFunction('range', range, scaleVisitor);\nexpressionFunction('invert', invert, scaleVisitor);\nexpressionFunction('scale', scale, scaleVisitor);\nexpressionFunction('gradient', scaleGradient, scaleVisitor);\nexpressionFunction('geoArea', geoArea, scaleVisitor);\nexpressionFunction('geoBounds', geoBounds, scaleVisitor);\nexpressionFunction('geoCentroid', geoCentroid, scaleVisitor);\nexpressionFunction('geoShape', geoShape, scaleVisitor);\nexpressionFunction('indata', indata, indataVisitor);\nexpressionFunction('data', data, dataVisitor);\nexpressionFunction('treePath', treePath, dataVisitor);\nexpressionFunction('treeAncestors', treeAncestors, dataVisitor); // register Vega-Lite selection functions\n\nexpressionFunction('vlSelectionTest', selectionTest, selectionVisitor);\nexpressionFunction('vlSelectionIdTest', selectionIdTest, selectionVisitor);\nexpressionFunction('vlSelectionResolve', selectionResolve, selectionVisitor);\nexpressionFunction('vlSelectionTuples', selectionTuples);\n\nfunction parser (expr, scope) {\n  const params = {}; // parse the expression to an abstract syntax tree (ast)\n\n  let ast;\n\n  try {\n    expr = isString(expr) ? expr : stringValue(expr) + '';\n    ast = parseExpression(expr);\n  } catch (err) {\n    error('Expression parse error: ' + expr);\n  } // analyze ast function calls for dependencies\n\n\n  ast.visit(node => {\n    if (node.type !== CallExpression) return;\n    const name = node.callee.name,\n          visit = codegenParams.visitors[name];\n    if (visit) visit(name, node.arguments, scope, params);\n  }); // perform code generation\n\n  const gen = codeGenerator(ast); // collect signal dependencies\n\n  gen.globals.forEach(name => {\n    const signalName = SignalPrefix + name;\n\n    if (!hasOwnProperty(params, signalName) && scope.getSignal(name)) {\n      params[signalName] = scope.signalRef(name);\n    }\n  }); // return generated expression code and dependencies\n\n  return {\n    $expr: extend({\n      code: gen.code\n    }, scope.options.ast ? {\n      ast\n    } : null),\n    $fields: gen.fields,\n    $params: params\n  };\n}\n\nexport { DataPrefix, IndexPrefix, ScalePrefix, SignalPrefix, bandspace, bandwidth, codeGenerator, codegenParams, containerSize, contrast, copy, data, dataVisitor, dayAbbrevFormat, dayFormat, debug, domain, encode, expressionFunction, format, functionContext, geoArea, geoBounds, geoCentroid, geoShape, inScope, indata, indataVisitor, indexof, info, invert, join, lastindexof, luminance, merge, modify, monthAbbrevFormat, monthFormat, parser as parseExpression, pathShape, pinchAngle, pinchDistance, pluck, range, replace, reverse, scale, scaleGradient, scaleVisitor, screen, setdata, slice, timeFormat, timeParse, treeAncestors, treePath, utcFormat, utcParse, warn, windowSize };\n"],"mappings":";;;AAAA,SAASA,MAAM,EAAEC,KAAK,EAAEC,cAAc,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,WAAW,EAAEC,MAAM,EAAEC,OAAO,EAAEC,QAAQ,EAAEC,KAAK,EAAEC,IAAI,EAAEC,QAAQ,EAAEC,KAAK,IAAIC,OAAO,EAAEC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,IAANA,OAAM,EAAEC,QAAQ,EAAEC,QAAQ,EAAEC,KAAK,EAAEC,IAAI,EAAEC,GAAG,EAAEC,IAAI,EAAEC,OAAO,EAAEC,QAAQ,EAAEC,OAAO,EAAEC,UAAU,EAAEC,MAAM,IAANA,OAAM,EAAEC,UAAU,EAAEC,SAAS,EAAEC,MAAM,EAAEC,MAAM,EAAEC,SAAS,EAAEC,UAAU,EAAEC,OAAO,EAAEC,OAAO,EAAEC,UAAU,QAAQ,WAAW;AAClZ,SAASC,OAAO,EAAEC,iBAAiB,EAAEC,SAAS,EAAEC,SAAS,EAAEC,eAAe,EAAEC,cAAc,QAAQ,iBAAiB;AACnH,SAASC,SAAS,IAAIC,WAAW,EAAEC,WAAW,IAAIC,aAAa,EAAEC,OAAO,IAAIC,SAAS,QAAQ,QAAQ;AACrG,SAASC,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAEC,GAAG,QAAQ,UAAU;AAC7C,SAASC,OAAO,QAAQ,eAAe;AACvC,SAASC,SAAS,EAAEC,KAAK,IAAIC,OAAO,EAAEC,aAAa,QAAQ,YAAY;AACvE,SAASC,QAAQ,EAAEC,UAAU,EAAEC,SAAS,EAAEC,MAAM,EAAEC,SAAS,IAAIC,WAAW,QAAQ,iBAAiB;AACnG,SAASC,gBAAgB,EAAEC,aAAa,EAAEC,eAAe,EAAEC,gBAAgB,EAAEC,eAAe,QAAQ,iBAAiB;AACrH,SAASC,MAAM,IAANA,OAAM,EAAEC,gBAAgB,EAAEC,mBAAmB,EAAEC,iBAAiB,EAAEC,aAAa,EAAEC,gBAAgB,EAAEC,cAAc,EAAEC,cAAc,EAAEC,iBAAiB,EAAEC,eAAe,EAAEC,YAAY,EAAEC,eAAe,EAAEC,aAAa,QAAQ,iBAAiB;AACrP,SAASC,SAAS,EAAEC,WAAW,EAAEC,UAAU,EAAEC,YAAY,EAAEC,iBAAiB,EAAEC,IAAI,EAAEC,OAAO,EAAEC,SAAS,EAAEC,YAAY,QAAQ,WAAW;AACvI,SAASC,KAAK,IAAIC,OAAO,QAAQ,UAAU;AAE3C,SAASC,IAAI,CAACC,IAAI,EAAE;EAClB,IAAMD,IAAI,GAAG,IAAI,CAACE,OAAO,CAACF,IAAI,CAACC,IAAI,CAAC;EACpC,OAAOD,IAAI,GAAGA,IAAI,CAACG,MAAM,CAACC,KAAK,GAAG,EAAE;AACtC;AACA,SAASC,MAAM,CAACJ,IAAI,EAAExF,KAAK,EAAE2F,KAAK,EAAE;EAClC,IAAME,KAAK,GAAG,IAAI,CAACJ,OAAO,CAACF,IAAI,CAACC,IAAI,CAAC,CAAC,QAAQ,GAAGxF,KAAK,CAAC;IACjD8F,KAAK,GAAGD,KAAK,GAAGA,KAAK,CAACF,KAAK,CAACI,GAAG,CAACJ,KAAK,CAAC,GAAGK,SAAS;EACxD,OAAOF,KAAK,GAAGA,KAAK,CAACG,KAAK,GAAGH,KAAK;AACpC;AACA,SAASI,OAAO,CAACV,IAAI,EAAEW,MAAM,EAAE;EAC7B,IAAMC,EAAE,GAAG,IAAI,CAACX,OAAO,CAACY,QAAQ;IAC1Bd,IAAI,GAAG,IAAI,CAACE,OAAO,CAACF,IAAI,CAACC,IAAI,CAAC;IAC9Bc,KAAK,GAAGf,IAAI,CAACe,KAAK;EACxBF,EAAE,CAACG,KAAK,CAACD,KAAK,EAAEF,EAAE,CAACI,SAAS,EAAE,CAACC,MAAM,CAAClH,MAAM,CAAC,CAACmH,MAAM,CAACP,MAAM,CAAC,CAAC;EAC7D,OAAO,CAAC;AACV;AAEA,SAASQ,MAAM,CAAEC,IAAI,EAAEpB,IAAI,EAAEqB,MAAM,EAAE;EACnC,IAAID,IAAI,EAAE;IACR,IAAMR,EAAE,GAAG,IAAI,CAACX,OAAO,CAACY,QAAQ;MAC1BS,MAAM,GAAGF,IAAI,CAACG,IAAI,CAACC,MAAM;IAC/BZ,EAAE,CAACG,KAAK,CAACO,MAAM,EAAEV,EAAE,CAACI,SAAS,EAAE,CAACG,MAAM,CAACC,IAAI,EAAEpB,IAAI,CAAC,CAAC;EACrD;EAEA,OAAOqB,MAAM,KAAKb,SAAS,GAAGa,MAAM,GAAGD,IAAI;AAC7C;AAEA,IAAMK,IAAI,GAAG,SAAPA,IAAI,CAAGC,MAAM;EAAA,OAAI,UAAUvB,KAAK,EAAEwB,IAAI,EAAE;IAC5C,IAAMC,MAAM,GAAG,IAAI,CAAC3B,OAAO,CAACY,QAAQ,CAACe,MAAM,EAAE;IAC7C,OAAOA,MAAM,CAACF,MAAM,CAAC,CAACC,IAAI,CAAC,CAACxB,KAAK,CAAC;EACpC,CAAC;AAAA;AAED,IAAM0B,MAAM,GAAGJ,IAAI,CAAC,QAAQ,CAAC;AAC7B,IAAMK,UAAU,GAAGL,IAAI,CAAC,YAAY,CAAC;AACrC,IAAMM,SAAS,GAAGN,IAAI,CAAC,WAAW,CAAC;AACnC,IAAMO,SAAS,GAAGP,IAAI,CAAC,WAAW,CAAC;AACnC,IAAMQ,QAAQ,GAAGR,IAAI,CAAC,UAAU,CAAC;AACjC,IAAMS,OAAO,GAAG,IAAIC,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;AAEpC,SAASC,IAAI,CAACC,KAAK,EAAEC,GAAG,EAAEC,SAAS,EAAE;EACnC,IAAI,CAACC,MAAM,CAACC,SAAS,CAACJ,KAAK,CAAC,IAAI,CAACG,MAAM,CAACC,SAAS,CAACH,GAAG,CAAC,EAAE,OAAO,EAAE;EACjEJ,OAAO,CAACQ,OAAO,CAAC,IAAI,CAAC;EACrBR,OAAO,CAACS,QAAQ,CAACN,KAAK,CAAC;EACvBH,OAAO,CAACU,OAAO,CAACN,GAAG,CAAC;EACpB,OAAOR,UAAU,CAACe,IAAI,CAAC,IAAI,EAAEX,OAAO,EAAEK,SAAS,CAAC;AAClD;AAEA,SAASO,WAAW,CAACT,KAAK,EAAE;EAC1B,OAAOD,IAAI,CAACS,IAAI,CAAC,IAAI,EAAER,KAAK,EAAE,CAAC,EAAE,IAAI,CAAC;AACxC;AACA,SAASU,iBAAiB,CAACV,KAAK,EAAE;EAChC,OAAOD,IAAI,CAACS,IAAI,CAAC,IAAI,EAAER,KAAK,EAAE,CAAC,EAAE,IAAI,CAAC;AACxC;AACA,SAASW,SAAS,CAACV,GAAG,EAAE;EACtB,OAAOF,IAAI,CAACS,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,GAAGP,GAAG,EAAE,IAAI,CAAC;AAC1C;AACA,SAASW,eAAe,CAACX,GAAG,EAAE;EAC5B,OAAOF,IAAI,CAACS,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,GAAGP,GAAG,EAAE,IAAI,CAAC;AAC1C;AAEA,IAAMY,UAAU,GAAG,GAAG;AACtB,IAAMC,WAAW,GAAG,GAAG;AACvB,IAAMC,WAAW,GAAG,GAAG;AACvB,IAAMC,YAAY,GAAG,GAAG;AAExB,SAASC,WAAW,CAACtD,IAAI,EAAEuD,IAAI,EAAEC,KAAK,EAAEC,MAAM,EAAE;EAC9C,IAAIF,IAAI,CAAC,CAAC,CAAC,CAACG,IAAI,KAAKnH,OAAO,EAAE;IAC5BvC,KAAK,CAAC,4DAA4D,CAAC;EACrE;EAEA,IAAM+F,IAAI,GAAGwD,IAAI,CAAC,CAAC,CAAC,CAACpD,KAAK;IACpBwD,QAAQ,GAAGT,UAAU,GAAGnD,IAAI;EAElC,IAAI,CAAC9F,cAAc,CAAC0J,QAAQ,EAAEF,MAAM,CAAC,EAAE;IACrC,IAAI;MACFA,MAAM,CAACE,QAAQ,CAAC,GAAGH,KAAK,CAACI,OAAO,CAAC7D,IAAI,CAAC,CAAC8D,SAAS,EAAE;IACpD,CAAC,CAAC,OAAOC,GAAG,EAAE,CAAC;IACf;EACF;AACF;AACA,SAASC,aAAa,CAAC/D,IAAI,EAAEuD,IAAI,EAAEC,KAAK,EAAEC,MAAM,EAAE;EAChD,IAAIF,IAAI,CAAC,CAAC,CAAC,CAACG,IAAI,KAAKnH,OAAO,EAAEvC,KAAK,CAAC,oDAAoD,CAAC;EACzF,IAAIuJ,IAAI,CAAC,CAAC,CAAC,CAACG,IAAI,KAAKnH,OAAO,EAAEvC,KAAK,CAAC,qDAAqD,CAAC;EAC1F,IAAM+F,IAAI,GAAGwD,IAAI,CAAC,CAAC,CAAC,CAACpD,KAAK;IACpB3F,KAAK,GAAG+I,IAAI,CAAC,CAAC,CAAC,CAACpD,KAAK;IACrB6D,SAAS,GAAGb,WAAW,GAAG3I,KAAK;EAErC,IAAI,CAACP,cAAc,CAAC+J,SAAS,EAAEP,MAAM,CAAC,EAAE;IACtCA,MAAM,CAACO,SAAS,CAAC,GAAGR,KAAK,CAACI,OAAO,CAAC7D,IAAI,CAAC,CAACkE,SAAS,CAACT,KAAK,EAAEhJ,KAAK,CAAC;EACjE;AACF;AACA,SAAS0J,YAAY,CAAClE,IAAI,EAAEuD,IAAI,EAAEC,KAAK,EAAEC,MAAM,EAAE;EAC/C,IAAIF,IAAI,CAAC,CAAC,CAAC,CAACG,IAAI,KAAKnH,OAAO,EAAE;IAC5B;IACA4H,kBAAkB,CAACX,KAAK,EAAEC,MAAM,EAAEF,IAAI,CAAC,CAAC,CAAC,CAACpD,KAAK,CAAC;EAClD,CAAC,MAAM;IACL;IACA,KAAKH,IAAI,IAAIwD,KAAK,CAACY,MAAM,EAAE;MACzBD,kBAAkB,CAACX,KAAK,EAAEC,MAAM,EAAEzD,IAAI,CAAC;IACzC;EACF;AACF;AAEA,SAASmE,kBAAkB,CAACX,KAAK,EAAEC,MAAM,EAAEzD,IAAI,EAAE;EAC/C,IAAMqE,SAAS,GAAGjB,WAAW,GAAGpD,IAAI;EAEpC,IAAI,CAAC/F,cAAc,CAACwJ,MAAM,EAAEY,SAAS,CAAC,EAAE;IACtC,IAAI;MACFZ,MAAM,CAACY,SAAS,CAAC,GAAGb,KAAK,CAACc,QAAQ,CAACtE,IAAI,CAAC;IAC1C,CAAC,CAAC,OAAO8D,GAAG,EAAE,CAAC;IACf;EACF;AACF;AAEA,SAASS,QAAQ,CAACvE,IAAI,EAAEwE,GAAG,EAAE;EAC3B,IAAIC,CAAC;EACL,OAAOvK,UAAU,CAAC8F,IAAI,CAAC,GAAGA,IAAI,GAAG7F,QAAQ,CAAC6F,IAAI,CAAC,GAAG,CAACyE,CAAC,GAAGD,GAAG,CAACJ,MAAM,CAACpE,IAAI,CAAC,KAAKyE,CAAC,CAACtE,KAAK,GAAGK,SAAS;AACjG;AACA,SAASkE,sBAAsB,CAACC,OAAO,EAAEC,KAAK,EAAEC,QAAQ,EAAE;EACxD;EACAD,KAAK,CAACE,WAAW,GAAG,UAAAL,CAAC;IAAA,OAAIA,CAAC,IAAIA,CAAC,CAACM,SAAS,GAAGN,CAAC,CAACM,SAAS,EAAE,GAAG,CAAC;EAAA,EAAC,CAAC;;EAG/DF,QAAQ,CAACG,UAAU,GAAGd,YAAY;EAClCW,QAAQ,CAACI,MAAM,GAAGf,YAAY;EAC9BW,QAAQ,CAACK,MAAM,GAAGhB,YAAY,CAAC,CAAC;;EAEhC,IAAMiB,GAAG,GAAG,SAANA,GAAG,CAAGC,GAAG;IAAA,OAAI,IAAI,IAAIA,GAAG,CAAC1B,IAAI,KAAKnH,OAAO,GAAGnC,WAAW,CAACgJ,WAAW,GAAGgC,GAAG,CAACjF,KAAK,CAAC,GAAG/F,WAAW,CAACgJ,WAAW,CAAC,GAAG,GAAG,GAAGuB,OAAO,CAACS,GAAG,CAAC,CAAC,GAAG,GAAG;EAAA,EAAC,CAAC;EAC/I;;EAGA,OAAO;IACLJ,UAAU,EAAE,oBAAAzB,IAAI;MAAA,OAAI,mBAAmB,CAAC8B,MAAM,CAACF,GAAG,CAAC5B,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC;IAAA;IACjE0B,MAAM,EAAE,gBAAA1B,IAAI;MAAA,OAAI,EAAE,CAAC8B,MAAM,CAACF,GAAG,CAAC5B,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,UAAU,CAAC;IAAA;IACnD2B,MAAM,EAAE,gBAAA3B,IAAI;MAAA,OAAI,EAAE,CAAC8B,MAAM,CAACF,GAAG,CAAC5B,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC8B,MAAM,CAACV,OAAO,CAACpB,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC;IAAA;EAC5E,CAAC;AACH;AAEA,SAAS+B,SAAS,CAACC,UAAU,EAAEC,YAAY,EAAE;EAC3C,OAAO,UAAUC,UAAU,EAAEC,OAAO,EAAEC,KAAK,EAAE;IAC3C,IAAIF,UAAU,EAAE;MACd;MACA,IAAMG,CAAC,GAAGrB,QAAQ,CAACkB,UAAU,EAAE,CAACE,KAAK,IAAI,IAAI,EAAE1F,OAAO,CAAC;MACvD,OAAO2F,CAAC,IAAIA,CAAC,CAACC,IAAI,CAACN,UAAU,CAAC,CAACG,OAAO,CAAC;IACzC,CAAC,MAAM;MACL;MACA,OAAOF,YAAY,CAACE,OAAO,CAAC;IAC9B;EACF,CAAC;AACH;AAEA,IAAMzI,OAAO,GAAGqI,SAAS,CAAC,MAAM,EAAEpI,SAAS,CAAC;AAC5C,IAAML,SAAS,GAAGyI,SAAS,CAAC,QAAQ,EAAExI,WAAW,CAAC;AAClD,IAAMC,WAAW,GAAGuI,SAAS,CAAC,UAAU,EAAEtI,aAAa,CAAC;AAExD,SAAS8I,OAAO,CAAE1E,IAAI,EAAE;EACtB,IAAMuE,KAAK,GAAG,IAAI,CAAC1F,OAAO,CAAC0F,KAAK;EAChC,IAAIxF,KAAK,GAAG,KAAK;EACjB,IAAIwF,KAAK,EAAE,OAAOvE,IAAI,EAAE;IACtB,IAAIA,IAAI,KAAKuE,KAAK,EAAE;MAClBxF,KAAK,GAAG,IAAI;MACZ;IACF;IAEAiB,IAAI,GAAGA,IAAI,CAACG,IAAI,CAACoE,KAAK;EACxB;EACA,OAAOxF,KAAK;AACd;AAEA,SAAS4F,GAAG,CAACnF,EAAE,EAAEc,MAAM,EAAE6B,IAAI,EAAE;EAC7B,IAAI;IACF3C,EAAE,CAACc,MAAM,CAAC,CAACsE,KAAK,CAACpF,EAAE,EAAE,CAAC,YAAY,CAAC,CAACyE,MAAM,CAAC,EAAE,CAACY,KAAK,CAACpD,IAAI,CAACU,IAAI,CAAC,CAAC,CAAC;EAClE,CAAC,CAAC,OAAOO,GAAG,EAAE;IACZlD,EAAE,CAACsF,IAAI,CAACpC,GAAG,CAAC;EACd;EAEA,OAAOP,IAAI,CAACA,IAAI,CAAC4C,MAAM,GAAG,CAAC,CAAC;AAC9B;AAEA,SAASD,IAAI,GAAG;EACd,OAAOH,GAAG,CAAC,IAAI,CAAC9F,OAAO,CAACY,QAAQ,EAAE,MAAM,EAAEuF,SAAS,CAAC;AACtD;AACA,SAASC,IAAI,GAAG;EACd,OAAON,GAAG,CAAC,IAAI,CAAC9F,OAAO,CAACY,QAAQ,EAAE,MAAM,EAAEuF,SAAS,CAAC;AACtD;AACA,SAASE,KAAK,GAAG;EACf,OAAOP,GAAG,CAAC,IAAI,CAAC9F,OAAO,CAACY,QAAQ,EAAE,OAAO,EAAEuF,SAAS,CAAC;AACvD;AAEA,SAASG,uBAAuB,CAACC,YAAY,EAAE;EAC7C,IAAMC,GAAG,GAAGD,YAAY,GAAG,GAAG;EAE9B,IAAIC,GAAG,IAAI,OAAO,EAAE;IAClB,OAAOA,GAAG,GAAG,KAAK;EACpB;EAEA,OAAOC,IAAI,CAACC,GAAG,CAAC,CAACF,GAAG,GAAG,KAAK,IAAI,KAAK,EAAE,GAAG,CAAC;AAC7C;AAEA,SAASG,SAAS,CAACC,KAAK,EAAE;EACxB,IAAMC,CAAC,GAAG3J,GAAG,CAAC0J,KAAK,CAAC;IACdE,CAAC,GAAGR,uBAAuB,CAACO,CAAC,CAACC,CAAC,CAAC;IAChCC,CAAC,GAAGT,uBAAuB,CAACO,CAAC,CAACE,CAAC,CAAC;IAChCC,CAAC,GAAGV,uBAAuB,CAACO,CAAC,CAACG,CAAC,CAAC;EACtC,OAAO,MAAM,GAAGF,CAAC,GAAG,MAAM,GAAGC,CAAC,GAAG,MAAM,GAAGC,CAAC;AAC7C,CAAC,CAAC;;AAEF,SAASC,QAAQ,CAACC,MAAM,EAAEC,MAAM,EAAE;EAChC,IAAMC,IAAI,GAAGT,SAAS,CAACO,MAAM,CAAC;IACxBG,IAAI,GAAGV,SAAS,CAACQ,MAAM,CAAC;IACxBG,IAAI,GAAGb,IAAI,CAACc,GAAG,CAACH,IAAI,EAAEC,IAAI,CAAC;IAC3BG,IAAI,GAAGf,IAAI,CAACgB,GAAG,CAACL,IAAI,EAAEC,IAAI,CAAC;EACjC,OAAO,CAACC,IAAI,GAAG,IAAI,KAAKE,IAAI,GAAG,IAAI,CAAC;AACtC;AAEA,SAASE,KAAK,GAAI;EAChB,IAAMpE,IAAI,GAAG,EAAE,CAAC0C,KAAK,CAACpD,IAAI,CAACuD,SAAS,CAAC;EACrC7C,IAAI,CAACqE,OAAO,CAAC,CAAC,CAAC,CAAC;EAChB,OAAOvN,MAAM,kCAAIkJ,IAAI,EAAC;AACxB;AAEA,SAASsE,KAAK,CAACC,CAAC,EAAEb,CAAC,EAAE;EACnB,OAAOa,CAAC,KAAKb,CAAC,IAAIa,CAAC,KAAKA,CAAC,IAAIb,CAAC,KAAKA,CAAC,GAAG,IAAI,GAAG3M,OAAO,CAACwN,CAAC,CAAC,GAAGxN,OAAO,CAAC2M,CAAC,CAAC,IAAIa,CAAC,CAAC3B,MAAM,KAAKc,CAAC,CAACd,MAAM,GAAG4B,UAAU,CAACD,CAAC,EAAEb,CAAC,CAAC,GAAG,KAAK,GAAG1M,QAAQ,CAACuN,CAAC,CAAC,IAAIvN,QAAQ,CAAC0M,CAAC,CAAC,GAAGe,WAAW,CAACF,CAAC,EAAEb,CAAC,CAAC,GAAG,KAAK;AACpL;AAEA,SAASc,UAAU,CAACD,CAAC,EAAEb,CAAC,EAAE;EACxB,KAAK,IAAIgB,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGJ,CAAC,CAAC3B,MAAM,EAAE8B,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;IACxC,IAAI,CAACJ,KAAK,CAACC,CAAC,CAACG,CAAC,CAAC,EAAEhB,CAAC,CAACgB,CAAC,CAAC,CAAC,EAAE,OAAO,KAAK;EACtC;EAEA,OAAO,IAAI;AACb;AAEA,SAASD,WAAW,CAACF,CAAC,EAAEb,CAAC,EAAE;EACzB,KAAK,IAAMkB,GAAG,IAAIL,CAAC,EAAE;IACnB,IAAI,CAACD,KAAK,CAACC,CAAC,CAACK,GAAG,CAAC,EAAElB,CAAC,CAACkB,GAAG,CAAC,CAAC,EAAE,OAAO,KAAK;EAC1C;EAEA,OAAO,IAAI;AACb;AAEA,SAASC,eAAe,CAACC,KAAK,EAAE;EAC9B,OAAO,UAAAC,CAAC;IAAA,OAAIN,WAAW,CAACK,KAAK,EAAEC,CAAC,CAAC;EAAA;AACnC;AAEA,SAASC,MAAM,CAAEvI,IAAI,EAAEkB,MAAM,EAAED,MAAM,EAAEuH,MAAM,EAAED,MAAM,EAAErI,MAAM,EAAE;EAC7D,IAAMU,EAAE,GAAG,IAAI,CAACX,OAAO,CAACY,QAAQ;IAC1Bd,IAAI,GAAG,IAAI,CAACE,OAAO,CAACF,IAAI,CAACC,IAAI,CAAC;IAC9Bc,KAAK,GAAGf,IAAI,CAACe,KAAK;IAClB2H,KAAK,GAAG7H,EAAE,CAAC6H,KAAK,EAAE;EACxB,IAAIC,OAAO,GAAG3I,IAAI,CAAC2I,OAAO;IACtBC,SAAS;IACTR,GAAG;EAEP,IAAIvH,EAAE,CAACgI,QAAQ,KAAK,KAAK,IAAI,EAAE9H,KAAK,CAACX,KAAK,CAACgG,MAAM,IAAIjF,MAAM,IAAIsH,MAAM,CAAC,EAAE;IACtE;IACA,OAAO,CAAC;EACV;EAEA,IAAI,CAACE,OAAO,IAAIA,OAAO,CAACD,KAAK,GAAGA,KAAK,EAAE;IACrC1I,IAAI,CAAC2I,OAAO,GAAGA,OAAO,GAAG9H,EAAE,CAACI,SAAS,EAAE;IACvC0H,OAAO,CAACD,KAAK,GAAGA,KAAK;IACrB7H,EAAE,CAACiI,QAAQ,CAAC,YAAM;MAChB9I,IAAI,CAAC+I,QAAQ,GAAG,IAAI;MACpBlI,EAAE,CAACG,KAAK,CAACD,KAAK,EAAE4H,OAAO,CAAC,CAACK,GAAG,EAAE;IAChC,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC;EACb;EAEA,IAAI9H,MAAM,EAAE;IACV0H,SAAS,GAAG1H,MAAM,KAAK,IAAI,GAAGlH,MAAM,GAAGO,OAAO,CAAC2G,MAAM,CAAC,IAAI1D,OAAO,CAAC0D,MAAM,CAAC,GAAGA,MAAM,GAAGmH,eAAe,CAACnH,MAAM,CAAC;IAC5GyH,OAAO,CAACzH,MAAM,CAAC0H,SAAS,CAAC;EAC3B;EAEA,IAAIzH,MAAM,EAAE;IACVwH,OAAO,CAACxH,MAAM,CAACA,MAAM,CAAC;EACxB;EAEA,IAAIsH,MAAM,EAAE;IACVG,SAAS,GAAGP,eAAe,CAACI,MAAM,CAAC;IAEnC,IAAI1H,KAAK,CAACX,KAAK,CAAC6I,IAAI,CAACL,SAAS,CAAC,EAAE;MAC/BD,OAAO,CAACzH,MAAM,CAAC0H,SAAS,CAAC;IAC3B,CAAC,MAAM;MACLD,OAAO,CAACxH,MAAM,CAACsH,MAAM,CAAC;IACxB;EACF;EAEA,IAAID,MAAM,EAAE;IACV,KAAKJ,GAAG,IAAIjI,MAAM,EAAE;MAClBwI,OAAO,CAACH,MAAM,CAACA,MAAM,EAAEJ,GAAG,EAAEjI,MAAM,CAACiI,GAAG,CAAC,CAAC;IAC1C;EACF;EAEA,OAAO,CAAC;AACV;AAEA,SAASc,aAAa,CAACC,KAAK,EAAE;EAC5B,IAAMC,CAAC,GAAGD,KAAK,CAACE,OAAO;IACjBC,EAAE,GAAGF,CAAC,CAAC,CAAC,CAAC,CAACG,OAAO,GAAGH,CAAC,CAAC,CAAC,CAAC,CAACG,OAAO;IAChCC,EAAE,GAAGJ,CAAC,CAAC,CAAC,CAAC,CAACK,OAAO,GAAGL,CAAC,CAAC,CAAC,CAAC,CAACK,OAAO;EACtC,OAAO9C,IAAI,CAAC+C,IAAI,CAACJ,EAAE,GAAGA,EAAE,GAAGE,EAAE,GAAGA,EAAE,CAAC;AACrC;AACA,SAASG,UAAU,CAACR,KAAK,EAAE;EACzB,IAAMC,CAAC,GAAGD,KAAK,CAACE,OAAO;EACvB,OAAO1C,IAAI,CAACiD,KAAK,CAACR,CAAC,CAAC,CAAC,CAAC,CAACK,OAAO,GAAGL,CAAC,CAAC,CAAC,CAAC,CAACK,OAAO,EAAEL,CAAC,CAAC,CAAC,CAAC,CAACG,OAAO,GAAGH,CAAC,CAAC,CAAC,CAAC,CAACG,OAAO,CAAC;AAC7E;AAEA,IAAMM,SAAS,GAAG,CAAC,CAAC;AACpB,SAASC,KAAK,CAAE9J,IAAI,EAAEC,IAAI,EAAE;EAC1B,IAAM8J,QAAQ,GAAGF,SAAS,CAAC5J,IAAI,CAAC,KAAK4J,SAAS,CAAC5J,IAAI,CAAC,GAAGxF,KAAK,CAACwF,IAAI,CAAC,CAAC;EACnE,OAAO1F,OAAO,CAACyF,IAAI,CAAC,GAAGA,IAAI,CAACgK,GAAG,CAACD,QAAQ,CAAC,GAAGA,QAAQ,CAAC/J,IAAI,CAAC;AAC5D;AAEA,SAASpF,KAAK,CAACqP,GAAG,EAAE;EAClB,OAAO1P,OAAO,CAAC0P,GAAG,CAAC,IAAIC,WAAW,CAACC,MAAM,CAACF,GAAG,CAAC,GAAGA,GAAG,GAAG,IAAI;AAC7D;AAEA,SAASG,QAAQ,CAACH,GAAG,EAAE;EACrB,OAAOrP,KAAK,CAACqP,GAAG,CAAC,KAAK7P,QAAQ,CAAC6P,GAAG,CAAC,GAAGA,GAAG,GAAG,IAAI,CAAC;AACnD;AAEA,SAASI,IAAI,CAACJ,GAAG,EAAE;EAAA;EACjB,KAAK,IAAIK,IAAI,GAAGjE,SAAS,CAACD,MAAM,EAAE5C,IAAI,GAAG,IAAI+G,KAAK,CAACD,IAAI,GAAG,CAAC,GAAGA,IAAI,GAAG,CAAC,GAAG,CAAC,CAAC,EAAEE,IAAI,GAAG,CAAC,EAAEA,IAAI,GAAGF,IAAI,EAAEE,IAAI,EAAE,EAAE;IAC1GhH,IAAI,CAACgH,IAAI,GAAG,CAAC,CAAC,GAAGnE,SAAS,CAACmE,IAAI,CAAC;EAClC;EAEA,OAAO,UAAA5P,KAAK,CAACqP,GAAG,CAAC,EAACI,IAAI,eAAI7G,IAAI,CAAC;AACjC;AACA,SAASiH,OAAO,CAACR,GAAG,EAAE;EAAA;EACpB,KAAK,IAAIS,KAAK,GAAGrE,SAAS,CAACD,MAAM,EAAE5C,IAAI,GAAG,IAAI+G,KAAK,CAACG,KAAK,GAAG,CAAC,GAAGA,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC,EAAEC,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGD,KAAK,EAAEC,KAAK,EAAE,EAAE;IACjHnH,IAAI,CAACmH,KAAK,GAAG,CAAC,CAAC,GAAGtE,SAAS,CAACsE,KAAK,CAAC;EACpC;EAEA,OAAO,aAAAP,QAAQ,CAACH,GAAG,CAAC,EAACW,OAAO,kBAAIpH,IAAI,CAAC;AACvC;AACA,SAASqH,WAAW,CAACZ,GAAG,EAAE;EAAA;EACxB,KAAK,IAAIa,KAAK,GAAGzE,SAAS,CAACD,MAAM,EAAE5C,IAAI,GAAG,IAAI+G,KAAK,CAACO,KAAK,GAAG,CAAC,GAAGA,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC,EAAEC,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGD,KAAK,EAAEC,KAAK,EAAE,EAAE;IACjHvH,IAAI,CAACuH,KAAK,GAAG,CAAC,CAAC,GAAG1E,SAAS,CAAC0E,KAAK,CAAC;EACpC;EAEA,OAAO,cAAAX,QAAQ,CAACH,GAAG,CAAC,EAACe,WAAW,mBAAIxH,IAAI,CAAC;AAC3C;AACA,SAAS0C,KAAK,CAAC+D,GAAG,EAAE;EAAA;EAClB,KAAK,IAAIgB,KAAK,GAAG5E,SAAS,CAACD,MAAM,EAAE5C,IAAI,GAAG,IAAI+G,KAAK,CAACU,KAAK,GAAG,CAAC,GAAGA,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC,EAAEC,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGD,KAAK,EAAEC,KAAK,EAAE,EAAE;IACjH1H,IAAI,CAAC0H,KAAK,GAAG,CAAC,CAAC,GAAG7E,SAAS,CAAC6E,KAAK,CAAC;EACpC;EAEA,OAAO,cAAAd,QAAQ,CAACH,GAAG,CAAC,EAAC/D,KAAK,mBAAI1C,IAAI,CAAC;AACrC;AACA,SAAS2H,OAAO,CAACC,GAAG,EAAEC,OAAO,EAAEC,IAAI,EAAE;EACnC,IAAInR,UAAU,CAACmR,IAAI,CAAC,EAAErR,KAAK,CAAC,sCAAsC,CAAC;EACnE,OAAOsR,MAAM,CAACH,GAAG,CAAC,CAACD,OAAO,CAACE,OAAO,EAAEC,IAAI,CAAC;AAC3C;AACA,SAASE,OAAO,CAACvB,GAAG,EAAE;EACpB,OAAOrP,KAAK,CAACqP,GAAG,CAAC,CAAC/D,KAAK,EAAE,CAACsF,OAAO,EAAE;AACrC;AAEA,SAASC,SAAS,CAAC/K,KAAK,EAAEgL,YAAY,EAAEC,YAAY,EAAE;EACpD,OAAOlO,SAAS,CAACiD,KAAK,IAAI,CAAC,EAAEgL,YAAY,IAAI,CAAC,EAAEC,YAAY,IAAI,CAAC,CAAC;AACpE;AACA,SAAS3G,SAAS,CAAC/E,IAAI,EAAE2F,KAAK,EAAE;EAC9B,IAAMlB,CAAC,GAAGF,QAAQ,CAACvE,IAAI,EAAE,CAAC2F,KAAK,IAAI,IAAI,EAAE1F,OAAO,CAAC;EACjD,OAAOwE,CAAC,IAAIA,CAAC,CAACM,SAAS,GAAGN,CAAC,CAACM,SAAS,EAAE,GAAG,CAAC;AAC7C;AACA,SAAS4G,IAAI,CAAC3L,IAAI,EAAE2F,KAAK,EAAE;EACzB,IAAMlB,CAAC,GAAGF,QAAQ,CAACvE,IAAI,EAAE,CAAC2F,KAAK,IAAI,IAAI,EAAE1F,OAAO,CAAC;EACjD,OAAOwE,CAAC,GAAGA,CAAC,CAACkH,IAAI,EAAE,GAAGnL,SAAS;AACjC;AACA,SAASoL,MAAM,CAAC5L,IAAI,EAAE2F,KAAK,EAAE;EAC3B,IAAMlB,CAAC,GAAGF,QAAQ,CAACvE,IAAI,EAAE,CAAC2F,KAAK,IAAI,IAAI,EAAE1F,OAAO,CAAC;EACjD,OAAOwE,CAAC,GAAGA,CAAC,CAACmH,MAAM,EAAE,GAAG,EAAE;AAC5B;AACA,SAASC,MAAM,CAAC7L,IAAI,EAAEH,KAAK,EAAE8F,KAAK,EAAE;EAClC,IAAMlB,CAAC,GAAGF,QAAQ,CAACvE,IAAI,EAAE,CAAC2F,KAAK,IAAI,IAAI,EAAE1F,OAAO,CAAC;EACjD,OAAO,CAACwE,CAAC,GAAGjE,SAAS,GAAGlG,OAAO,CAACuF,KAAK,CAAC,GAAG,CAAC4E,CAAC,CAACqH,WAAW,IAAIrH,CAAC,CAACoH,MAAM,EAAEhM,KAAK,CAAC,GAAG,CAAC4E,CAAC,CAACoH,MAAM,IAAIpH,CAAC,CAACsH,YAAY,EAAElM,KAAK,CAAC;AACnH;AACA,SAASA,KAAK,CAACG,IAAI,EAAE2F,KAAK,EAAE;EAC1B,IAAMlB,CAAC,GAAGF,QAAQ,CAACvE,IAAI,EAAE,CAAC2F,KAAK,IAAI,IAAI,EAAE1F,OAAO,CAAC;EACjD,OAAOwE,CAAC,IAAIA,CAAC,CAAC5E,KAAK,GAAG4E,CAAC,CAAC5E,KAAK,EAAE,GAAG,EAAE;AACtC;AACA,SAASpC,KAAK,CAACuC,IAAI,EAAEG,KAAK,EAAEwF,KAAK,EAAE;EACjC,IAAMlB,CAAC,GAAGF,QAAQ,CAACvE,IAAI,EAAE,CAAC2F,KAAK,IAAI,IAAI,EAAE1F,OAAO,CAAC;EACjD,OAAOwE,CAAC,GAAGA,CAAC,CAACtE,KAAK,CAAC,GAAGK,SAAS;AACjC;AAEA,SAASwL,aAAa,CAAEvO,KAAK,EAAEwO,EAAE,EAAEC,EAAE,EAAEzL,KAAK,EAAEkF,KAAK,EAAE;EACnDlI,KAAK,GAAG8G,QAAQ,CAAC9G,KAAK,EAAE,CAACkI,KAAK,IAAI,IAAI,EAAE1F,OAAO,CAAC;EAChD,IAAMkM,QAAQ,GAAGvO,QAAQ,CAACqO,EAAE,EAAEC,EAAE,CAAC;EACjC,IAAIE,KAAK,GAAG3O,KAAK,CAACmO,MAAM,EAAE;IACtBlE,GAAG,GAAG0E,KAAK,CAAC,CAAC,CAAC;IACd5E,GAAG,GAAG/M,IAAI,CAAC2R,KAAK,CAAC;IACjBC,QAAQ,GAAG3R,QAAQ;EAEvB,IAAI,EAAE8M,GAAG,GAAGE,GAAG,CAAC,EAAE;IAChB;IACAjK,KAAK,GAAG,CAACA,KAAK,CAAC6O,YAAY,GAAG5O,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC4O,YAAY,CAAC7O,KAAK,CAAC6O,YAAY,EAAE,CAAC,GAAG5O,OAAO,CAAC,QAAQ,CAAC,EAAE,CAAC6O,WAAW,CAAC9O,KAAK,CAAC8O,WAAW,EAAE,CAAC,CAAC1M,KAAK,CAACpC,KAAK,CAACoC,KAAK,EAAE,CAAC,EAAE+L,MAAM,CAAC,CAAClE,GAAG,GAAG,CAAC,EAAEF,GAAG,GAAG,CAAC,CAAC,CAAC;EAClM,CAAC,MAAM;IACL6E,QAAQ,GAAG1O,aAAa,CAACF,KAAK,EAAEiK,GAAG,EAAEF,GAAG,CAAC;EAC3C;EAEA,IAAI/J,KAAK,CAAC+O,KAAK,EAAE;IACfJ,KAAK,GAAG3O,KAAK,CAAC+O,KAAK,CAAC,CAAC/L,KAAK,IAAI,EAAE,CAAC;IACjC,IAAIiH,GAAG,KAAK0E,KAAK,CAAC,CAAC,CAAC,EAAEA,KAAK,CAACxE,OAAO,CAACF,GAAG,CAAC;IACxC,IAAIF,GAAG,KAAK/M,IAAI,CAAC2R,KAAK,CAAC,EAAEA,KAAK,CAACK,IAAI,CAACjF,GAAG,CAAC;EAC1C;EAEA4E,KAAK,CAACM,OAAO,CAAC,UAAApE,CAAC;IAAA,OAAI6D,QAAQ,CAACQ,IAAI,CAACN,QAAQ,CAAC/D,CAAC,CAAC,EAAE7K,KAAK,CAAC6K,CAAC,CAAC,CAAC;EAAA,EAAC;EACxD,OAAO6D,QAAQ;AACjB;AAEA,SAASS,QAAQ,CAACnH,UAAU,EAAEC,OAAO,EAAEC,KAAK,EAAE;EAC5C,IAAMC,CAAC,GAAGrB,QAAQ,CAACkB,UAAU,EAAE,CAACE,KAAK,IAAI,IAAI,EAAE1F,OAAO,CAAC;EACvD,OAAO,UAAUA,OAAO,EAAE;IACxB,OAAO2F,CAAC,GAAGA,CAAC,CAACC,IAAI,CAAC5F,OAAO,CAACA,OAAO,CAAC,CAACyF,OAAO,CAAC,GAAG,EAAE;EAClD,CAAC;AACH;AACA,SAASmH,SAAS,CAAChH,IAAI,EAAE;EACvB,IAAID,CAAC,GAAG,IAAI;EACZ,OAAO,UAAU3F,OAAO,EAAE;IACxB,OAAOA,OAAO,GAAGpC,UAAU,CAACoC,OAAO,EAAE2F,CAAC,GAAGA,CAAC,IAAI9H,SAAS,CAAC+H,IAAI,CAAC,CAAC,GAAGA,IAAI;EACvE,CAAC;AACH;AAEA,IAAMiH,KAAK,GAAG,SAARA,KAAK,CAAGC,CAAC;EAAA,OAAIA,CAAC,CAAChN,IAAI;AAAA;AAEzB,SAASiN,SAAS,CAAChN,IAAI,EAAEC,OAAO,EAAE;EAChC,IAAMgN,IAAI,GAAGlN,IAAI,CAAC8C,IAAI,CAAC5C,OAAO,EAAED,IAAI,CAAC;EACrC,OAAOiN,IAAI,CAACC,IAAI,IAAID,IAAI,CAACC,IAAI,CAACC,MAAM,IAAI,CAAC,CAAC;AAC5C;AAEA,SAASC,QAAQ,CAACpN,IAAI,EAAEwB,MAAM,EAAEF,MAAM,EAAE;EACtC,IAAM+L,KAAK,GAAGL,SAAS,CAAChN,IAAI,EAAE,IAAI,CAAC;IAC7ByE,CAAC,GAAG4I,KAAK,CAAC7L,MAAM,CAAC;IACjB2H,CAAC,GAAGkE,KAAK,CAAC/L,MAAM,CAAC;EACvB,OAAOmD,CAAC,IAAI0E,CAAC,GAAG1E,CAAC,CAACoB,IAAI,CAACsD,CAAC,CAAC,CAACY,GAAG,CAAC+C,KAAK,CAAC,GAAGtM,SAAS;AAClD;AACA,SAAS8M,aAAa,CAACtN,IAAI,EAAEuN,IAAI,EAAE;EACjC,IAAMrF,CAAC,GAAG8E,SAAS,CAAChN,IAAI,EAAE,IAAI,CAAC,CAACuN,IAAI,CAAC;EACrC,OAAOrF,CAAC,GAAGA,CAAC,CAACsF,SAAS,EAAE,CAACzD,GAAG,CAAC+C,KAAK,CAAC,GAAGtM,SAAS;AACjD;AAEA,IAAMiN,OAAO,GAAG,SAAVA,OAAO;EAAA,OAAS,OAAOC,MAAM,KAAK,WAAW,IAAIA,MAAM,IAAI,IAAI;AAAA;AAErE,SAASC,MAAM,GAAG;EAChB,IAAMC,CAAC,GAAGH,OAAO,EAAE;EAEnB,OAAOG,CAAC,GAAGA,CAAC,CAACD,MAAM,GAAG,CAAC,CAAC;AAC1B;AACA,SAASE,UAAU,GAAG;EACpB,IAAMD,CAAC,GAAGH,OAAO,EAAE;EAEnB,OAAOG,CAAC,GAAG,CAACA,CAAC,CAACE,UAAU,EAAEF,CAAC,CAACG,WAAW,CAAC,GAAG,CAACvN,SAAS,EAAEA,SAAS,CAAC;AACnE;AACA,SAASwN,aAAa,GAAG;EACvB,IAAMC,IAAI,GAAG,IAAI,CAAChO,OAAO,CAACY,QAAQ;IAC5BqN,EAAE,GAAGD,IAAI,CAACE,SAAS,IAAIF,IAAI,CAACE,SAAS,EAAE;EAC7C,OAAOD,EAAE,GAAG,CAACA,EAAE,CAACE,WAAW,EAAEF,EAAE,CAACG,YAAY,CAAC,GAAG,CAAC7N,SAAS,EAAEA,SAAS,CAAC;AACxE;AAEA,SAASxC,SAAS,CAAEiJ,CAAC,EAAEqH,GAAG,EAAE3I,KAAK,EAAE;EACjC,IAAI,CAACsB,CAAC,EAAE,OAAO,EAAE;EACjB,wBAAeA,CAAC;IAATsH,CAAC;IAAEC,CAAC;IACLC,GAAG,GAAG,IAAI1Q,MAAM,EAAE,CAAC2Q,GAAG,CAACH,CAAC,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,EAAEC,CAAC,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,CAAC;IAC9CG,KAAK,GAAGhJ,KAAK,IAAI,IAAI,CAAC1F,OAAO,CAACY,QAAQ,CAAC+N,UAAU,EAAE,CAAC1B,IAAI;EAC9D,OAAOjP,WAAW,CAAC0Q,KAAK,EAAEF,GAAG,EAAEI,MAAM,CAACP,GAAG,CAAC,CAAC;AAC7C;AAEA,SAASO,MAAM,CAACP,GAAG,EAAE;EACnB,IAAI1I,CAAC,GAAG,IAAI;EAEZ,IAAI0I,GAAG,EAAE;IACP,IAAMQ,KAAK,GAAGlU,OAAO,CAAC0T,GAAG,CAACS,QAAQ,CAAC;MAC7BC,KAAK,GAAGpU,OAAO,CAAC0T,GAAG,CAACW,QAAQ,CAAC;IAEnCrJ,CAAC,GAAG,WAAA0C,CAAC;MAAA,OAAI,CAAC,CAACwG,KAAK,CAAC3I,MAAM,IAAI2I,KAAK,CAAC9F,IAAI,CAAC,UAAAG,CAAC;QAAA,OAAIb,CAAC,CAACyG,QAAQ,KAAK5F,CAAC;MAAA,EAAC,MAAM,CAAC6F,KAAK,CAAC7I,MAAM,IAAI6I,KAAK,CAAChG,IAAI,CAAC,UAAAvE,CAAC;QAAA,OAAI6D,CAAC,CAACtI,IAAI,KAAKyE,CAAC;MAAA,EAAC,CAAC;IAAA;EACnH;EAEA,OAAOmB,CAAC;AACV;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASsJ,WAAW,CAACC,KAAK,EAAEC,CAAC,EAAEC,CAAC,EAAE;EAChC,IAAIC,OAAO,GAAGlJ,SAAS,CAACD,MAAM,GAAG,CAAC,IAAIC,SAAS,CAAC,CAAC,CAAC,KAAK5F,SAAS,GAAG4F,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC;EACnF,IAAMmJ,IAAI,GAAGJ,KAAK,CAACA,KAAK,CAAChJ,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;;EAEtC,IAAIoJ,IAAI,KAAK/O,SAAS,IAAIkG,IAAI,CAAC+C,IAAI,CAAC,SAAC8F,IAAI,CAAC,CAAC,CAAC,GAAGH,CAAC,EAAK,CAAC,aAAIG,IAAI,CAAC,CAAC,CAAC,GAAGF,CAAC,EAAK,CAAC,EAAC,GAAGC,OAAO,EAAE;IACtFH,KAAK,CAAC1C,IAAI,CAAC,CAAC2C,CAAC,EAAEC,CAAC,CAAC,CAAC;IAClB,0BAAWF,KAAK;EAClB;EAEA,OAAOA,KAAK;AACd;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASK,SAAS,CAACL,KAAK,EAAE;EACxB,OAAO,CAACA,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAK,KAAK,CAAC,GAAGA,KAAK,GAAG,EAAE,EAAEM,MAAM,CAAC,UAACC,GAAG,EAAEC,IAAI,EAAE1H,CAAC,EAAK;IAChF,2BAAa0H,IAAI;MAAZP,CAAC;MAAEC,CAAC;IACT,OAAOK,GAAG,IAAIzH,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC5C,MAAM,CAAC+J,CAAC,EAAE,GAAG,CAAC,CAAC/J,MAAM,CAACgK,CAAC,EAAE,GAAG,CAAC,GAAGpH,CAAC,KAAKkH,KAAK,CAAChJ,MAAM,GAAG,CAAC,GAAG,IAAI,GAAG,IAAI,CAACd,MAAM,CAAC+J,CAAC,EAAE,GAAG,CAAC,CAAC/J,MAAM,CAACgK,CAAC,EAAE,GAAG,CAAC;EAChI,CAAC,EAAE,EAAE,CAAC;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASO,cAAc,CAACX,QAAQ,EAAEY,UAAU,EAAEC,IAAI,EAAE;EAClD,IACEV,CAAC,GAGCU,IAAI,CAHNV,CAAC;IACDC,CAAC,GAECS,IAAI,CAFNT,CAAC;IACD9N,IAAI,GACFuO,IAAI,CADNvO,IAAI;EAEN,IAAMwO,EAAE,GAAG,IAAIhS,MAAM,EAAE,CAAC2Q,GAAG,CAAClM,MAAM,CAACwN,gBAAgB,EAAExN,MAAM,CAACwN,gBAAgB,EAAExN,MAAM,CAACyN,gBAAgB,EAAEzN,MAAM,CAACyN,gBAAgB,CAAC,CAAC,CAAC;EAAA,2CAE1GJ,UAAU;IAAA;EAAA;IAAjC,oDAAmC;MAAA;QAAvBK,EAAE;QAAEC,EAAE;MAChB,IAAID,EAAE,GAAGH,EAAE,CAACK,EAAE,EAAEL,EAAE,CAACK,EAAE,GAAGF,EAAE;MAC1B,IAAIA,EAAE,GAAGH,EAAE,CAACM,EAAE,EAAEN,EAAE,CAACM,EAAE,GAAGH,EAAE;MAC1B,IAAIC,EAAE,GAAGJ,EAAE,CAACO,EAAE,EAAEP,EAAE,CAACO,EAAE,GAAGH,EAAE;MAC1B,IAAIA,EAAE,GAAGJ,EAAE,CAACQ,EAAE,EAAER,EAAE,CAACQ,EAAE,GAAGJ,EAAE;IAC5B,CAAC,CAAC;EAAA;IAAA;EAAA;IAAA;EAAA;EAGFJ,EAAE,CAACS,SAAS,CAACpB,CAAC,EAAEC,CAAC,CAAC;EAClB,IAAMoB,YAAY,GAAGzS,SAAS,CAAC,CAAC,CAAC+R,EAAE,CAACK,EAAE,EAAEL,EAAE,CAACO,EAAE,CAAC,EAAE,CAACP,EAAE,CAACM,EAAE,EAAEN,EAAE,CAACQ,EAAE,CAAC,CAAC,EAAEtB,QAAQ,EAAE1N,IAAI,CAAC,CAAC,CAAC;;EAElF,OAAOkP,YAAY,CAAC5B,MAAM,CAAC,UAAA6B,KAAK;IAAA,OAAIC,cAAc,CAACD,KAAK,CAACtB,CAAC,EAAEsB,KAAK,CAACrB,CAAC,EAAEQ,UAAU,CAAC;EAAA,EAAC;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASc,cAAc,CAACC,KAAK,EAAEC,KAAK,EAAEC,OAAO,EAAE;EAC7C,IAAIC,aAAa,GAAG,CAAC;EAErB,KAAK,IAAI9I,CAAC,GAAG,CAAC,EAAE+I,CAAC,GAAGF,OAAO,CAAC3K,MAAM,GAAG,CAAC,EAAE8B,CAAC,GAAG6I,OAAO,CAAC3K,MAAM,EAAE6K,CAAC,GAAG/I,CAAC,EAAE,EAAE;IACnE,gCAAuB6I,OAAO,CAACE,CAAC,CAAC;MAA1BC,KAAK;MAAEC,KAAK;IACnB,gCAAeJ,OAAO,CAAC7I,CAAC,CAAC;MAAlBmH,CAAC;MAAEC,CAAC,iBAAe,CAAC;;IAE3B,IAAIA,CAAC,GAAGwB,KAAK,IAAIK,KAAK,GAAGL,KAAK,IAAID,KAAK,GAAG,CAACK,KAAK,GAAG7B,CAAC,KAAKyB,KAAK,GAAGxB,CAAC,CAAC,IAAI6B,KAAK,GAAG7B,CAAC,CAAC,GAAGD,CAAC,EAAE;MACrF2B,aAAa,EAAE;IACjB;EACF,CAAC,CAAC;;EAGF,OAAOA,aAAa,GAAG,CAAC;AAC1B;AAEA,IAAMI,eAAe,GAAG;EACtB5S,MAAM,oBAAG;IACP,OAAOA,OAAM,EAAE;EACjB,CAAC;EAED;EACAC,gBAAgB,EAAhBA,gBAAgB;EAChBC,mBAAmB,EAAnBA,mBAAmB;EACnBC,iBAAiB,EAAjBA,iBAAiB;EACjBC,aAAa,EAAbA,aAAa;EACbC,gBAAgB,EAAhBA,gBAAgB;EAChBC,cAAc,EAAdA,cAAc;EACdC,cAAc,EAAdA,cAAc;EACdC,iBAAiB,EAAjBA,iBAAiB;EACjBC,eAAe,EAAfA,eAAe;EACfC,YAAY,EAAZA,YAAY;EACZC,eAAe,EAAfA,eAAe;EACfC,aAAa,EAAbA,aAAa;EACb7E,OAAO,EAAPA,OAAO;EACPO,SAAS,EAATA,SAAS;EACTC,MAAM,EAANA,MAAM;EAENsW,SAAS,qBAAC9I,CAAC,EAAE;IACX,OAAOA,CAAC,KAAK9H,SAAS;EACxB,CAAC;EAEDzF,QAAQ,EAARA,QAAQ;EACRR,QAAQ,EAARA,QAAQ;EACRS,QAAQ,EAARA,QAAQ;EACRb,QAAQ,EAARA,QAAQ;EACRoD,OAAO,EAAPA,OAAO;EAEP8T,OAAO,mBAAC/I,CAAC,EAAE;IACT,OAAOA,CAAC,IAAI,IAAI,IAAIA,CAAC,KAAKA,CAAC;EAC7B,CAAC;EAEDrN,SAAS,EAATA,SAAS;EAETC,MAAM,kBAACoN,CAAC,EAAE;IACR,OAAOpN,OAAM,CAACoN,CAAC,CAAC;EAClB,CAAC;EAED;EACAnN,QAAQ,EAARA,QAAQ;EACRC,QAAQ,EAARA,QAAQ;EACRoP,OAAO,EAAPA,OAAO;EACPJ,IAAI,EAAJA,IAAI;EACJQ,WAAW,EAAXA,WAAW;EACXM,OAAO,EAAPA,OAAO;EACPK,OAAO,EAAPA,OAAO;EACPtF,KAAK,EAALA,KAAK;EACL5K,KAAK,EAALA,KAAK;EACLC,IAAI,EAAJA,IAAI;EACJqM,KAAK,EAALA,KAAK;EACLpM,GAAG,EAAHA,GAAG;EACHd,IAAI,EAAJA,IAAI;EACJoP,KAAK,EAALA,KAAK;EACLrO,IAAI,EAAJA,IAAI;EACJC,OAAO,EAAPA,OAAO;EACPC,QAAQ,EAARA,QAAQ;EACRyB,GAAG,EAAHA,GAAG;EACHC,GAAG,EAAHA,GAAG;EACHC,GAAG,EAAHA,GAAG;EACHC,GAAG,EAAHA,GAAG;EACHsJ,SAAS,EAATA,SAAS;EACTM,QAAQ,EAARA,QAAQ;EACRiD,QAAQ,EAAErK,OAAO;EACjB+B,MAAM,EAANA,MAAM;EACNE,SAAS,EAATA,SAAS;EACTE,QAAQ,EAARA,QAAQ;EACR7C,SAAS,EAATA,SAAS;EACTC,WAAW,EAAXA,WAAW;EACXyC,UAAU,EAAVA,UAAU;EACVE,SAAS,EAATA,SAAS;EACT1C,UAAU,EAAVA,UAAU;EACVC,YAAY,EAAZA,YAAY;EACZC,iBAAiB,EAAjBA,iBAAiB;EACjBsD,WAAW,EAAXA,WAAW;EACXC,iBAAiB,EAAjBA,iBAAiB;EACjBC,SAAS,EAATA,SAAS;EACTC,eAAe,EAAfA,eAAe;EACftH,OAAO,EAAPA,OAAO;EACPC,UAAU,EAAVA,UAAU;EACV6D,IAAI,EAAJA,IAAI;EACJC,OAAO,EAAPA,OAAO;EACPC,SAAS,EAATA,SAAS;EACTC,YAAY,EAAZA,YAAY;EACZsG,IAAI,EAAJA,IAAI;EACJG,IAAI,EAAJA,IAAI;EACJC,KAAK,EAALA,KAAK;EAELzK,MAAM,kBAACyM,CAAC,EAAE;IACR,OAAOzM,OAAM,CAACyM,CAAC,CAAC;EAClB,CAAC;EAED;EACAxC,OAAO,EAAPA,OAAO;EACP9H,SAAS,EAATA,SAAS;EACTlC,UAAU,EAAVA,UAAU;EACVmN,aAAa,EAAbA,aAAa;EACbS,UAAU,EAAVA,UAAU;EACViE,MAAM,EAANA,MAAM;EACNK,aAAa,EAAbA,aAAa;EACbH,UAAU,EAAVA,UAAU;EACVrC,SAAS,EAATA,SAAS;EACT9K,OAAO,EAAPA,OAAO;EACPmM,SAAS,EAATA,SAAS;EACT9Q,SAAS,EAATA,SAAS;EACTC,MAAM,EAANA,MAAM;EACNC,MAAM,EAANA,MAAM;EACNC,SAAS,EAATA,SAAS;EACTC,UAAU,EAAVA,UAAU;EACVC,OAAO,EAAPA,OAAO;EACPC,OAAO,EAAPA,OAAO;EACPC,UAAU,EAAVA,UAAU;EACV6E,MAAM,EAANA,MAAM;EACNoH,MAAM,EAANA,MAAM;EACN2G,WAAW,EAAXA,WAAW;EACXM,SAAS,EAATA,SAAS;EACTI,cAAc,EAAdA;AACF,CAAC;AACD,IAAM0B,cAAc,GAAG,CAAC,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC;EAC1D;EACNC,WAAW,GAAG,aAAa;EACrB;EACNC,UAAU,GAAG,OAAO;EACd;EACNC,WAAW,GAAG,CAAC,CAAC,CAAC,CAAC;AAClB;;AAEA,IAAMC,aAAa,GAAG;EACpBC,SAAS,EAAE,CAAC,GAAG,CAAC;EAChBC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,MAAM,CAAC;EACnCC,QAAQ,EAAE,OAAO;EACjBC,SAAS,EAAE,mBAAAC,EAAE;IAAA,OAAI,IAAI,CAAC1M,MAAM,CAACjL,WAAW,CAACiJ,YAAY,GAAG0O,EAAE,CAAC,EAAE,GAAG,CAAC;EAAA;EACjErV,SAAS,EAAEsV,cAAc;EACzBvV,SAAS,EAAEA,SAAS;EACpBoI,QAAQ,EAAE4M;AACZ,CAAC,CAAC,CAAC;;AAEH,IAAMQ,aAAa,GAAGzV,iBAAiB,CAACkV,aAAa,CAAC,CAAC,CAAC;;AAExD,SAASM,cAAc,CAACrN,OAAO,EAAE;EAC/B,IAAMuN,EAAE,GAAGxV,SAAS,CAACiI,OAAO,CAAC;EAC7B2M,cAAc,CAAC5E,OAAO,CAAC,UAAA1M,IAAI;IAAA,OAAIkS,EAAE,CAAClS,IAAI,CAAC,GAAGuR,WAAW,GAAGvR,IAAI;EAAA,EAAC;EAE7D,KAAK,IAAMA,IAAI,IAAImR,eAAe,EAAE;IAClCe,EAAE,CAAClS,IAAI,CAAC,GAAGwR,UAAU,GAAGxR,IAAI;EAC9B;EAEA3F,MAAM,CAAC6X,EAAE,EAAExN,sBAAsB,CAACC,OAAO,EAAEwM,eAAe,EAAEM,WAAW,CAAC,CAAC;EACzE,OAAOS,EAAE;AACX,CAAC,CAAC;;AAGF,SAASC,kBAAkB,CAACnS,IAAI,EAAEkS,EAAE,EAAEE,OAAO,EAAE;EAC7C,IAAIhM,SAAS,CAACD,MAAM,KAAK,CAAC,EAAE;IAC1B,OAAOgL,eAAe,CAACnR,IAAI,CAAC;EAC9B,CAAC,CAAC;;EAGFmR,eAAe,CAACnR,IAAI,CAAC,GAAGkS,EAAE,CAAC,CAAC;;EAE5B,IAAIE,OAAO,EAAEX,WAAW,CAACzR,IAAI,CAAC,GAAGoS,OAAO,CAAC,CAAC;EAC1C;;EAEA,IAAIH,aAAa,EAAEA,aAAa,CAACvV,SAAS,CAACsD,IAAI,CAAC,GAAGwR,UAAU,GAAGxR,IAAI;EACpE,OAAO,IAAI;AACb,CAAC,CAAC;;AAEFmS,kBAAkB,CAAC,WAAW,EAAEpN,SAAS,EAAEb,YAAY,CAAC;AACxDiO,kBAAkB,CAAC,MAAM,EAAExG,IAAI,EAAEzH,YAAY,CAAC;AAC9CiO,kBAAkB,CAAC,QAAQ,EAAEvG,MAAM,EAAE1H,YAAY,CAAC;AAClDiO,kBAAkB,CAAC,OAAO,EAAEtS,KAAK,EAAEqE,YAAY,CAAC;AAChDiO,kBAAkB,CAAC,QAAQ,EAAEtG,MAAM,EAAE3H,YAAY,CAAC;AAClDiO,kBAAkB,CAAC,OAAO,EAAE1U,KAAK,EAAEyG,YAAY,CAAC;AAChDiO,kBAAkB,CAAC,UAAU,EAAEnG,aAAa,EAAE9H,YAAY,CAAC;AAC3DiO,kBAAkB,CAAC,SAAS,EAAElV,OAAO,EAAEiH,YAAY,CAAC;AACpDiO,kBAAkB,CAAC,WAAW,EAAEtV,SAAS,EAAEqH,YAAY,CAAC;AACxDiO,kBAAkB,CAAC,aAAa,EAAEpV,WAAW,EAAEmH,YAAY,CAAC;AAC5DiO,kBAAkB,CAAC,UAAU,EAAEvF,QAAQ,EAAE1I,YAAY,CAAC;AACtDiO,kBAAkB,CAAC,QAAQ,EAAE/R,MAAM,EAAE2D,aAAa,CAAC;AACnDoO,kBAAkB,CAAC,MAAM,EAAEpS,IAAI,EAAEuD,WAAW,CAAC;AAC7C6O,kBAAkB,CAAC,UAAU,EAAE/E,QAAQ,EAAE9J,WAAW,CAAC;AACrD6O,kBAAkB,CAAC,eAAe,EAAE7E,aAAa,EAAEhK,WAAW,CAAC,CAAC,CAAC;;AAEjE6O,kBAAkB,CAAC,iBAAiB,EAAEhU,aAAa,EAAED,gBAAgB,CAAC;AACtEiU,kBAAkB,CAAC,mBAAmB,EAAE/T,eAAe,EAAEF,gBAAgB,CAAC;AAC1EiU,kBAAkB,CAAC,oBAAoB,EAAE9T,gBAAgB,EAAEH,gBAAgB,CAAC;AAC5EiU,kBAAkB,CAAC,mBAAmB,EAAE7T,eAAe,CAAC;AAExD,SAAS+T,MAAM,CAAEC,IAAI,EAAE9O,KAAK,EAAE;EAC5B,IAAMC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;;EAEnB,IAAI8O,GAAG;EAEP,IAAI;IACFD,IAAI,GAAGnY,QAAQ,CAACmY,IAAI,CAAC,GAAGA,IAAI,GAAGlY,WAAW,CAACkY,IAAI,CAAC,GAAG,EAAE;IACrDC,GAAG,GAAG5V,eAAe,CAAC2V,IAAI,CAAC;EAC7B,CAAC,CAAC,OAAOxO,GAAG,EAAE;IACZ9J,KAAK,CAAC,0BAA0B,GAAGsY,IAAI,CAAC;EAC1C,CAAC,CAAC;;EAGFC,GAAG,CAACC,KAAK,CAAC,UAAAjF,IAAI,EAAI;IAChB,IAAIA,IAAI,CAAC7J,IAAI,KAAK9G,cAAc,EAAE;IAClC,IAAMoD,IAAI,GAAGuN,IAAI,CAACkF,MAAM,CAACzS,IAAI;MACvBwS,KAAK,GAAGd,aAAa,CAAC7M,QAAQ,CAAC7E,IAAI,CAAC;IAC1C,IAAIwS,KAAK,EAAEA,KAAK,CAACxS,IAAI,EAAEuN,IAAI,CAACnH,SAAS,EAAE5C,KAAK,EAAEC,MAAM,CAAC;EACvD,CAAC,CAAC,CAAC,CAAC;;EAEJ,IAAMiP,GAAG,GAAGT,aAAa,CAACM,GAAG,CAAC,CAAC,CAAC;;EAEhCG,GAAG,CAACC,OAAO,CAACjG,OAAO,CAAC,UAAA1M,IAAI,EAAI;IAC1B,IAAM4S,UAAU,GAAGvP,YAAY,GAAGrD,IAAI;IAEtC,IAAI,CAAC/F,cAAc,CAACwJ,MAAM,EAAEmP,UAAU,CAAC,IAAIpP,KAAK,CAACqP,SAAS,CAAC7S,IAAI,CAAC,EAAE;MAChEyD,MAAM,CAACmP,UAAU,CAAC,GAAGpP,KAAK,CAACsP,SAAS,CAAC9S,IAAI,CAAC;IAC5C;EACF,CAAC,CAAC,CAAC,CAAC;;EAEJ,OAAO;IACL+S,KAAK,EAAE1Y,MAAM,CAAC;MACZ2Y,IAAI,EAAEN,GAAG,CAACM;IACZ,CAAC,EAAExP,KAAK,CAACyP,OAAO,CAACV,GAAG,GAAG;MACrBA,GAAG,EAAHA;IACF,CAAC,GAAG,IAAI,CAAC;IACTW,OAAO,EAAER,GAAG,CAACS,MAAM;IACnBC,OAAO,EAAE3P;EACX,CAAC;AACH;AAEA,SAASP,UAAU,EAAEC,WAAW,EAAEC,WAAW,EAAEC,YAAY,EAAEmI,SAAS,EAAEzG,SAAS,EAAEkN,aAAa,EAAEP,aAAa,EAAE1D,aAAa,EAAE9G,QAAQ,EAAEyE,IAAI,EAAE5L,IAAI,EAAEuD,WAAW,EAAEL,eAAe,EAAED,SAAS,EAAEsD,KAAK,EAAEsF,MAAM,EAAEzK,MAAM,EAAEgR,kBAAkB,EAAEtQ,MAAM,EAAEsP,eAAe,EAAElU,OAAO,EAAEJ,SAAS,EAAEE,WAAW,EAAE6P,QAAQ,EAAE9G,OAAO,EAAE1F,MAAM,EAAE2D,aAAa,EAAEyG,OAAO,EAAEnE,IAAI,EAAEwF,MAAM,EAAEzB,IAAI,EAAEQ,WAAW,EAAEhE,SAAS,EAAEe,KAAK,EAAEY,MAAM,EAAExF,iBAAiB,EAAED,WAAW,EAAEuP,MAAM,IAAI1V,eAAe,EAAEkQ,SAAS,EAAEnD,UAAU,EAAET,aAAa,EAAEY,KAAK,EAAEhK,KAAK,EAAEqL,OAAO,EAAEK,OAAO,EAAE9N,KAAK,EAAEuO,aAAa,EAAE9H,YAAY,EAAEyJ,MAAM,EAAEjN,OAAO,EAAEuF,KAAK,EAAEnE,UAAU,EAAEE,SAAS,EAAEsL,aAAa,EAAEF,QAAQ,EAAErL,SAAS,EAAEE,QAAQ,EAAEiE,IAAI,EAAE2H,UAAU"},"metadata":{},"sourceType":"module"}