{"ast":null,"code":"import _createForOfIteratorHelper from \"/Users/weihangzhang/Documents/webpage/visualization-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport { isString } from 'vega';\nimport { stringValue } from 'vega-util';\nimport { FACET_CHANNELS } from '../../channel';\nimport { vals } from '../../util';\nimport { isFacetModel } from '../model';\nimport interval from './interval';\nimport point from './point';\nimport clear from './clear';\nimport inputs from './inputs';\nimport nearest from './nearest';\nimport project from './project';\nimport scales from './scales';\nimport legends from './legends';\nimport toggle from './toggle';\nimport translate from './translate';\nimport zoom from './zoom';\nexport var STORE = '_store';\nexport var TUPLE = '_tuple';\nexport var MODIFY = '_modify';\nexport var SELECTION_DOMAIN = '_selection_domain_';\nexport var VL_SELECTION_RESOLVE = 'vlSelectionResolve';\n// Order matters for parsing and assembly.\nexport var selectionCompilers = [point, interval, project, toggle,\n// Bindings may disable direct manipulation.\ninputs, scales, legends, clear, translate, zoom, nearest];\nfunction getFacetModel(model) {\n  var parent = model.parent;\n  while (parent) {\n    if (isFacetModel(parent)) break;\n    parent = parent.parent;\n  }\n  return parent;\n}\nexport function unitName(model) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      escape: true\n    },\n    escape = _ref.escape;\n  var name = escape ? stringValue(model.name) : model.name;\n  var facetModel = getFacetModel(model);\n  if (facetModel) {\n    var facet = facetModel.facet;\n    var _iterator = _createForOfIteratorHelper(FACET_CHANNELS),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var channel = _step.value;\n        if (facet[channel]) {\n          name += \" + '__facet_\".concat(channel, \"_' + (facet[\").concat(stringValue(facetModel.vgField(channel)), \"])\");\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  }\n  return name;\n}\nexport function requiresSelectionId(model) {\n  var _a;\n  return vals((_a = model.component.selection) !== null && _a !== void 0 ? _a : {}).reduce(function (identifier, selCmpt) {\n    return identifier || selCmpt.project.hasSelectionId;\n  }, false);\n}\n// Binding a point selection to query widgets or legends disables default direct manipulation interaction.\n// A user can choose to re-enable it by explicitly specifying triggering input events.\nexport function disableDirectManipulation(selCmpt, selDef) {\n  if (isString(selDef.select) || !selDef.select.on) delete selCmpt.events;\n  if (isString(selDef.select) || !selDef.select.clear) delete selCmpt.clear;\n  if (isString(selDef.select) || !selDef.select.toggle) delete selCmpt.toggle;\n}","map":{"version":3,"sources":["../../../../src/compile/selection/index.ts"],"names":[],"mappings":";AAAA,SAAiB,QAAQ,QAAkC,MAAM;AACjE,SAAQ,WAAW,QAAO,WAAW;AACrC,SAAQ,cAAc,QAAO,eAAe;AAS5C,SAAc,IAAI,QAAO,YAAY;AAGrC,SAAQ,YAAY,QAAc,UAAU;AAE5C,OAAO,QAAQ,MAAM,YAAY;AACjC,OAAO,KAAK,MAAM,SAAS;AAG3B,OAAO,KAAK,MAAM,SAAS;AAC3B,OAAO,MAAM,MAAM,UAAU;AAC7B,OAAO,OAAO,MAAM,WAAW;AAC/B,OAAO,OAAO,MAAM,WAAW;AAC/B,OAAO,MAAM,MAAM,UAAU;AAC7B,OAAO,OAAO,MAAM,WAAW;AAC/B,OAAO,MAAM,MAAM,UAAU;AAC7B,OAAO,SAAS,MAAM,aAAa;AACnC,OAAO,IAAI,MAAM,QAAQ;AAGzB,OAAO,IAAM,KAAK,GAAG,QAAQ;AAC7B,OAAO,IAAM,KAAK,GAAG,QAAQ;AAC7B,OAAO,IAAM,MAAM,GAAG,SAAS;AAC/B,OAAO,IAAM,gBAAgB,GAAG,oBAAoB;AACpD,OAAO,IAAM,oBAAoB,GAAG,oBAAoB;AAgCxD;AACA,OAAO,IAAM,kBAAkB,GAAwB,CACrD,KAAK,EACL,QAAQ,EACR,OAAO,EACP,MAAM;AAEN;AACA,MAAM,EACN,MAAM,EACN,OAAO,EAEP,KAAK,EACL,SAAS,EACT,IAAI,EACJ,OAAO,CACR;AAED,SAAS,aAAa,CAAC,KAAY,EAAA;EACjC,IAAI,MAAM,GAAG,KAAK,CAAC,MAAM;EACzB,OAAO,MAAM,EAAE;IACb,IAAI,YAAY,CAAC,MAAM,CAAC,EAAE;IAC1B,MAAM,GAAG,MAAM,CAAC,MAAM;EACvB;EAED,OAAO,MAAoB;AAC7B;AAEA,OAAM,SAAU,QAAQ,CAAC,KAAY,EAA2B;EAAA,+EAAd;MAAC,MAAM,EAAE;IAAI,CAAC;IAAxB,MAAM,QAAN,MAAM;EAC5C,IAAI,IAAI,GAAG,MAAM,GAAG,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC,IAAI;EACxD,IAAM,UAAU,GAAG,aAAa,CAAC,KAAK,CAAC;EACvC,IAAI,UAAU,EAAE;IACd,IAAO,KAAK,GAAI,UAAU,CAAnB,KAAK;IAAe,2CACL,cAAc;MAAA;IAAA;MAApC,oDAAsC;QAAA,IAA3B,OAAO;QAChB,IAAI,KAAK,CAAC,OAAO,CAAC,EAAE;UAClB,IAAI,0BAAmB,OAAO,yBAAe,WAAW,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,OAAI;QAC1F;;IACF;MAAA;IAAA;MAAA;IAAA;EACF;EACD,OAAO,IAAI;AACb;AAEA,OAAM,SAAU,mBAAmB,CAAC,KAAY,EAAA;;EAC9C,OAAO,IAAI,CAAC,CAAA,EAAA,GAAA,KAAK,CAAC,SAAS,CAAC,SAAS,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAI,CAAA,CAAE,CAAC,CAAC,MAAM,CAAC,UAAC,UAAU,EAAE,OAAO,EAAI;IAC1E,OAAO,UAAU,IAAI,OAAO,CAAC,OAAO,CAAC,cAAc;EACrD,CAAC,EAAE,KAAK,CAAC;AACX;AAEA;AACA;AACA,OAAM,SAAU,yBAAyB,CAAC,OAA2B,EAAE,MAAmC,EAAA;EACxG,IAAI,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,OAAO,OAAO,CAAC,MAAM;EACvE,IAAI,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE,OAAO,OAAO,CAAC,KAAK;EACzE,IAAI,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,EAAE,OAAO,OAAO,CAAC,MAAM;AAC7E","sourceRoot":"","sourcesContent":["import { isString } from 'vega';\nimport { stringValue } from 'vega-util';\nimport { FACET_CHANNELS } from '../../channel';\nimport { vals } from '../../util';\nimport { isFacetModel } from '../model';\nimport interval from './interval';\nimport point from './point';\nimport clear from './clear';\nimport inputs from './inputs';\nimport nearest from './nearest';\nimport project from './project';\nimport scales from './scales';\nimport legends from './legends';\nimport toggle from './toggle';\nimport translate from './translate';\nimport zoom from './zoom';\nexport const STORE = '_store';\nexport const TUPLE = '_tuple';\nexport const MODIFY = '_modify';\nexport const SELECTION_DOMAIN = '_selection_domain_';\nexport const VL_SELECTION_RESOLVE = 'vlSelectionResolve';\n// Order matters for parsing and assembly.\nexport const selectionCompilers = [\n    point,\n    interval,\n    project,\n    toggle,\n    // Bindings may disable direct manipulation.\n    inputs,\n    scales,\n    legends,\n    clear,\n    translate,\n    zoom,\n    nearest\n];\nfunction getFacetModel(model) {\n    let parent = model.parent;\n    while (parent) {\n        if (isFacetModel(parent))\n            break;\n        parent = parent.parent;\n    }\n    return parent;\n}\nexport function unitName(model, { escape } = { escape: true }) {\n    let name = escape ? stringValue(model.name) : model.name;\n    const facetModel = getFacetModel(model);\n    if (facetModel) {\n        const { facet } = facetModel;\n        for (const channel of FACET_CHANNELS) {\n            if (facet[channel]) {\n                name += ` + '__facet_${channel}_' + (facet[${stringValue(facetModel.vgField(channel))}])`;\n            }\n        }\n    }\n    return name;\n}\nexport function requiresSelectionId(model) {\n    var _a;\n    return vals((_a = model.component.selection) !== null && _a !== void 0 ? _a : {}).reduce((identifier, selCmpt) => {\n        return identifier || selCmpt.project.hasSelectionId;\n    }, false);\n}\n// Binding a point selection to query widgets or legends disables default direct manipulation interaction.\n// A user can choose to re-enable it by explicitly specifying triggering input events.\nexport function disableDirectManipulation(selCmpt, selDef) {\n    if (isString(selDef.select) || !selDef.select.on)\n        delete selCmpt.events;\n    if (isString(selDef.select) || !selDef.select.clear)\n        delete selCmpt.clear;\n    if (isString(selDef.select) || !selDef.select.toggle)\n        delete selCmpt.toggle;\n}\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"module"}