{"ast":null,"code":"import _slicedToArray from \"/Users/weihangzhang/Documents/webpage/gosling-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"/Users/weihangzhang/Documents/webpage/gosling-react/src/example/WidgetEncoding.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef } from 'react';\nimport { GoslingComponent } from 'gosling.js';\nvar MARK_OPTIONS = ['point', 'bar', 'line', 'area'];\nvar LAYOUT_OPTIONS = ['linear', 'circular'];\nvar goslingSpec = function goslingSpec(mark, layout, binSize) {\n  return {\n    layout: layout,\n    arrangement: 'vertical',\n    centerRadius: 0.4,\n    xDomain: {\n      chromosome: '1'\n    },\n    style: {\n      select: {\n        color: 'black',\n        stroke: 'black',\n        strokeWidth: 6,\n        arrange: 'behind',\n        opacity: 0.1\n      }\n    },\n    views: [{\n      tracks: [{\n        id: 'widget-track',\n        data: {\n          url: 'https://server.gosling-lang.org/api/v1/tileset_info/?d=cistrome-multivec',\n          type: 'multivec',\n          row: 'sample',\n          column: 'position',\n          value: 'peak',\n          categories: Array.from(Array(6)).map(function (_, i) {\n            return \"sample \".concat(i);\n          }),\n          binSize: binSize === 0 ? 1 : binSize\n        },\n        mark: mark,\n        x: {\n          field: 'start',\n          type: 'genomic'\n        },\n        xe: {\n          field: 'end',\n          type: 'genomic'\n        },\n        row: {\n          field: 'sample',\n          type: 'nominal',\n          legend: false\n        },\n        y: {\n          field: 'peak',\n          type: 'quantitative',\n          axis: 'none'\n        },\n        color: {\n          field: 'sample',\n          type: 'nominal',\n          legend: true\n        },\n        tooltip: [{\n          field: 'start',\n          type: 'genomic',\n          alt: 'Start Position'\n        }, {\n          field: 'end',\n          type: 'genomic',\n          alt: 'End Position'\n        }, {\n          field: 'peak',\n          type: 'quantitative',\n          alt: 'Value',\n          format: '.2'\n        }, {\n          field: 'sample',\n          type: 'nominal',\n          alt: 'Sample'\n        }],\n        width: 600,\n        height: 230\n      }]\n    }]\n  };\n};\nfunction WidgetEncoding() {\n  _s();\n  var _this = this;\n  var gosRef = useRef(null);\n  var _useState = useState('point'),\n    _useState2 = _slicedToArray(_useState, 2),\n    mark = _useState2[0],\n    setMark = _useState2[1];\n  var _useState3 = useState('linear'),\n    _useState4 = _slicedToArray(_useState3, 2),\n    layout = _useState4[0],\n    setLayout = _useState4[1];\n  var _useState5 = useState(8),\n    _useState6 = _slicedToArray(_useState5, 2),\n    binSize = _useState6[0],\n    setBinSize = _useState6[1];\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: 30,\n      marginLeft: 80\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }\n  }, 'Bin Size: ', /*#__PURE__*/React.createElement(\"input\", {\n    type: \"range\",\n    min: 0,\n    max: 32,\n    step: 4,\n    value: binSize,\n    className: \"slider\",\n    id: \"bin-slider\",\n    style: {\n      width: 100,\n      display: 'inline',\n      margin: 10\n    },\n    onChange: function onChange(e) {\n      return setBinSize(+e.currentTarget.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 6\n    }\n  }), binSize === 0 ? 1 : binSize)), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: 30,\n      marginLeft: 80\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 4\n    }\n  }, 'Mark: ', /*#__PURE__*/React.createElement(\"select\", {\n    name: \"mark\",\n    onChange: function onChange(e) {\n      return setMark(e.currentTarget.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 5\n    }\n  }, MARK_OPTIONS.map(function (d) {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      key: d,\n      value: d,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 29\n      }\n    }, d);\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: 30,\n      marginLeft: 80\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 4\n    }\n  }, 'Layout: ', /*#__PURE__*/React.createElement(\"select\", {\n    name: \"layout\",\n    onChange: function onChange(e) {\n      return setLayout(e.currentTarget.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 5\n    }\n  }, LAYOUT_OPTIONS.map(function (d) {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      key: d,\n      value: d,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 31\n      }\n    }, d);\n  }))), /*#__PURE__*/React.createElement(GoslingComponent, {\n    ref: gosRef,\n    spec: goslingSpec(mark, layout, binSize),\n    experimental: {\n      reactive: true\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 4\n    }\n  }));\n}\n_s(WidgetEncoding, \"CfFdrYEqrNPX1FiiUnLeLybdIbI=\");\n_c = WidgetEncoding;\nexport default WidgetEncoding;\nvar _c;\n$RefreshReg$(_c, \"WidgetEncoding\");","map":{"version":3,"names":["React","useState","useRef","GoslingComponent","MARK_OPTIONS","LAYOUT_OPTIONS","goslingSpec","mark","layout","binSize","arrangement","centerRadius","xDomain","chromosome","style","select","color","stroke","strokeWidth","arrange","opacity","views","tracks","id","data","url","type","row","column","value","categories","Array","from","map","_","i","x","field","xe","legend","y","axis","tooltip","alt","format","width","height","WidgetEncoding","gosRef","setMark","setLayout","setBinSize","marginTop","marginLeft","display","margin","e","currentTarget","d","reactive"],"sources":["/Users/weihangzhang/Documents/webpage/gosling-react/src/example/WidgetEncoding.js"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport { GoslingComponent } from 'gosling.js';\n\nconst MARK_OPTIONS = ['point', 'bar', 'line', 'area'];\nconst LAYOUT_OPTIONS = ['linear', 'circular'];\n\nconst goslingSpec = (mark, layout, binSize) => {\n\treturn {\n\t\tlayout,\n\t\tarrangement: 'vertical',\n\t\tcenterRadius: 0.4,\n\t\txDomain: { chromosome: '1' },\n\t\tstyle: {\n\t\t\tselect: { color: 'black', stroke: 'black', strokeWidth: 6, arrange: 'behind', opacity: 0.1 }\n\t\t},\n\t\tviews: [\n\t\t\t{\n\t\t\t\ttracks: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'widget-track',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\turl: 'https://server.gosling-lang.org/api/v1/tileset_info/?d=cistrome-multivec',\n\t\t\t\t\t\t\ttype: 'multivec',\n\t\t\t\t\t\t\trow: 'sample',\n\t\t\t\t\t\t\tcolumn: 'position',\n\t\t\t\t\t\t\tvalue: 'peak',\n\t\t\t\t\t\t\tcategories: Array.from(Array(6)).map((_, i) => `sample ${i}`),\n\t\t\t\t\t\t\tbinSize: binSize === 0 ? 1 : binSize\n\t\t\t\t\t\t},\n\t\t\t\t\t\tmark: mark,\n\t\t\t\t\t\tx: { field: 'start', type: 'genomic' },\n\t\t\t\t\t\txe: { field: 'end', type: 'genomic' },\n\t\t\t\t\t\trow: { field: 'sample', type: 'nominal', legend: false },\n\t\t\t\t\t\ty: { field: 'peak', type: 'quantitative', axis: 'none' },\n\t\t\t\t\t\tcolor: { field: 'sample', type: 'nominal', legend: true },\n\t\t\t\t\t\ttooltip: [\n\t\t\t\t\t\t\t{ field: 'start', type: 'genomic', alt: 'Start Position' },\n\t\t\t\t\t\t\t{ field: 'end', type: 'genomic', alt: 'End Position' },\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfield: 'peak',\n\t\t\t\t\t\t\t\ttype: 'quantitative',\n\t\t\t\t\t\t\t\talt: 'Value',\n\t\t\t\t\t\t\t\tformat: '.2'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{ field: 'sample', type: 'nominal', alt: 'Sample' }\n\t\t\t\t\t\t],\n\t\t\t\t\t\twidth: 600,\n\t\t\t\t\t\theight: 230\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t]\n\t}\n};\n\nfunction WidgetEncoding() {\n\tconst gosRef = useRef(null);\n\n\tconst [mark, setMark] = useState('point');\n\tconst [layout, setLayout] = useState('linear');\n\tconst [binSize, setBinSize] = useState(8);\n\n\treturn (\n\t\t<>\n\t\t\t<span>\n\t\t\t\t<div style={{ marginTop: 30, marginLeft: 80 }}>\n\t\t\t\t\t{'Bin Size: '}\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"range\"\n\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\tmax={32}\n\t\t\t\t\t\tstep={4}\n\t\t\t\t\t\tvalue={binSize}\n\t\t\t\t\t\tclassName=\"slider\"\n\t\t\t\t\t\tid=\"bin-slider\"\n\t\t\t\t\t\tstyle={{ width: 100, display: 'inline', margin: 10 }}\n\t\t\t\t\t\tonChange={(e) => setBinSize(+e.currentTarget.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t{binSize === 0 ? 1 : binSize}\n\t\t\t\t</div>\n\t\t\t</span>\n\t\t\t<div style={{ marginTop: 30, marginLeft: 80 }}>\n\t\t\t\t{'Mark: '}\n\t\t\t\t<select name=\"mark\" onChange={(e) => setMark(e.currentTarget.value)}>\n\t\t\t\t\t{MARK_OPTIONS.map(d => <option key={d} value={d}>{d}</option>)}\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t\t<div style={{ marginTop: 30, marginLeft: 80 }}>\n\t\t\t\t{'Layout: '}\n\t\t\t\t<select name=\"layout\" onChange={(e) => setLayout(e.currentTarget.value)}>\n\t\t\t\t\t{LAYOUT_OPTIONS.map(d => <option key={d} value={d}>{d}</option>)}\n\t\t\t\t</select>\n\t\t\t</div>\n\n\t\t\t<GoslingComponent\n\t\t\t\tref={gosRef}\n\t\t\t\tspec={goslingSpec(mark, layout, binSize)}\n\t\t\t\texperimental={{ reactive: true }}\n\t\t\t/>\n\t\t</>\n\t);\n}\n\nexport default WidgetEncoding;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}