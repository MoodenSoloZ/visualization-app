{"ast":null,"code":"import _slicedToArray from \"/Users/weihangzhang/Documents/webpage/gosling-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"/Users/weihangzhang/Documents/webpage/gosling-react/src/example/MouseEvents.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { GoslingComponent } from 'gosling.js';\nfunction MouseEvents() {\n  _s();\n  var _this = this;\n  var gosRef = useRef();\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    position = _useState2[0],\n    setPosition = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    data = _useState4[0],\n    setData = _useState4[1];\n  useEffect(function () {\n    if (!gosRef.current) return;\n    gosRef.current.api.subscribe('click', function (_, eventData) {\n      var p = eventData.genomicPosition;\n      setPosition(\"\".concat(p.chromosome, \":\").concat(p.position));\n      setData(eventData.data);\n    });\n    gosRef.current.api.subscribe('rangeSelect', function (_, eventData) {\n      if (!eventData || !eventData.genomicRange) {\n        // range selection cleared\n        setPosition('N/A');\n        setData([]);\n      } else {\n        var p = eventData.genomicRange;\n        if (p.length === 2) setPosition(\"\".concat(p[0].chromosome, \":\").concat(p[0].position, \"-\").concat(p[1].chromosome, \":\").concat(p[1].position));\n        setData(eventData.data.length > 10 ? eventData.data.slice(0, 10) : eventData.data);\n      }\n    });\n    return function () {\n      gosRef.current.api.unsubscribe('click');\n      gosRef.current.api.unsubscribe('rangeSelect');\n    };\n  }, [gosRef]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: 30,\n      marginLeft: 80\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 4\n    }\n  }, \"Selected Position: \", position ? position : 'N/A'), /*#__PURE__*/React.createElement(GoslingComponent, {\n    ref: gosRef,\n    spec: {\n      style: {\n        outlineWidth: 0,\n        select: {\n          color: 'grey'\n        },\n        mouseOver: {\n          stroke: 'black',\n          strokeWidth: 1\n        }\n      },\n      xDomain: {\n        chromosome: '1',\n        interval: [136750, 139450]\n      },\n      spacing: 0,\n      tracks: [{\n        title: 'Click or mouse drag w/ ALT',\n        experimental: {\n          mouseEvents: true\n        },\n        data: {\n          type: 'bam',\n          url: 'https://somatic-browser-test.s3.amazonaws.com/SRR7890905_GAPFI2USVS21.bam',\n          indexUrl: 'https://somatic-browser-test.s3.amazonaws.com/SRR7890905_GAPFI2USVS21.bam.bai'\n        },\n        mark: 'rect',\n        dataTransform: [{\n          type: 'displace',\n          method: 'pile',\n          boundingBox: {\n            startField: 'start',\n            endField: 'end',\n            padding: 5,\n            isPaddingBP: true\n          },\n          newField: 'pileup-row'\n        }],\n        x: {\n          field: 'start',\n          type: 'genomic'\n        },\n        xe: {\n          field: 'end',\n          type: 'genomic'\n        },\n        color: {\n          value: 'lightgrey'\n        },\n        tooltip: [{\n          field: 'start',\n          type: 'genomic'\n        }, {\n          field: 'end',\n          type: 'genomic'\n        }, {\n          field: 'strand',\n          type: 'nominal'\n        }],\n        row: {\n          field: 'pileup-row',\n          type: 'nominal',\n          padding: 0.2\n        },\n        width: 500,\n        height: 400\n      }]\n    },\n    experimental: {\n      reactive: true\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 4\n    }\n  }), data.length === 0 ? null : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mx-[60px]\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table-fixed border-collapse border border-slate-400\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    className: \"capitalize\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    className: \"border border-slate-300  bg-slate-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 10\n    }\n  }, Object.keys(data[0]).map(function (d) {\n    return /*#__PURE__*/React.createElement(\"th\", {\n      className: \"px-1\",\n      key: d,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 95\n      }\n    }, d);\n  }))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 6\n    }\n  }, data.map(function (d) {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      className: \"border border-slate-300\",\n      key: JSON.stringify(d),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 22\n      }\n    }, Object.entries(d).map(function (datum) {\n      return /*#__PURE__*/React.createElement(\"td\", {\n        className: \"px-1\",\n        key: datum[0],\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 118\n        }\n      }, datum[1]);\n    }));\n  })))));\n}\n_s(MouseEvents, \"NyNXMNG8lX/qZfU8tOv6MBuMqHM=\");\n_c = MouseEvents;\nexport default MouseEvents;\nvar _c;\n$RefreshReg$(_c, \"MouseEvents\");","map":{"version":3,"names":["React","useEffect","useRef","useState","GoslingComponent","MouseEvents","gosRef","position","setPosition","data","setData","current","api","subscribe","_","eventData","p","genomicPosition","chromosome","genomicRange","length","slice","unsubscribe","marginTop","marginLeft","style","outlineWidth","select","color","mouseOver","stroke","strokeWidth","xDomain","interval","spacing","tracks","title","experimental","mouseEvents","type","url","indexUrl","mark","dataTransform","method","boundingBox","startField","endField","padding","isPaddingBP","newField","x","field","xe","value","tooltip","row","width","height","reactive","Object","keys","map","d","JSON","stringify","entries","datum"],"sources":["/Users/weihangzhang/Documents/webpage/gosling-react/src/example/MouseEvents.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { GoslingComponent } from 'gosling.js';\n\nfunction MouseEvents() {\n\n\tconst gosRef = useRef();\n\tconst [position, setPosition] = useState();\n\tconst [data, setData] = useState([]);\n\n\tuseEffect(() => {\n\t\tif(!gosRef.current) return;\n\n\t\tgosRef.current.api.subscribe('click', (_, eventData) => {\n\t\t\tconst { genomicPosition: p } = eventData;\n\t\t\tsetPosition(`${p.chromosome}:${p.position}`)\n\t\t\tsetData(eventData.data);\n\t\t});\n\n\t\tgosRef.current.api.subscribe('rangeSelect', (_, eventData) => {\n\t\t\tif(!eventData || !eventData.genomicRange) {\n\t\t\t\t// range selection cleared\n\t\t\t\tsetPosition('N/A');\n\t\t\t\tsetData([]);\n\t\t\t} else {\n\t\t\t\tconst { genomicRange: p } = eventData;\n\t\t\t\tif(p.length === 2) setPosition(`${p[0].chromosome}:${p[0].position}-${p[1].chromosome}:${p[1].position}`);\n\t\t\t\tsetData(eventData.data.length > 10 ? eventData.data.slice(0, 10) : eventData.data);\n\t\t\t}\n\t\t});\n\n\t\treturn () => {\n\t\t\tgosRef.current.api.unsubscribe('click');\n\t\t\tgosRef.current.api.unsubscribe('rangeSelect');\n\t\t}\n\t}, [gosRef]);\n\n\treturn (\n\t\t<div>\n\t\t\t<div style={{ marginTop: 30, marginLeft: 80 }}>\n\t\t\t\tSelected Position: {position ? position : 'N/A'}\n\t\t\t</div>\n\t\t\t<GoslingComponent\n\t\t\t\tref={gosRef}\n\t\t\t\tspec={{ \n\t\t\t\t\tstyle: { \n\t\t\t\t\t\toutlineWidth: 0,\n\t\t\t\t\t\tselect: { color: 'grey' },\n\t\t\t\t\t\tmouseOver: { stroke: 'black', strokeWidth: 1 }\n\t\t\t\t\t},\n\t\t\t\t\txDomain: {chromosome: '1', interval: [136750, 139450]},\n\t\t\t\t\tspacing: 0,\n\t\t\t\t\ttracks: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Click or mouse drag w/ ALT',\n\t\t\t\t\t\t\texperimental: { mouseEvents: true },\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\ttype: 'bam',\n\t\t\t\t\t\t\t\turl: 'https://somatic-browser-test.s3.amazonaws.com/SRR7890905_GAPFI2USVS21.bam',\n\t\t\t\t\t\t\t\tindexUrl: 'https://somatic-browser-test.s3.amazonaws.com/SRR7890905_GAPFI2USVS21.bam.bai'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tmark: 'rect',\n\t\t\t\t\t\t\tdataTransform: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttype: 'displace',\n\t\t\t\t\t\t\t\t\tmethod: 'pile',\n\t\t\t\t\t\t\t\t\tboundingBox: {\n\t\t\t\t\t\t\t\t\t\tstartField: 'start',\n\t\t\t\t\t\t\t\t\t\tendField: 'end',\n\t\t\t\t\t\t\t\t\t\tpadding: 5,\n\t\t\t\t\t\t\t\t\t\tisPaddingBP: true\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tnewField: 'pileup-row'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tx: {field: 'start', type: 'genomic'},\n\t\t\t\t\t\t\txe: {field: 'end', type: 'genomic'},\n\t\t\t\t\t\t\tcolor: { value: 'lightgrey' },\n\t\t\t\t\t\t\ttooltip: [\n\t\t\t\t\t\t\t\t{field: 'start', type: 'genomic'},\n\t\t\t\t\t\t\t\t{field: 'end', type: 'genomic'},\n\t\t\t\t\t\t\t\t{field: 'strand', type: 'nominal'},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\trow: {field: 'pileup-row', type: 'nominal', padding: 0.2},\n\t\t\t\t\t\t\twidth: 500,\n\t\t\t\t\t\t\theight: 400\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}}\n\t\t\t\texperimental={{ reactive: true }}\n\t\t\t/>\n\t\t\t{data.length === 0 ? null : (<div  className='mx-[60px]'>\n\t\t\t\t<table className='table-fixed border-collapse border border-slate-400'>\n\t\t\t\t\t<thead className='capitalize'>\n\t\t\t\t\t    <tr className='border border-slate-300  bg-slate-100'>{Object.keys(data[0]).map(d => <th className='px-1' key={d}>{d}</th>)}</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{data.map(d => <tr className='border border-slate-300' key={JSON.stringify(d)}>{Object.entries(d).map(datum => <td className='px-1' key={datum[0]}>{datum[1]}</td>)}</tr>)}\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>)}\n\t\t</div>\n\t);\n}\n\nexport default MouseEvents;\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAC1D,SAASC,gBAAgB,QAAQ,YAAY;AAE7C,SAASC,WAAW,GAAG;EAAA;EAAA;EAEtB,IAAMC,MAAM,GAAGJ,MAAM,EAAE;EACvB,gBAAgCC,QAAQ,EAAE;IAAA;IAAnCI,QAAQ;IAAEC,WAAW;EAC5B,iBAAwBL,QAAQ,CAAC,EAAE,CAAC;IAAA;IAA7BM,IAAI;IAAEC,OAAO;EAEpBT,SAAS,CAAC,YAAM;IACf,IAAG,CAACK,MAAM,CAACK,OAAO,EAAE;IAEpBL,MAAM,CAACK,OAAO,CAACC,GAAG,CAACC,SAAS,CAAC,OAAO,EAAE,UAACC,CAAC,EAAEC,SAAS,EAAK;MACvD,IAAyBC,CAAC,GAAKD,SAAS,CAAhCE,eAAe;MACvBT,WAAW,WAAIQ,CAAC,CAACE,UAAU,cAAIF,CAAC,CAACT,QAAQ,EAAG;MAC5CG,OAAO,CAACK,SAAS,CAACN,IAAI,CAAC;IACxB,CAAC,CAAC;IAEFH,MAAM,CAACK,OAAO,CAACC,GAAG,CAACC,SAAS,CAAC,aAAa,EAAE,UAACC,CAAC,EAAEC,SAAS,EAAK;MAC7D,IAAG,CAACA,SAAS,IAAI,CAACA,SAAS,CAACI,YAAY,EAAE;QACzC;QACAX,WAAW,CAAC,KAAK,CAAC;QAClBE,OAAO,CAAC,EAAE,CAAC;MACZ,CAAC,MAAM;QACN,IAAsBM,CAAC,GAAKD,SAAS,CAA7BI,YAAY;QACpB,IAAGH,CAAC,CAACI,MAAM,KAAK,CAAC,EAAEZ,WAAW,WAAIQ,CAAC,CAAC,CAAC,CAAC,CAACE,UAAU,cAAIF,CAAC,CAAC,CAAC,CAAC,CAACT,QAAQ,cAAIS,CAAC,CAAC,CAAC,CAAC,CAACE,UAAU,cAAIF,CAAC,CAAC,CAAC,CAAC,CAACT,QAAQ,EAAG;QACzGG,OAAO,CAACK,SAAS,CAACN,IAAI,CAACW,MAAM,GAAG,EAAE,GAAGL,SAAS,CAACN,IAAI,CAACY,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,GAAGN,SAAS,CAACN,IAAI,CAAC;MACnF;IACD,CAAC,CAAC;IAEF,OAAO,YAAM;MACZH,MAAM,CAACK,OAAO,CAACC,GAAG,CAACU,WAAW,CAAC,OAAO,CAAC;MACvChB,MAAM,CAACK,OAAO,CAACC,GAAG,CAACU,WAAW,CAAC,aAAa,CAAC;IAC9C,CAAC;EACF,CAAC,EAAE,CAAChB,MAAM,CAAC,CAAC;EAEZ,oBACC;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACC;IAAK,KAAK,EAAE;MAAEiB,SAAS,EAAE,EAAE;MAAEC,UAAU,EAAE;IAAG,CAAE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,0BACzBjB,QAAQ,GAAGA,QAAQ,GAAG,KAAK,CAC1C,eACN,oBAAC,gBAAgB;IAChB,GAAG,EAAED,MAAO;IACZ,IAAI,EAAE;MACLmB,KAAK,EAAE;QACNC,YAAY,EAAE,CAAC;QACfC,MAAM,EAAE;UAAEC,KAAK,EAAE;QAAO,CAAC;QACzBC,SAAS,EAAE;UAAEC,MAAM,EAAE,OAAO;UAAEC,WAAW,EAAE;QAAE;MAC9C,CAAC;MACDC,OAAO,EAAE;QAACd,UAAU,EAAE,GAAG;QAAEe,QAAQ,EAAE,CAAC,MAAM,EAAE,MAAM;MAAC,CAAC;MACtDC,OAAO,EAAE,CAAC;MACVC,MAAM,EAAE,CACP;QACCC,KAAK,EAAE,4BAA4B;QACnCC,YAAY,EAAE;UAAEC,WAAW,EAAE;QAAK,CAAC;QACnC7B,IAAI,EAAE;UACL8B,IAAI,EAAE,KAAK;UACXC,GAAG,EAAE,2EAA2E;UAChFC,QAAQ,EAAE;QACX,CAAC;QACDC,IAAI,EAAE,MAAM;QACZC,aAAa,EAAE,CACd;UACCJ,IAAI,EAAE,UAAU;UAChBK,MAAM,EAAE,MAAM;UACdC,WAAW,EAAE;YACZC,UAAU,EAAE,OAAO;YACnBC,QAAQ,EAAE,KAAK;YACfC,OAAO,EAAE,CAAC;YACVC,WAAW,EAAE;UACd,CAAC;UACDC,QAAQ,EAAE;QACX,CAAC,CACD;QACDC,CAAC,EAAE;UAACC,KAAK,EAAE,OAAO;UAAEb,IAAI,EAAE;QAAS,CAAC;QACpCc,EAAE,EAAE;UAACD,KAAK,EAAE,KAAK;UAAEb,IAAI,EAAE;QAAS,CAAC;QACnCX,KAAK,EAAE;UAAE0B,KAAK,EAAE;QAAY,CAAC;QAC7BC,OAAO,EAAE,CACR;UAACH,KAAK,EAAE,OAAO;UAAEb,IAAI,EAAE;QAAS,CAAC,EACjC;UAACa,KAAK,EAAE,KAAK;UAAEb,IAAI,EAAE;QAAS,CAAC,EAC/B;UAACa,KAAK,EAAE,QAAQ;UAAEb,IAAI,EAAE;QAAS,CAAC,CAClC;QACDiB,GAAG,EAAE;UAACJ,KAAK,EAAE,YAAY;UAAEb,IAAI,EAAE,SAAS;UAAES,OAAO,EAAE;QAAG,CAAC;QACzDS,KAAK,EAAE,GAAG;QACVC,MAAM,EAAE;MACT,CAAC;IAEH,CAAE;IACF,YAAY,EAAE;MAAEC,QAAQ,EAAE;IAAK,CAAE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAChC,EACDlD,IAAI,CAACW,MAAM,KAAK,CAAC,GAAG,IAAI,gBAAI;IAAM,SAAS,EAAC,WAAW;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACvD;IAAO,SAAS,EAAC,qDAAqD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACrE;IAAO,SAAS,EAAC,YAAY;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACzB;IAAI,SAAS,EAAC,uCAAuC;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAAEwC,MAAM,CAACC,IAAI,CAACpD,IAAI,CAAC,CAAC,CAAC,CAAC,CAACqD,GAAG,CAAC,UAAAC,CAAC;IAAA,oBAAI;MAAI,SAAS,EAAC,MAAM;MAAC,GAAG,EAAEA,CAAE;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GAAEA,CAAC,CAAM;EAAA,EAAC,CAAM,CAC7H,eACR;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACEtD,IAAI,CAACqD,GAAG,CAAC,UAAAC,CAAC;IAAA,oBAAI;MAAI,SAAS,EAAC,yBAAyB;MAAC,GAAG,EAAEC,IAAI,CAACC,SAAS,CAACF,CAAC,CAAE;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GAAEH,MAAM,CAACM,OAAO,CAACH,CAAC,CAAC,CAACD,GAAG,CAAC,UAAAK,KAAK;MAAA,oBAAI;QAAI,SAAS,EAAC,MAAM;QAAC,GAAG,EAAEA,KAAK,CAAC,CAAC,CAAE;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,GAAEA,KAAK,CAAC,CAAC,CAAC,CAAM;IAAA,EAAC,CAAM;EAAA,EAAC,CACnK,CACD,CACF,CACF;AAER;AAAC,GAnGQ9D,WAAW;AAAA,KAAXA,WAAW;AAqGpB,eAAeA,WAAW;AAAC;AAAA"},"metadata":{},"sourceType":"module"}