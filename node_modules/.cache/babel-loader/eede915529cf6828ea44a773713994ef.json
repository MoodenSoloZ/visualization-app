{"ast":null,"code":"import _slicedToArray from \"/Users/weihangzhang/Documents/webpage/visualization-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _regeneratorRuntime from \"/Users/weihangzhang/Documents/webpage/visualization-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _createForOfIteratorHelper from \"/Users/weihangzhang/Documents/webpage/visualization-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nvar _marked = /*#__PURE__*/_regeneratorRuntime().mark(numbers);\nimport { ascending, quantileSorted, deviation, quantile, median } from 'd3-array';\nfunction numbers(values, valueof) {\n  var _iterator, _step, value, index, _iterator2, _step2, _value;\n  return _regeneratorRuntime().wrap(function numbers$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          if (!(valueof == null)) {\n            _context.next = 21;\n            break;\n          }\n          _iterator = _createForOfIteratorHelper(values);\n          _context.prev = 2;\n          _iterator.s();\n        case 4:\n          if ((_step = _iterator.n()).done) {\n            _context.next = 11;\n            break;\n          }\n          value = _step.value;\n          if (!(value != null && value !== '' && (value = +value) >= value)) {\n            _context.next = 9;\n            break;\n          }\n          _context.next = 9;\n          return value;\n        case 9:\n          _context.next = 4;\n          break;\n        case 11:\n          _context.next = 16;\n          break;\n        case 13:\n          _context.prev = 13;\n          _context.t0 = _context[\"catch\"](2);\n          _iterator.e(_context.t0);\n        case 16:\n          _context.prev = 16;\n          _iterator.f();\n          return _context.finish(16);\n        case 19:\n          _context.next = 41;\n          break;\n        case 21:\n          index = -1;\n          _iterator2 = _createForOfIteratorHelper(values);\n          _context.prev = 23;\n          _iterator2.s();\n        case 25:\n          if ((_step2 = _iterator2.n()).done) {\n            _context.next = 33;\n            break;\n          }\n          _value = _step2.value;\n          _value = valueof(_value, ++index, values);\n          if (!(_value != null && _value !== '' && (_value = +_value) >= _value)) {\n            _context.next = 31;\n            break;\n          }\n          _context.next = 31;\n          return _value;\n        case 31:\n          _context.next = 25;\n          break;\n        case 33:\n          _context.next = 38;\n          break;\n        case 35:\n          _context.prev = 35;\n          _context.t1 = _context[\"catch\"](23);\n          _iterator2.e(_context.t1);\n        case 38:\n          _context.prev = 38;\n          _iterator2.f();\n          return _context.finish(38);\n        case 41:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, null, [[2, 13, 16, 19], [23, 35, 38, 41]]);\n}\nfunction quantiles(array, p, f) {\n  var values = Float64Array.from(numbers(array, f)); // don't depend on return value from typed array sort call\n  // protects against undefined sort results in Safari (vega/vega-lite#4964)\n\n  values.sort(ascending);\n  return p.map(function (_) {\n    return quantileSorted(values, _);\n  });\n}\nfunction quartiles(array, f) {\n  return quantiles(array, [0.25, 0.50, 0.75], f);\n}\n\n// Theory, Practice, and Visualization. Wiley.\n\nfunction estimateBandwidth(array, f) {\n  var n = array.length,\n    d = deviation(array, f),\n    q = quartiles(array, f),\n    h = (q[2] - q[0]) / 1.34,\n    v = Math.min(d, h) || d || Math.abs(q[0]) || 1;\n  return 1.06 * v * Math.pow(n, -0.2);\n}\nfunction bin(_) {\n  // determine range\n  var maxb = _.maxbins || 20,\n    base = _.base || 10,\n    logb = Math.log(base),\n    div = _.divide || [5, 2];\n  var min = _.extent[0],\n    max = _.extent[1],\n    step,\n    level,\n    minstep,\n    v,\n    i,\n    n;\n  var span = _.span || max - min || Math.abs(min) || 1;\n  if (_.step) {\n    // if step size is explicitly given, use that\n    step = _.step;\n  } else if (_.steps) {\n    // if provided, limit choice to acceptable step sizes\n    v = span / maxb;\n    for (i = 0, n = _.steps.length; i < n && _.steps[i] < v; ++i) {\n      ;\n    }\n    step = _.steps[Math.max(0, i - 1)];\n  } else {\n    // else use span to determine step size\n    level = Math.ceil(Math.log(maxb) / logb);\n    minstep = _.minstep || 0;\n    step = Math.max(minstep, Math.pow(base, Math.round(Math.log(span) / logb) - level)); // increase step size if too many bins\n\n    while (Math.ceil(span / step) > maxb) {\n      step *= base;\n    } // decrease step size if allowed\n\n    for (i = 0, n = div.length; i < n; ++i) {\n      v = step / div[i];\n      if (v >= minstep && span / v <= maxb) step = v;\n    }\n  } // update precision, min and max\n\n  v = Math.log(step);\n  var precision = v >= 0 ? 0 : ~~(-v / logb) + 1,\n    eps = Math.pow(base, -precision - 1);\n  if (_.nice || _.nice === undefined) {\n    v = Math.floor(min / step + eps) * step;\n    min = min < v ? v - step : v;\n    max = Math.ceil(max / step) * step;\n  }\n  return {\n    start: min,\n    stop: max === min ? min + step : max,\n    step: step\n  };\n}\nvar random = Math.random;\nfunction setRandom(r) {\n  random = r;\n}\nfunction bootstrapCI(array, samples, alpha, f) {\n  if (!array.length) return [undefined, undefined];\n  var values = Float64Array.from(numbers(array, f)),\n    n = values.length,\n    m = samples;\n  var a, i, j, mu;\n  for (j = 0, mu = Array(m); j < m; ++j) {\n    for (a = 0, i = 0; i < n; ++i) {\n      a += values[~~(random() * n)];\n    }\n    mu[j] = a / n;\n  }\n  mu.sort(ascending);\n  return [quantile(mu, alpha / 2), quantile(mu, 1 - alpha / 2)];\n}\n\n// Dot density binning for dot plot construction.\n// Based on Leland Wilkinson, Dot Plots, The American Statistician, 1999.\n// https://www.cs.uic.edu/~wilkinson/Publications/dotplots.pdf\nfunction dotbin(array, step, smooth, f) {\n  f = f || function (_) {\n    return _;\n  };\n  var n = array.length,\n    v = new Float64Array(n);\n  var i = 0,\n    j = 1,\n    a = f(array[0]),\n    b = a,\n    w = a + step,\n    x;\n  for (; j < n; ++j) {\n    x = f(array[j]);\n    if (x >= w) {\n      b = (a + b) / 2;\n      for (; i < j; ++i) {\n        v[i] = b;\n      }\n      w = x + step;\n      a = x;\n    }\n    b = x;\n  }\n  b = (a + b) / 2;\n  for (; i < j; ++i) {\n    v[i] = b;\n  }\n  return smooth ? smoothing(v, step + step / 4) : v;\n} // perform smoothing to reduce variance\n// swap points between \"adjacent\" stacks\n// Wilkinson defines adjacent as within step/4 units\n\nfunction smoothing(v, thresh) {\n  var n = v.length;\n  var a = 0,\n    b = 1,\n    c,\n    d; // get left stack\n\n  while (v[a] === v[b]) {\n    ++b;\n  }\n  while (b < n) {\n    // get right stack\n    c = b + 1;\n    while (v[b] === v[c]) {\n      ++c;\n    } // are stacks adjacent?\n    // if so, compare sizes and swap as needed\n\n    if (v[b] - v[b - 1] < thresh) {\n      d = b + (a + c - b - b >> 1);\n      while (d < b) {\n        v[d++] = v[b];\n      }\n      while (d > b) {\n        v[d--] = v[a];\n      }\n    } // update left stack indices\n\n    a = b;\n    b = c;\n  }\n  return v;\n}\nfunction lcg(seed) {\n  // Random numbers using a Linear Congruential Generator with seed value\n  // Uses glibc values from https://en.wikipedia.org/wiki/Linear_congruential_generator\n  return function () {\n    seed = (1103515245 * seed + 12345) % 2147483647;\n    return seed / 2147483647;\n  };\n}\nfunction integer(min, max) {\n  if (max == null) {\n    max = min;\n    min = 0;\n  }\n  var a, b, d;\n  var dist = {\n    min: function min(_) {\n      if (arguments.length) {\n        a = _ || 0;\n        d = b - a;\n        return dist;\n      } else {\n        return a;\n      }\n    },\n    max: function max(_) {\n      if (arguments.length) {\n        b = _ || 0;\n        d = b - a;\n        return dist;\n      } else {\n        return b;\n      }\n    },\n    sample: function sample() {\n      return a + Math.floor(d * random());\n    },\n    pdf: function pdf(x) {\n      return x === Math.floor(x) && x >= a && x < b ? 1 / d : 0;\n    },\n    cdf: function cdf(x) {\n      var v = Math.floor(x);\n      return v < a ? 0 : v >= b ? 1 : (v - a + 1) / d;\n    },\n    icdf: function icdf(p) {\n      return p >= 0 && p <= 1 ? a - 1 + Math.floor(p * d) : NaN;\n    }\n  };\n  return dist.min(min).max(max);\n}\nvar SQRT2PI = Math.sqrt(2 * Math.PI);\nvar SQRT2 = Math.SQRT2;\nvar nextSample = NaN;\nfunction sampleNormal(mean, stdev) {\n  mean = mean || 0;\n  stdev = stdev == null ? 1 : stdev;\n  var x = 0,\n    y = 0,\n    rds,\n    c;\n  if (nextSample === nextSample) {\n    x = nextSample;\n    nextSample = NaN;\n  } else {\n    do {\n      x = random() * 2 - 1;\n      y = random() * 2 - 1;\n      rds = x * x + y * y;\n    } while (rds === 0 || rds > 1);\n    c = Math.sqrt(-2 * Math.log(rds) / rds); // Box-Muller transform\n\n    x *= c;\n    nextSample = y * c;\n  }\n  return mean + x * stdev;\n}\nfunction densityNormal(value, mean, stdev) {\n  stdev = stdev == null ? 1 : stdev;\n  var z = (value - (mean || 0)) / stdev;\n  return Math.exp(-0.5 * z * z) / (stdev * SQRT2PI);\n} // Approximation from West (2009)\n// Better Approximations to Cumulative Normal Functions\n\nfunction cumulativeNormal(value, mean, stdev) {\n  mean = mean || 0;\n  stdev = stdev == null ? 1 : stdev;\n  var z = (value - mean) / stdev,\n    Z = Math.abs(z);\n  var cd;\n  if (Z > 37) {\n    cd = 0;\n  } else {\n    var _exp = Math.exp(-Z * Z / 2);\n    var sum;\n    if (Z < 7.07106781186547) {\n      sum = 3.52624965998911e-02 * Z + 0.700383064443688;\n      sum = sum * Z + 6.37396220353165;\n      sum = sum * Z + 33.912866078383;\n      sum = sum * Z + 112.079291497871;\n      sum = sum * Z + 221.213596169931;\n      sum = sum * Z + 220.206867912376;\n      cd = _exp * sum;\n      sum = 8.83883476483184e-02 * Z + 1.75566716318264;\n      sum = sum * Z + 16.064177579207;\n      sum = sum * Z + 86.7807322029461;\n      sum = sum * Z + 296.564248779674;\n      sum = sum * Z + 637.333633378831;\n      sum = sum * Z + 793.826512519948;\n      sum = sum * Z + 440.413735824752;\n      cd = cd / sum;\n    } else {\n      sum = Z + 0.65;\n      sum = Z + 4 / sum;\n      sum = Z + 3 / sum;\n      sum = Z + 2 / sum;\n      sum = Z + 1 / sum;\n      cd = _exp / sum / 2.506628274631;\n    }\n  }\n  return z > 0 ? 1 - cd : cd;\n} // Approximation of Probit function using inverse error function.\n\nfunction quantileNormal(p, mean, stdev) {\n  if (p < 0 || p > 1) return NaN;\n  return (mean || 0) + (stdev == null ? 1 : stdev) * SQRT2 * erfinv(2 * p - 1);\n} // Approximate inverse error function. Implementation from \"Approximating\n// the erfinv function\" by Mike Giles, GPU Computing Gems, volume 2, 2010.\n// Ported from Apache Commons Math, http://www.apache.org/licenses/LICENSE-2.0\n\nfunction erfinv(x) {\n  // beware that the logarithm argument must be\n  // commputed as (1.0 - x) * (1.0 + x),\n  // it must NOT be simplified as 1.0 - x * x as this\n  // would induce rounding errors near the boundaries +/-1\n  var w = -Math.log((1 - x) * (1 + x)),\n    p;\n  if (w < 6.25) {\n    w -= 3.125;\n    p = -3.6444120640178196996e-21;\n    p = -1.685059138182016589e-19 + p * w;\n    p = 1.2858480715256400167e-18 + p * w;\n    p = 1.115787767802518096e-17 + p * w;\n    p = -1.333171662854620906e-16 + p * w;\n    p = 2.0972767875968561637e-17 + p * w;\n    p = 6.6376381343583238325e-15 + p * w;\n    p = -4.0545662729752068639e-14 + p * w;\n    p = -8.1519341976054721522e-14 + p * w;\n    p = 2.6335093153082322977e-12 + p * w;\n    p = -1.2975133253453532498e-11 + p * w;\n    p = -5.4154120542946279317e-11 + p * w;\n    p = 1.051212273321532285e-09 + p * w;\n    p = -4.1126339803469836976e-09 + p * w;\n    p = -2.9070369957882005086e-08 + p * w;\n    p = 4.2347877827932403518e-07 + p * w;\n    p = -1.3654692000834678645e-06 + p * w;\n    p = -1.3882523362786468719e-05 + p * w;\n    p = 0.0001867342080340571352 + p * w;\n    p = -0.00074070253416626697512 + p * w;\n    p = -0.0060336708714301490533 + p * w;\n    p = 0.24015818242558961693 + p * w;\n    p = 1.6536545626831027356 + p * w;\n  } else if (w < 16.0) {\n    w = Math.sqrt(w) - 3.25;\n    p = 2.2137376921775787049e-09;\n    p = 9.0756561938885390979e-08 + p * w;\n    p = -2.7517406297064545428e-07 + p * w;\n    p = 1.8239629214389227755e-08 + p * w;\n    p = 1.5027403968909827627e-06 + p * w;\n    p = -4.013867526981545969e-06 + p * w;\n    p = 2.9234449089955446044e-06 + p * w;\n    p = 1.2475304481671778723e-05 + p * w;\n    p = -4.7318229009055733981e-05 + p * w;\n    p = 6.8284851459573175448e-05 + p * w;\n    p = 2.4031110387097893999e-05 + p * w;\n    p = -0.0003550375203628474796 + p * w;\n    p = 0.00095328937973738049703 + p * w;\n    p = -0.0016882755560235047313 + p * w;\n    p = 0.0024914420961078508066 + p * w;\n    p = -0.0037512085075692412107 + p * w;\n    p = 0.005370914553590063617 + p * w;\n    p = 1.0052589676941592334 + p * w;\n    p = 3.0838856104922207635 + p * w;\n  } else if (Number.isFinite(w)) {\n    w = Math.sqrt(w) - 5.0;\n    p = -2.7109920616438573243e-11;\n    p = -2.5556418169965252055e-10 + p * w;\n    p = 1.5076572693500548083e-09 + p * w;\n    p = -3.7894654401267369937e-09 + p * w;\n    p = 7.6157012080783393804e-09 + p * w;\n    p = -1.4960026627149240478e-08 + p * w;\n    p = 2.9147953450901080826e-08 + p * w;\n    p = -6.7711997758452339498e-08 + p * w;\n    p = 2.2900482228026654717e-07 + p * w;\n    p = -9.9298272942317002539e-07 + p * w;\n    p = 4.5260625972231537039e-06 + p * w;\n    p = -1.9681778105531670567e-05 + p * w;\n    p = 7.5995277030017761139e-05 + p * w;\n    p = -0.00021503011930044477347 + p * w;\n    p = -0.00013871931833623122026 + p * w;\n    p = 1.0103004648645343977 + p * w;\n    p = 4.8499064014085844221 + p * w;\n  } else {\n    p = Infinity;\n  }\n  return p * x;\n}\nfunction gaussian(mean, stdev) {\n  var mu, sigma;\n  var dist = {\n    mean: function mean(_) {\n      if (arguments.length) {\n        mu = _ || 0;\n        return dist;\n      } else {\n        return mu;\n      }\n    },\n    stdev: function stdev(_) {\n      if (arguments.length) {\n        sigma = _ == null ? 1 : _;\n        return dist;\n      } else {\n        return sigma;\n      }\n    },\n    sample: function sample() {\n      return sampleNormal(mu, sigma);\n    },\n    pdf: function pdf(value) {\n      return densityNormal(value, mu, sigma);\n    },\n    cdf: function cdf(value) {\n      return cumulativeNormal(value, mu, sigma);\n    },\n    icdf: function icdf(p) {\n      return quantileNormal(p, mu, sigma);\n    }\n  };\n  return dist.mean(mean).stdev(stdev);\n}\nfunction kde(support, _bandwidth) {\n  var kernel = gaussian();\n  var n = 0;\n  var dist = {\n    data: function data(_) {\n      if (arguments.length) {\n        support = _;\n        n = _ ? _.length : 0;\n        return dist.bandwidth(_bandwidth);\n      } else {\n        return support;\n      }\n    },\n    bandwidth: function bandwidth(_) {\n      if (!arguments.length) return _bandwidth;\n      _bandwidth = _;\n      if (!_bandwidth && support) _bandwidth = estimateBandwidth(support);\n      return dist;\n    },\n    sample: function sample() {\n      return support[~~(random() * n)] + _bandwidth * kernel.sample();\n    },\n    pdf: function pdf(x) {\n      var y = 0,\n        i = 0;\n      for (; i < n; ++i) {\n        y += kernel.pdf((x - support[i]) / _bandwidth);\n      }\n      return y / _bandwidth / n;\n    },\n    cdf: function cdf(x) {\n      var y = 0,\n        i = 0;\n      for (; i < n; ++i) {\n        y += kernel.cdf((x - support[i]) / _bandwidth);\n      }\n      return y / n;\n    },\n    icdf: function icdf() {\n      throw Error('KDE icdf not supported.');\n    }\n  };\n  return dist.data(support);\n}\nfunction sampleLogNormal(mean, stdev) {\n  mean = mean || 0;\n  stdev = stdev == null ? 1 : stdev;\n  return Math.exp(mean + sampleNormal() * stdev);\n}\nfunction densityLogNormal(value, mean, stdev) {\n  if (value <= 0) return 0;\n  mean = mean || 0;\n  stdev = stdev == null ? 1 : stdev;\n  var z = (Math.log(value) - mean) / stdev;\n  return Math.exp(-0.5 * z * z) / (stdev * SQRT2PI * value);\n}\nfunction cumulativeLogNormal(value, mean, stdev) {\n  return cumulativeNormal(Math.log(value), mean, stdev);\n}\nfunction quantileLogNormal(p, mean, stdev) {\n  return Math.exp(quantileNormal(p, mean, stdev));\n}\nfunction lognormal(mean, stdev) {\n  var mu, sigma;\n  var dist = {\n    mean: function mean(_) {\n      if (arguments.length) {\n        mu = _ || 0;\n        return dist;\n      } else {\n        return mu;\n      }\n    },\n    stdev: function stdev(_) {\n      if (arguments.length) {\n        sigma = _ == null ? 1 : _;\n        return dist;\n      } else {\n        return sigma;\n      }\n    },\n    sample: function sample() {\n      return sampleLogNormal(mu, sigma);\n    },\n    pdf: function pdf(value) {\n      return densityLogNormal(value, mu, sigma);\n    },\n    cdf: function cdf(value) {\n      return cumulativeLogNormal(value, mu, sigma);\n    },\n    icdf: function icdf(p) {\n      return quantileLogNormal(p, mu, sigma);\n    }\n  };\n  return dist.mean(mean).stdev(stdev);\n}\nfunction mixture(dists, _weights) {\n  var m = 0,\n    w;\n  function normalize(x) {\n    var w = [];\n    var sum = 0,\n      i;\n    for (i = 0; i < m; ++i) {\n      sum += w[i] = x[i] == null ? 1 : +x[i];\n    }\n    for (i = 0; i < m; ++i) {\n      w[i] /= sum;\n    }\n    return w;\n  }\n  var dist = {\n    weights: function weights(_) {\n      if (arguments.length) {\n        w = normalize(_weights = _ || []);\n        return dist;\n      }\n      return _weights;\n    },\n    distributions: function distributions(_) {\n      if (arguments.length) {\n        if (_) {\n          m = _.length;\n          dists = _;\n        } else {\n          m = 0;\n          dists = [];\n        }\n        return dist.weights(_weights);\n      }\n      return dists;\n    },\n    sample: function sample() {\n      var r = random();\n      var d = dists[m - 1],\n        v = w[0],\n        i = 0; // first select distribution\n\n      for (; i < m - 1; v += w[++i]) {\n        if (r < v) {\n          d = dists[i];\n          break;\n        }\n      } // then sample from it\n\n      return d.sample();\n    },\n    pdf: function pdf(x) {\n      var p = 0,\n        i = 0;\n      for (; i < m; ++i) {\n        p += w[i] * dists[i].pdf(x);\n      }\n      return p;\n    },\n    cdf: function cdf(x) {\n      var p = 0,\n        i = 0;\n      for (; i < m; ++i) {\n        p += w[i] * dists[i].cdf(x);\n      }\n      return p;\n    },\n    icdf: function icdf() {\n      throw Error('Mixture icdf not supported.');\n    }\n  };\n  return dist.distributions(dists).weights(_weights);\n}\nfunction sampleUniform(min, max) {\n  if (max == null) {\n    max = min == null ? 1 : min;\n    min = 0;\n  }\n  return min + (max - min) * random();\n}\nfunction densityUniform(value, min, max) {\n  if (max == null) {\n    max = min == null ? 1 : min;\n    min = 0;\n  }\n  return value >= min && value <= max ? 1 / (max - min) : 0;\n}\nfunction cumulativeUniform(value, min, max) {\n  if (max == null) {\n    max = min == null ? 1 : min;\n    min = 0;\n  }\n  return value < min ? 0 : value > max ? 1 : (value - min) / (max - min);\n}\nfunction quantileUniform(p, min, max) {\n  if (max == null) {\n    max = min == null ? 1 : min;\n    min = 0;\n  }\n  return p >= 0 && p <= 1 ? min + p * (max - min) : NaN;\n}\nfunction uniform(min, max) {\n  var a, b;\n  var dist = {\n    min: function min(_) {\n      if (arguments.length) {\n        a = _ || 0;\n        return dist;\n      } else {\n        return a;\n      }\n    },\n    max: function max(_) {\n      if (arguments.length) {\n        b = _ == null ? 1 : _;\n        return dist;\n      } else {\n        return b;\n      }\n    },\n    sample: function sample() {\n      return sampleUniform(a, b);\n    },\n    pdf: function pdf(value) {\n      return densityUniform(value, a, b);\n    },\n    cdf: function cdf(value) {\n      return cumulativeUniform(value, a, b);\n    },\n    icdf: function icdf(p) {\n      return quantileUniform(p, a, b);\n    }\n  };\n  if (max == null) {\n    max = min == null ? 1 : min;\n    min = 0;\n  }\n  return dist.min(min).max(max);\n}\n\n// Ordinary Least Squares\nfunction ols(uX, uY, uXY, uX2) {\n  var delta = uX2 - uX * uX,\n    slope = Math.abs(delta) < 1e-24 ? 0 : (uXY - uX * uY) / delta,\n    intercept = uY - slope * uX;\n  return [intercept, slope];\n}\nfunction points(data, x, y, sort) {\n  data = data.filter(function (d) {\n    var u = x(d),\n      v = y(d);\n    return u != null && (u = +u) >= u && v != null && (v = +v) >= v;\n  });\n  if (sort) {\n    data.sort(function (a, b) {\n      return x(a) - x(b);\n    });\n  }\n  var n = data.length,\n    X = new Float64Array(n),\n    Y = new Float64Array(n); // extract values, calculate means\n\n  var i = 0,\n    ux = 0,\n    uy = 0,\n    xv,\n    yv,\n    d;\n  var _iterator3 = _createForOfIteratorHelper(data),\n    _step3;\n  try {\n    for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n      d = _step3.value;\n      X[i] = xv = +x(d);\n      Y[i] = yv = +y(d);\n      ++i;\n      ux += (xv - ux) / i;\n      uy += (yv - uy) / i;\n    } // mean center the data\n  } catch (err) {\n    _iterator3.e(err);\n  } finally {\n    _iterator3.f();\n  }\n  for (i = 0; i < n; ++i) {\n    X[i] -= ux;\n    Y[i] -= uy;\n  }\n  return [X, Y, ux, uy];\n}\nfunction visitPoints(data, x, y, callback) {\n  var i = -1,\n    u,\n    v;\n  var _iterator4 = _createForOfIteratorHelper(data),\n    _step4;\n  try {\n    for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n      var d = _step4.value;\n      u = x(d);\n      v = y(d);\n      if (u != null && (u = +u) >= u && v != null && (v = +v) >= v) {\n        callback(u, v, ++i);\n      }\n    }\n  } catch (err) {\n    _iterator4.e(err);\n  } finally {\n    _iterator4.f();\n  }\n}\n\n// License: https://github.com/HarryStevens/d3-regression/blob/master/LICENSE\n\nfunction rSquared(data, x, y, uY, predict) {\n  var SSE = 0,\n    SST = 0;\n  visitPoints(data, x, y, function (dx, dy) {\n    var sse = dy - predict(dx),\n      sst = dy - uY;\n    SSE += sse * sse;\n    SST += sst * sst;\n  });\n  return 1 - SSE / SST;\n}\n\n// License: https://github.com/HarryStevens/d3-regression/blob/master/LICENSE\n\nfunction linear(data, x, y) {\n  var X = 0,\n    Y = 0,\n    XY = 0,\n    X2 = 0,\n    n = 0;\n  visitPoints(data, x, y, function (dx, dy) {\n    ++n;\n    X += (dx - X) / n;\n    Y += (dy - Y) / n;\n    XY += (dx * dy - XY) / n;\n    X2 += (dx * dx - X2) / n;\n  });\n  var coef = ols(X, Y, XY, X2),\n    predict = function predict(x) {\n      return coef[0] + coef[1] * x;\n    };\n  return {\n    coef: coef,\n    predict: predict,\n    rSquared: rSquared(data, x, y, Y, predict)\n  };\n}\n\n// License: https://github.com/HarryStevens/d3-regression/blob/master/LICENSE\n\nfunction log(data, x, y) {\n  var X = 0,\n    Y = 0,\n    XY = 0,\n    X2 = 0,\n    n = 0;\n  visitPoints(data, x, y, function (dx, dy) {\n    ++n;\n    dx = Math.log(dx);\n    X += (dx - X) / n;\n    Y += (dy - Y) / n;\n    XY += (dx * dy - XY) / n;\n    X2 += (dx * dx - X2) / n;\n  });\n  var coef = ols(X, Y, XY, X2),\n    predict = function predict(x) {\n      return coef[0] + coef[1] * Math.log(x);\n    };\n  return {\n    coef: coef,\n    predict: predict,\n    rSquared: rSquared(data, x, y, Y, predict)\n  };\n}\nfunction exp(data, x, y) {\n  // eslint-disable-next-line no-unused-vars\n  var _points = points(data, x, y),\n    _points2 = _slicedToArray(_points, 4),\n    xv = _points2[0],\n    yv = _points2[1],\n    ux = _points2[2],\n    uy = _points2[3];\n  var YL = 0,\n    XY = 0,\n    XYL = 0,\n    X2Y = 0,\n    n = 0,\n    dx,\n    ly,\n    xy;\n  visitPoints(data, x, y, function (_, dy) {\n    dx = xv[n++];\n    ly = Math.log(dy);\n    xy = dx * dy;\n    YL += (dy * ly - YL) / n;\n    XY += (xy - XY) / n;\n    XYL += (xy * ly - XYL) / n;\n    X2Y += (dx * xy - X2Y) / n;\n  });\n  var _ols = ols(XY / uy, YL / uy, XYL / uy, X2Y / uy),\n    _ols2 = _slicedToArray(_ols, 2),\n    c0 = _ols2[0],\n    c1 = _ols2[1],\n    predict = function predict(x) {\n      return Math.exp(c0 + c1 * (x - ux));\n    };\n  return {\n    coef: [Math.exp(c0 - c1 * ux), c1],\n    predict: predict,\n    rSquared: rSquared(data, x, y, uy, predict)\n  };\n}\n\n// License: https://github.com/HarryStevens/d3-regression/blob/master/LICENSE\n\nfunction pow(data, x, y) {\n  var X = 0,\n    Y = 0,\n    XY = 0,\n    X2 = 0,\n    YS = 0,\n    n = 0;\n  visitPoints(data, x, y, function (dx, dy) {\n    var lx = Math.log(dx),\n      ly = Math.log(dy);\n    ++n;\n    X += (lx - X) / n;\n    Y += (ly - Y) / n;\n    XY += (lx * ly - XY) / n;\n    X2 += (lx * lx - X2) / n;\n    YS += (dy - YS) / n;\n  });\n  var coef = ols(X, Y, XY, X2),\n    predict = function predict(x) {\n      return coef[0] * Math.pow(x, coef[1]);\n    };\n  coef[0] = Math.exp(coef[0]);\n  return {\n    coef: coef,\n    predict: predict,\n    rSquared: rSquared(data, x, y, YS, predict)\n  };\n}\nfunction quad(data, x, y) {\n  var _points3 = points(data, x, y),\n    _points4 = _slicedToArray(_points3, 4),\n    xv = _points4[0],\n    yv = _points4[1],\n    ux = _points4[2],\n    uy = _points4[3],\n    n = xv.length;\n  var X2 = 0,\n    X3 = 0,\n    X4 = 0,\n    XY = 0,\n    X2Y = 0,\n    i,\n    dx,\n    dy,\n    x2;\n  for (i = 0; i < n;) {\n    dx = xv[i];\n    dy = yv[i++];\n    x2 = dx * dx;\n    X2 += (x2 - X2) / i;\n    X3 += (x2 * dx - X3) / i;\n    X4 += (x2 * x2 - X4) / i;\n    XY += (dx * dy - XY) / i;\n    X2Y += (x2 * dy - X2Y) / i;\n  }\n  var X2X2 = X4 - X2 * X2,\n    d = X2 * X2X2 - X3 * X3,\n    a = (X2Y * X2 - XY * X3) / d,\n    b = (XY * X2X2 - X2Y * X3) / d,\n    c = -a * X2,\n    predict = function predict(x) {\n      x = x - ux;\n      return a * x * x + b * x + c + uy;\n    }; // transform coefficients back from mean-centered space\n\n  return {\n    coef: [c - b * ux + a * ux * ux + uy, b - 2 * a * ux, a],\n    predict: predict,\n    rSquared: rSquared(data, x, y, uy, predict)\n  };\n}\n\n// License: https://github.com/HarryStevens/d3-regression/blob/master/LICENSE\n// ... which was adapted from regression-js by Tom Alexander\n// Source: https://github.com/Tom-Alexander/regression-js/blob/master/src/regression.js#L246\n// License: https://github.com/Tom-Alexander/regression-js/blob/master/LICENSE\n\nfunction poly(data, x, y, order) {\n  // use more efficient methods for lower orders\n  if (order === 1) return linear(data, x, y);\n  if (order === 2) return quad(data, x, y);\n  var _points5 = points(data, x, y),\n    _points6 = _slicedToArray(_points5, 4),\n    xv = _points6[0],\n    yv = _points6[1],\n    ux = _points6[2],\n    uy = _points6[3],\n    n = xv.length,\n    lhs = [],\n    rhs = [],\n    k = order + 1;\n  var i, j, l, v, c;\n  for (i = 0; i < k; ++i) {\n    for (l = 0, v = 0; l < n; ++l) {\n      v += Math.pow(xv[l], i) * yv[l];\n    }\n    lhs.push(v);\n    c = new Float64Array(k);\n    for (j = 0; j < k; ++j) {\n      for (l = 0, v = 0; l < n; ++l) {\n        v += Math.pow(xv[l], i + j);\n      }\n      c[j] = v;\n    }\n    rhs.push(c);\n  }\n  rhs.push(lhs);\n  var coef = gaussianElimination(rhs),\n    predict = function predict(x) {\n      x -= ux;\n      var y = uy + coef[0] + coef[1] * x + coef[2] * x * x;\n      for (i = 3; i < k; ++i) {\n        y += coef[i] * Math.pow(x, i);\n      }\n      return y;\n    };\n  return {\n    coef: uncenter(k, coef, -ux, uy),\n    predict: predict,\n    rSquared: rSquared(data, x, y, uy, predict)\n  };\n}\nfunction uncenter(k, a, x, y) {\n  var z = Array(k);\n  var i, j, v, c; // initialize to zero\n\n  for (i = 0; i < k; ++i) {\n    z[i] = 0;\n  } // polynomial expansion\n\n  for (i = k - 1; i >= 0; --i) {\n    v = a[i];\n    c = 1;\n    z[i] += v;\n    for (j = 1; j <= i; ++j) {\n      c *= (i + 1 - j) / j; // binomial coefficent\n\n      z[i - j] += v * Math.pow(x, j) * c;\n    }\n  } // bias term\n\n  z[0] += y;\n  return z;\n} // Given an array for a two-dimensional matrix and the polynomial order,\n// solve A * x = b using Gaussian elimination.\n\nfunction gaussianElimination(matrix) {\n  var n = matrix.length - 1,\n    coef = [];\n  var i, j, k, r, t;\n  for (i = 0; i < n; ++i) {\n    r = i; // max row\n\n    for (j = i + 1; j < n; ++j) {\n      if (Math.abs(matrix[i][j]) > Math.abs(matrix[i][r])) {\n        r = j;\n      }\n    }\n    for (k = i; k < n + 1; ++k) {\n      t = matrix[k][i];\n      matrix[k][i] = matrix[k][r];\n      matrix[k][r] = t;\n    }\n    for (j = i + 1; j < n; ++j) {\n      for (k = n; k >= i; k--) {\n        matrix[k][j] -= matrix[k][i] * matrix[i][j] / matrix[i][i];\n      }\n    }\n  }\n  for (j = n - 1; j >= 0; --j) {\n    t = 0;\n    for (k = j + 1; k < n; ++k) {\n      t += matrix[k][j] * coef[k];\n    }\n    coef[j] = (matrix[n][j] - t) / matrix[j][j];\n  }\n  return coef;\n}\nvar maxiters = 2,\n  epsilon = 1e-12; // Adapted from science.js by Jason Davies\n// Source: https://github.com/jasondavies/science.js/blob/master/src/stats/loess.js\n// License: https://github.com/jasondavies/science.js/blob/master/LICENSE\n\nfunction loess(data, x, y, bandwidth) {\n  var _points7 = points(data, x, y, true),\n    _points8 = _slicedToArray(_points7, 4),\n    xv = _points8[0],\n    yv = _points8[1],\n    ux = _points8[2],\n    uy = _points8[3],\n    n = xv.length,\n    bw = Math.max(2, ~~(bandwidth * n)),\n    yhat = new Float64Array(n),\n    residuals = new Float64Array(n),\n    robustWeights = new Float64Array(n).fill(1);\n  for (var iter = -1; ++iter <= maxiters;) {\n    var interval = [0, bw - 1];\n    for (var i = 0; i < n; ++i) {\n      var dx = xv[i],\n        i0 = interval[0],\n        i1 = interval[1],\n        edge = dx - xv[i0] > xv[i1] - dx ? i0 : i1;\n      var W = 0,\n        X = 0,\n        Y = 0,\n        XY = 0,\n        X2 = 0;\n      var denom = 1 / Math.abs(xv[edge] - dx || 1); // avoid singularity!\n\n      for (var k = i0; k <= i1; ++k) {\n        var xk = xv[k],\n          yk = yv[k],\n          w = tricube(Math.abs(dx - xk) * denom) * robustWeights[k],\n          xkw = xk * w;\n        W += w;\n        X += xkw;\n        Y += yk * w;\n        XY += yk * xkw;\n        X2 += xk * xkw;\n      } // linear regression fit\n\n      var _ols3 = ols(X / W, Y / W, XY / W, X2 / W),\n        _ols4 = _slicedToArray(_ols3, 2),\n        a = _ols4[0],\n        b = _ols4[1];\n      yhat[i] = a + b * dx;\n      residuals[i] = Math.abs(yv[i] - yhat[i]);\n      updateInterval(xv, i + 1, interval);\n    }\n    if (iter === maxiters) {\n      break;\n    }\n    var medianResidual = median(residuals);\n    if (Math.abs(medianResidual) < epsilon) break;\n    for (var _i = 0, arg, _w; _i < n; ++_i) {\n      arg = residuals[_i] / (6 * medianResidual); // default to epsilon (rather than zero) for large deviations\n      // keeping weights tiny but non-zero prevents singularites\n\n      robustWeights[_i] = arg >= 1 ? epsilon : (_w = 1 - arg * arg) * _w;\n    }\n  }\n  return output(xv, yhat, ux, uy);\n} // weighting kernel for local regression\n\nfunction tricube(x) {\n  return (x = 1 - x * x * x) * x * x;\n} // advance sliding window interval of nearest neighbors\n\nfunction updateInterval(xv, i, interval) {\n  var val = xv[i];\n  var left = interval[0],\n    right = interval[1] + 1;\n  if (right >= xv.length) return; // step right if distance to new right edge is <= distance to old left edge\n  // step when distance is equal to ensure movement over duplicate x values\n\n  while (i > left && xv[right] - val <= val - xv[left]) {\n    interval[0] = ++left;\n    interval[1] = right;\n    ++right;\n  }\n} // generate smoothed output points\n// average points with repeated x values\n\nfunction output(xv, yhat, ux, uy) {\n  var n = xv.length,\n    out = [];\n  var i = 0,\n    cnt = 0,\n    prev = [],\n    v;\n  for (; i < n; ++i) {\n    v = xv[i] + ux;\n    if (prev[0] === v) {\n      // average output values via online update\n      prev[1] += (yhat[i] - prev[1]) / ++cnt;\n    } else {\n      // add new output point\n      cnt = 0;\n      prev[1] += uy;\n      prev = [v, yhat[i]];\n      out.push(prev);\n    }\n  }\n  prev[1] += uy;\n  return out;\n}\n\n// subdivide up to accuracy of 0.5 degrees\nvar MIN_RADIANS = 0.5 * Math.PI / 180; // Adaptively sample an interpolated function over a domain extent\n\nfunction sampleCurve(f, extent, minSteps, maxSteps) {\n  minSteps = minSteps || 25;\n  maxSteps = Math.max(minSteps, maxSteps || 200);\n  var point = function point(x) {\n      return [x, f(x)];\n    },\n    minX = extent[0],\n    maxX = extent[1],\n    span = maxX - minX,\n    stop = span / maxSteps,\n    prev = [point(minX)],\n    next = [];\n  if (minSteps === maxSteps) {\n    // no adaptation, sample uniform grid directly and return\n    for (var i = 1; i < maxSteps; ++i) {\n      prev.push(point(minX + i / minSteps * span));\n    }\n    prev.push(point(maxX));\n    return prev;\n  } else {\n    // sample minimum points on uniform grid\n    // then move on to perform adaptive refinement\n    next.push(point(maxX));\n    for (var _i2 = minSteps; --_i2 > 0;) {\n      next.push(point(minX + _i2 / minSteps * span));\n    }\n  }\n  var p0 = prev[0];\n  var p1 = next[next.length - 1];\n  var sx = 1 / span;\n  var sy = scaleY(p0[1], next);\n  while (p1) {\n    // midpoint for potential curve subdivision\n    var pm = point((p0[0] + p1[0]) / 2);\n    var dx = pm[0] - p0[0] >= stop;\n    if (dx && angleDelta(p0, pm, p1, sx, sy) > MIN_RADIANS) {\n      // maximum resolution has not yet been met, and\n      // subdivision midpoint is sufficiently different from endpoint\n      // save subdivision, push midpoint onto the visitation stack\n      next.push(pm);\n    } else {\n      // subdivision midpoint sufficiently similar to endpoint\n      // skip subdivision, store endpoint, move to next point on the stack\n      p0 = p1;\n      prev.push(p1);\n      next.pop();\n    }\n    p1 = next[next.length - 1];\n  }\n  return prev;\n}\nfunction scaleY(init, points) {\n  var ymin = init;\n  var ymax = init;\n  var n = points.length;\n  for (var i = 0; i < n; ++i) {\n    var y = points[i][1];\n    if (y < ymin) ymin = y;\n    if (y > ymax) ymax = y;\n  }\n  return 1 / (ymax - ymin);\n}\nfunction angleDelta(p, q, r, sx, sy) {\n  var a0 = Math.atan2(sy * (r[1] - p[1]), sx * (r[0] - p[0])),\n    a1 = Math.atan2(sy * (q[1] - p[1]), sx * (q[0] - p[0]));\n  return Math.abs(a0 - a1);\n}\nexport { estimateBandwidth as bandwidthNRD, bin, bootstrapCI, cumulativeLogNormal, cumulativeNormal, cumulativeUniform, densityLogNormal, densityNormal, densityUniform, dotbin, quantileLogNormal, quantileNormal, quantileUniform, quantiles, quartiles, random, integer as randomInteger, kde as randomKDE, lcg as randomLCG, lognormal as randomLogNormal, mixture as randomMixture, gaussian as randomNormal, uniform as randomUniform, exp as regressionExp, linear as regressionLinear, loess as regressionLoess, log as regressionLog, poly as regressionPoly, pow as regressionPow, quad as regressionQuad, sampleCurve, sampleLogNormal, sampleNormal, sampleUniform, setRandom };","map":{"version":3,"names":["numbers","ascending","quantileSorted","deviation","quantile","median","values","valueof","value","index","quantiles","array","p","f","Float64Array","from","sort","map","_","quartiles","estimateBandwidth","n","length","d","q","h","v","Math","min","abs","pow","bin","maxb","maxbins","base","logb","log","div","divide","extent","max","step","level","minstep","i","span","steps","ceil","round","precision","eps","nice","undefined","floor","start","stop","random","setRandom","r","bootstrapCI","samples","alpha","m","a","j","mu","Array","dotbin","smooth","b","w","x","smoothing","thresh","c","lcg","seed","integer","dist","arguments","sample","pdf","cdf","icdf","NaN","SQRT2PI","sqrt","PI","SQRT2","nextSample","sampleNormal","mean","stdev","y","rds","densityNormal","z","exp","cumulativeNormal","Z","cd","sum","quantileNormal","erfinv","Number","isFinite","Infinity","gaussian","sigma","kde","support","bandwidth","kernel","data","Error","sampleLogNormal","densityLogNormal","cumulativeLogNormal","quantileLogNormal","lognormal","mixture","dists","weights","normalize","distributions","sampleUniform","densityUniform","cumulativeUniform","quantileUniform","uniform","ols","uX","uY","uXY","uX2","delta","slope","intercept","points","filter","u","X","Y","ux","uy","xv","yv","visitPoints","callback","rSquared","predict","SSE","SST","dx","dy","sse","sst","linear","XY","X2","coef","YL","XYL","X2Y","ly","xy","c0","c1","YS","lx","quad","X3","X4","x2","X2X2","poly","order","lhs","rhs","k","l","push","gaussianElimination","uncenter","matrix","t","maxiters","epsilon","loess","bw","yhat","residuals","robustWeights","fill","iter","interval","i0","i1","edge","W","denom","xk","yk","tricube","xkw","updateInterval","medianResidual","arg","output","val","left","right","out","cnt","prev","MIN_RADIANS","sampleCurve","minSteps","maxSteps","point","minX","maxX","next","p0","p1","sx","sy","scaleY","pm","angleDelta","pop","init","ymin","ymax","a0","atan2","a1","bandwidthNRD","randomInteger","randomKDE","randomLCG","randomLogNormal","randomMixture","randomNormal","randomUniform","regressionExp","regressionLinear","regressionLoess","regressionLog","regressionPoly","regressionPow","regressionQuad"],"sources":["/Users/weihangzhang/Documents/webpage/visualization-app/node_modules/vega-statistics/build/vega-statistics.module.js"],"sourcesContent":["import { ascending, quantileSorted, deviation, quantile, median } from 'd3-array';\n\nfunction* numbers (values, valueof) {\n  if (valueof == null) {\n    for (let value of values) {\n      if (value != null && value !== '' && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  } else {\n    let index = -1;\n\n    for (let value of values) {\n      value = valueof(value, ++index, values);\n\n      if (value != null && value !== '' && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  }\n}\n\nfunction quantiles (array, p, f) {\n  const values = Float64Array.from(numbers(array, f)); // don't depend on return value from typed array sort call\n  // protects against undefined sort results in Safari (vega/vega-lite#4964)\n\n  values.sort(ascending);\n  return p.map(_ => quantileSorted(values, _));\n}\n\nfunction quartiles (array, f) {\n  return quantiles(array, [0.25, 0.50, 0.75], f);\n}\n\n// Theory, Practice, and Visualization. Wiley.\n\nfunction estimateBandwidth (array, f) {\n  const n = array.length,\n        d = deviation(array, f),\n        q = quartiles(array, f),\n        h = (q[2] - q[0]) / 1.34,\n        v = Math.min(d, h) || d || Math.abs(q[0]) || 1;\n  return 1.06 * v * Math.pow(n, -0.2);\n}\n\nfunction bin (_) {\n  // determine range\n  const maxb = _.maxbins || 20,\n        base = _.base || 10,\n        logb = Math.log(base),\n        div = _.divide || [5, 2];\n  let min = _.extent[0],\n      max = _.extent[1],\n      step,\n      level,\n      minstep,\n      v,\n      i,\n      n;\n  const span = _.span || max - min || Math.abs(min) || 1;\n\n  if (_.step) {\n    // if step size is explicitly given, use that\n    step = _.step;\n  } else if (_.steps) {\n    // if provided, limit choice to acceptable step sizes\n    v = span / maxb;\n\n    for (i = 0, n = _.steps.length; i < n && _.steps[i] < v; ++i);\n\n    step = _.steps[Math.max(0, i - 1)];\n  } else {\n    // else use span to determine step size\n    level = Math.ceil(Math.log(maxb) / logb);\n    minstep = _.minstep || 0;\n    step = Math.max(minstep, Math.pow(base, Math.round(Math.log(span) / logb) - level)); // increase step size if too many bins\n\n    while (Math.ceil(span / step) > maxb) {\n      step *= base;\n    } // decrease step size if allowed\n\n\n    for (i = 0, n = div.length; i < n; ++i) {\n      v = step / div[i];\n      if (v >= minstep && span / v <= maxb) step = v;\n    }\n  } // update precision, min and max\n\n\n  v = Math.log(step);\n  const precision = v >= 0 ? 0 : ~~(-v / logb) + 1,\n        eps = Math.pow(base, -precision - 1);\n\n  if (_.nice || _.nice === undefined) {\n    v = Math.floor(min / step + eps) * step;\n    min = min < v ? v - step : v;\n    max = Math.ceil(max / step) * step;\n  }\n\n  return {\n    start: min,\n    stop: max === min ? min + step : max,\n    step: step\n  };\n}\n\nvar random = Math.random;\nfunction setRandom(r) {\n  random = r;\n}\n\nfunction bootstrapCI (array, samples, alpha, f) {\n  if (!array.length) return [undefined, undefined];\n  const values = Float64Array.from(numbers(array, f)),\n        n = values.length,\n        m = samples;\n  let a, i, j, mu;\n\n  for (j = 0, mu = Array(m); j < m; ++j) {\n    for (a = 0, i = 0; i < n; ++i) {\n      a += values[~~(random() * n)];\n    }\n\n    mu[j] = a / n;\n  }\n\n  mu.sort(ascending);\n  return [quantile(mu, alpha / 2), quantile(mu, 1 - alpha / 2)];\n}\n\n// Dot density binning for dot plot construction.\n// Based on Leland Wilkinson, Dot Plots, The American Statistician, 1999.\n// https://www.cs.uic.edu/~wilkinson/Publications/dotplots.pdf\nfunction dotbin (array, step, smooth, f) {\n  f = f || (_ => _);\n\n  const n = array.length,\n        v = new Float64Array(n);\n  let i = 0,\n      j = 1,\n      a = f(array[0]),\n      b = a,\n      w = a + step,\n      x;\n\n  for (; j < n; ++j) {\n    x = f(array[j]);\n\n    if (x >= w) {\n      b = (a + b) / 2;\n\n      for (; i < j; ++i) v[i] = b;\n\n      w = x + step;\n      a = x;\n    }\n\n    b = x;\n  }\n\n  b = (a + b) / 2;\n\n  for (; i < j; ++i) v[i] = b;\n\n  return smooth ? smoothing(v, step + step / 4) : v;\n} // perform smoothing to reduce variance\n// swap points between \"adjacent\" stacks\n// Wilkinson defines adjacent as within step/4 units\n\nfunction smoothing(v, thresh) {\n  const n = v.length;\n  let a = 0,\n      b = 1,\n      c,\n      d; // get left stack\n\n  while (v[a] === v[b]) ++b;\n\n  while (b < n) {\n    // get right stack\n    c = b + 1;\n\n    while (v[b] === v[c]) ++c; // are stacks adjacent?\n    // if so, compare sizes and swap as needed\n\n\n    if (v[b] - v[b - 1] < thresh) {\n      d = b + (a + c - b - b >> 1);\n\n      while (d < b) v[d++] = v[b];\n\n      while (d > b) v[d--] = v[a];\n    } // update left stack indices\n\n\n    a = b;\n    b = c;\n  }\n\n  return v;\n}\n\nfunction lcg (seed) {\n  // Random numbers using a Linear Congruential Generator with seed value\n  // Uses glibc values from https://en.wikipedia.org/wiki/Linear_congruential_generator\n  return function () {\n    seed = (1103515245 * seed + 12345) % 2147483647;\n    return seed / 2147483647;\n  };\n}\n\nfunction integer (min, max) {\n  if (max == null) {\n    max = min;\n    min = 0;\n  }\n\n  let a, b, d;\n  const dist = {\n    min(_) {\n      if (arguments.length) {\n        a = _ || 0;\n        d = b - a;\n        return dist;\n      } else {\n        return a;\n      }\n    },\n\n    max(_) {\n      if (arguments.length) {\n        b = _ || 0;\n        d = b - a;\n        return dist;\n      } else {\n        return b;\n      }\n    },\n\n    sample() {\n      return a + Math.floor(d * random());\n    },\n\n    pdf(x) {\n      return x === Math.floor(x) && x >= a && x < b ? 1 / d : 0;\n    },\n\n    cdf(x) {\n      const v = Math.floor(x);\n      return v < a ? 0 : v >= b ? 1 : (v - a + 1) / d;\n    },\n\n    icdf(p) {\n      return p >= 0 && p <= 1 ? a - 1 + Math.floor(p * d) : NaN;\n    }\n\n  };\n  return dist.min(min).max(max);\n}\n\nconst SQRT2PI = Math.sqrt(2 * Math.PI);\nconst SQRT2 = Math.SQRT2;\n\nlet nextSample = NaN;\nfunction sampleNormal(mean, stdev) {\n  mean = mean || 0;\n  stdev = stdev == null ? 1 : stdev;\n  let x = 0,\n      y = 0,\n      rds,\n      c;\n\n  if (nextSample === nextSample) {\n    x = nextSample;\n    nextSample = NaN;\n  } else {\n    do {\n      x = random() * 2 - 1;\n      y = random() * 2 - 1;\n      rds = x * x + y * y;\n    } while (rds === 0 || rds > 1);\n\n    c = Math.sqrt(-2 * Math.log(rds) / rds); // Box-Muller transform\n\n    x *= c;\n    nextSample = y * c;\n  }\n\n  return mean + x * stdev;\n}\nfunction densityNormal(value, mean, stdev) {\n  stdev = stdev == null ? 1 : stdev;\n  const z = (value - (mean || 0)) / stdev;\n  return Math.exp(-0.5 * z * z) / (stdev * SQRT2PI);\n} // Approximation from West (2009)\n// Better Approximations to Cumulative Normal Functions\n\nfunction cumulativeNormal(value, mean, stdev) {\n  mean = mean || 0;\n  stdev = stdev == null ? 1 : stdev;\n  const z = (value - mean) / stdev,\n        Z = Math.abs(z);\n  let cd;\n\n  if (Z > 37) {\n    cd = 0;\n  } else {\n    const exp = Math.exp(-Z * Z / 2);\n    let sum;\n\n    if (Z < 7.07106781186547) {\n      sum = 3.52624965998911e-02 * Z + 0.700383064443688;\n      sum = sum * Z + 6.37396220353165;\n      sum = sum * Z + 33.912866078383;\n      sum = sum * Z + 112.079291497871;\n      sum = sum * Z + 221.213596169931;\n      sum = sum * Z + 220.206867912376;\n      cd = exp * sum;\n      sum = 8.83883476483184e-02 * Z + 1.75566716318264;\n      sum = sum * Z + 16.064177579207;\n      sum = sum * Z + 86.7807322029461;\n      sum = sum * Z + 296.564248779674;\n      sum = sum * Z + 637.333633378831;\n      sum = sum * Z + 793.826512519948;\n      sum = sum * Z + 440.413735824752;\n      cd = cd / sum;\n    } else {\n      sum = Z + 0.65;\n      sum = Z + 4 / sum;\n      sum = Z + 3 / sum;\n      sum = Z + 2 / sum;\n      sum = Z + 1 / sum;\n      cd = exp / sum / 2.506628274631;\n    }\n  }\n\n  return z > 0 ? 1 - cd : cd;\n} // Approximation of Probit function using inverse error function.\n\nfunction quantileNormal(p, mean, stdev) {\n  if (p < 0 || p > 1) return NaN;\n  return (mean || 0) + (stdev == null ? 1 : stdev) * SQRT2 * erfinv(2 * p - 1);\n} // Approximate inverse error function. Implementation from \"Approximating\n// the erfinv function\" by Mike Giles, GPU Computing Gems, volume 2, 2010.\n// Ported from Apache Commons Math, http://www.apache.org/licenses/LICENSE-2.0\n\nfunction erfinv(x) {\n  // beware that the logarithm argument must be\n  // commputed as (1.0 - x) * (1.0 + x),\n  // it must NOT be simplified as 1.0 - x * x as this\n  // would induce rounding errors near the boundaries +/-1\n  let w = -Math.log((1 - x) * (1 + x)),\n      p;\n\n  if (w < 6.25) {\n    w -= 3.125;\n    p = -3.6444120640178196996e-21;\n    p = -1.685059138182016589e-19 + p * w;\n    p = 1.2858480715256400167e-18 + p * w;\n    p = 1.115787767802518096e-17 + p * w;\n    p = -1.333171662854620906e-16 + p * w;\n    p = 2.0972767875968561637e-17 + p * w;\n    p = 6.6376381343583238325e-15 + p * w;\n    p = -4.0545662729752068639e-14 + p * w;\n    p = -8.1519341976054721522e-14 + p * w;\n    p = 2.6335093153082322977e-12 + p * w;\n    p = -1.2975133253453532498e-11 + p * w;\n    p = -5.4154120542946279317e-11 + p * w;\n    p = 1.051212273321532285e-09 + p * w;\n    p = -4.1126339803469836976e-09 + p * w;\n    p = -2.9070369957882005086e-08 + p * w;\n    p = 4.2347877827932403518e-07 + p * w;\n    p = -1.3654692000834678645e-06 + p * w;\n    p = -1.3882523362786468719e-05 + p * w;\n    p = 0.0001867342080340571352 + p * w;\n    p = -0.00074070253416626697512 + p * w;\n    p = -0.0060336708714301490533 + p * w;\n    p = 0.24015818242558961693 + p * w;\n    p = 1.6536545626831027356 + p * w;\n  } else if (w < 16.0) {\n    w = Math.sqrt(w) - 3.25;\n    p = 2.2137376921775787049e-09;\n    p = 9.0756561938885390979e-08 + p * w;\n    p = -2.7517406297064545428e-07 + p * w;\n    p = 1.8239629214389227755e-08 + p * w;\n    p = 1.5027403968909827627e-06 + p * w;\n    p = -4.013867526981545969e-06 + p * w;\n    p = 2.9234449089955446044e-06 + p * w;\n    p = 1.2475304481671778723e-05 + p * w;\n    p = -4.7318229009055733981e-05 + p * w;\n    p = 6.8284851459573175448e-05 + p * w;\n    p = 2.4031110387097893999e-05 + p * w;\n    p = -0.0003550375203628474796 + p * w;\n    p = 0.00095328937973738049703 + p * w;\n    p = -0.0016882755560235047313 + p * w;\n    p = 0.0024914420961078508066 + p * w;\n    p = -0.0037512085075692412107 + p * w;\n    p = 0.005370914553590063617 + p * w;\n    p = 1.0052589676941592334 + p * w;\n    p = 3.0838856104922207635 + p * w;\n  } else if (Number.isFinite(w)) {\n    w = Math.sqrt(w) - 5.0;\n    p = -2.7109920616438573243e-11;\n    p = -2.5556418169965252055e-10 + p * w;\n    p = 1.5076572693500548083e-09 + p * w;\n    p = -3.7894654401267369937e-09 + p * w;\n    p = 7.6157012080783393804e-09 + p * w;\n    p = -1.4960026627149240478e-08 + p * w;\n    p = 2.9147953450901080826e-08 + p * w;\n    p = -6.7711997758452339498e-08 + p * w;\n    p = 2.2900482228026654717e-07 + p * w;\n    p = -9.9298272942317002539e-07 + p * w;\n    p = 4.5260625972231537039e-06 + p * w;\n    p = -1.9681778105531670567e-05 + p * w;\n    p = 7.5995277030017761139e-05 + p * w;\n    p = -0.00021503011930044477347 + p * w;\n    p = -0.00013871931833623122026 + p * w;\n    p = 1.0103004648645343977 + p * w;\n    p = 4.8499064014085844221 + p * w;\n  } else {\n    p = Infinity;\n  }\n\n  return p * x;\n}\n\nfunction gaussian (mean, stdev) {\n  let mu, sigma;\n  const dist = {\n    mean(_) {\n      if (arguments.length) {\n        mu = _ || 0;\n        return dist;\n      } else {\n        return mu;\n      }\n    },\n\n    stdev(_) {\n      if (arguments.length) {\n        sigma = _ == null ? 1 : _;\n        return dist;\n      } else {\n        return sigma;\n      }\n    },\n\n    sample: () => sampleNormal(mu, sigma),\n    pdf: value => densityNormal(value, mu, sigma),\n    cdf: value => cumulativeNormal(value, mu, sigma),\n    icdf: p => quantileNormal(p, mu, sigma)\n  };\n  return dist.mean(mean).stdev(stdev);\n}\n\nfunction kde (support, bandwidth) {\n  const kernel = gaussian();\n  let n = 0;\n  const dist = {\n    data(_) {\n      if (arguments.length) {\n        support = _;\n        n = _ ? _.length : 0;\n        return dist.bandwidth(bandwidth);\n      } else {\n        return support;\n      }\n    },\n\n    bandwidth(_) {\n      if (!arguments.length) return bandwidth;\n      bandwidth = _;\n      if (!bandwidth && support) bandwidth = estimateBandwidth(support);\n      return dist;\n    },\n\n    sample() {\n      return support[~~(random() * n)] + bandwidth * kernel.sample();\n    },\n\n    pdf(x) {\n      let y = 0,\n          i = 0;\n\n      for (; i < n; ++i) {\n        y += kernel.pdf((x - support[i]) / bandwidth);\n      }\n\n      return y / bandwidth / n;\n    },\n\n    cdf(x) {\n      let y = 0,\n          i = 0;\n\n      for (; i < n; ++i) {\n        y += kernel.cdf((x - support[i]) / bandwidth);\n      }\n\n      return y / n;\n    },\n\n    icdf() {\n      throw Error('KDE icdf not supported.');\n    }\n\n  };\n  return dist.data(support);\n}\n\nfunction sampleLogNormal(mean, stdev) {\n  mean = mean || 0;\n  stdev = stdev == null ? 1 : stdev;\n  return Math.exp(mean + sampleNormal() * stdev);\n}\nfunction densityLogNormal(value, mean, stdev) {\n  if (value <= 0) return 0;\n  mean = mean || 0;\n  stdev = stdev == null ? 1 : stdev;\n  const z = (Math.log(value) - mean) / stdev;\n  return Math.exp(-0.5 * z * z) / (stdev * SQRT2PI * value);\n}\nfunction cumulativeLogNormal(value, mean, stdev) {\n  return cumulativeNormal(Math.log(value), mean, stdev);\n}\nfunction quantileLogNormal(p, mean, stdev) {\n  return Math.exp(quantileNormal(p, mean, stdev));\n}\nfunction lognormal (mean, stdev) {\n  let mu, sigma;\n  const dist = {\n    mean(_) {\n      if (arguments.length) {\n        mu = _ || 0;\n        return dist;\n      } else {\n        return mu;\n      }\n    },\n\n    stdev(_) {\n      if (arguments.length) {\n        sigma = _ == null ? 1 : _;\n        return dist;\n      } else {\n        return sigma;\n      }\n    },\n\n    sample: () => sampleLogNormal(mu, sigma),\n    pdf: value => densityLogNormal(value, mu, sigma),\n    cdf: value => cumulativeLogNormal(value, mu, sigma),\n    icdf: p => quantileLogNormal(p, mu, sigma)\n  };\n  return dist.mean(mean).stdev(stdev);\n}\n\nfunction mixture (dists, weights) {\n  let m = 0,\n      w;\n\n  function normalize(x) {\n    const w = [];\n    let sum = 0,\n        i;\n\n    for (i = 0; i < m; ++i) {\n      sum += w[i] = x[i] == null ? 1 : +x[i];\n    }\n\n    for (i = 0; i < m; ++i) {\n      w[i] /= sum;\n    }\n\n    return w;\n  }\n\n  const dist = {\n    weights(_) {\n      if (arguments.length) {\n        w = normalize(weights = _ || []);\n        return dist;\n      }\n\n      return weights;\n    },\n\n    distributions(_) {\n      if (arguments.length) {\n        if (_) {\n          m = _.length;\n          dists = _;\n        } else {\n          m = 0;\n          dists = [];\n        }\n\n        return dist.weights(weights);\n      }\n\n      return dists;\n    },\n\n    sample() {\n      const r = random();\n      let d = dists[m - 1],\n          v = w[0],\n          i = 0; // first select distribution\n\n      for (; i < m - 1; v += w[++i]) {\n        if (r < v) {\n          d = dists[i];\n          break;\n        }\n      } // then sample from it\n\n\n      return d.sample();\n    },\n\n    pdf(x) {\n      let p = 0,\n          i = 0;\n\n      for (; i < m; ++i) {\n        p += w[i] * dists[i].pdf(x);\n      }\n\n      return p;\n    },\n\n    cdf(x) {\n      let p = 0,\n          i = 0;\n\n      for (; i < m; ++i) {\n        p += w[i] * dists[i].cdf(x);\n      }\n\n      return p;\n    },\n\n    icdf() {\n      throw Error('Mixture icdf not supported.');\n    }\n\n  };\n  return dist.distributions(dists).weights(weights);\n}\n\nfunction sampleUniform(min, max) {\n  if (max == null) {\n    max = min == null ? 1 : min;\n    min = 0;\n  }\n\n  return min + (max - min) * random();\n}\nfunction densityUniform(value, min, max) {\n  if (max == null) {\n    max = min == null ? 1 : min;\n    min = 0;\n  }\n\n  return value >= min && value <= max ? 1 / (max - min) : 0;\n}\nfunction cumulativeUniform(value, min, max) {\n  if (max == null) {\n    max = min == null ? 1 : min;\n    min = 0;\n  }\n\n  return value < min ? 0 : value > max ? 1 : (value - min) / (max - min);\n}\nfunction quantileUniform(p, min, max) {\n  if (max == null) {\n    max = min == null ? 1 : min;\n    min = 0;\n  }\n\n  return p >= 0 && p <= 1 ? min + p * (max - min) : NaN;\n}\nfunction uniform (min, max) {\n  let a, b;\n  const dist = {\n    min(_) {\n      if (arguments.length) {\n        a = _ || 0;\n        return dist;\n      } else {\n        return a;\n      }\n    },\n\n    max(_) {\n      if (arguments.length) {\n        b = _ == null ? 1 : _;\n        return dist;\n      } else {\n        return b;\n      }\n    },\n\n    sample: () => sampleUniform(a, b),\n    pdf: value => densityUniform(value, a, b),\n    cdf: value => cumulativeUniform(value, a, b),\n    icdf: p => quantileUniform(p, a, b)\n  };\n\n  if (max == null) {\n    max = min == null ? 1 : min;\n    min = 0;\n  }\n\n  return dist.min(min).max(max);\n}\n\n// Ordinary Least Squares\nfunction ols (uX, uY, uXY, uX2) {\n  const delta = uX2 - uX * uX,\n        slope = Math.abs(delta) < 1e-24 ? 0 : (uXY - uX * uY) / delta,\n        intercept = uY - slope * uX;\n  return [intercept, slope];\n}\n\nfunction points(data, x, y, sort) {\n  data = data.filter(d => {\n    let u = x(d),\n        v = y(d);\n    return u != null && (u = +u) >= u && v != null && (v = +v) >= v;\n  });\n\n  if (sort) {\n    data.sort((a, b) => x(a) - x(b));\n  }\n\n  const n = data.length,\n        X = new Float64Array(n),\n        Y = new Float64Array(n); // extract values, calculate means\n\n  let i = 0,\n      ux = 0,\n      uy = 0,\n      xv,\n      yv,\n      d;\n\n  for (d of data) {\n    X[i] = xv = +x(d);\n    Y[i] = yv = +y(d);\n    ++i;\n    ux += (xv - ux) / i;\n    uy += (yv - uy) / i;\n  } // mean center the data\n\n\n  for (i = 0; i < n; ++i) {\n    X[i] -= ux;\n    Y[i] -= uy;\n  }\n\n  return [X, Y, ux, uy];\n}\nfunction visitPoints(data, x, y, callback) {\n  let i = -1,\n      u,\n      v;\n\n  for (const d of data) {\n    u = x(d);\n    v = y(d);\n\n    if (u != null && (u = +u) >= u && v != null && (v = +v) >= v) {\n      callback(u, v, ++i);\n    }\n  }\n}\n\n// License: https://github.com/HarryStevens/d3-regression/blob/master/LICENSE\n\nfunction rSquared (data, x, y, uY, predict) {\n  let SSE = 0,\n      SST = 0;\n  visitPoints(data, x, y, (dx, dy) => {\n    const sse = dy - predict(dx),\n          sst = dy - uY;\n    SSE += sse * sse;\n    SST += sst * sst;\n  });\n  return 1 - SSE / SST;\n}\n\n// License: https://github.com/HarryStevens/d3-regression/blob/master/LICENSE\n\nfunction linear (data, x, y) {\n  let X = 0,\n      Y = 0,\n      XY = 0,\n      X2 = 0,\n      n = 0;\n  visitPoints(data, x, y, (dx, dy) => {\n    ++n;\n    X += (dx - X) / n;\n    Y += (dy - Y) / n;\n    XY += (dx * dy - XY) / n;\n    X2 += (dx * dx - X2) / n;\n  });\n\n  const coef = ols(X, Y, XY, X2),\n        predict = x => coef[0] + coef[1] * x;\n\n  return {\n    coef: coef,\n    predict: predict,\n    rSquared: rSquared(data, x, y, Y, predict)\n  };\n}\n\n// License: https://github.com/HarryStevens/d3-regression/blob/master/LICENSE\n\nfunction log (data, x, y) {\n  let X = 0,\n      Y = 0,\n      XY = 0,\n      X2 = 0,\n      n = 0;\n  visitPoints(data, x, y, (dx, dy) => {\n    ++n;\n    dx = Math.log(dx);\n    X += (dx - X) / n;\n    Y += (dy - Y) / n;\n    XY += (dx * dy - XY) / n;\n    X2 += (dx * dx - X2) / n;\n  });\n\n  const coef = ols(X, Y, XY, X2),\n        predict = x => coef[0] + coef[1] * Math.log(x);\n\n  return {\n    coef: coef,\n    predict: predict,\n    rSquared: rSquared(data, x, y, Y, predict)\n  };\n}\n\nfunction exp (data, x, y) {\n  // eslint-disable-next-line no-unused-vars\n  const [xv, yv, ux, uy] = points(data, x, y);\n  let YL = 0,\n      XY = 0,\n      XYL = 0,\n      X2Y = 0,\n      n = 0,\n      dx,\n      ly,\n      xy;\n  visitPoints(data, x, y, (_, dy) => {\n    dx = xv[n++];\n    ly = Math.log(dy);\n    xy = dx * dy;\n    YL += (dy * ly - YL) / n;\n    XY += (xy - XY) / n;\n    XYL += (xy * ly - XYL) / n;\n    X2Y += (dx * xy - X2Y) / n;\n  });\n\n  const [c0, c1] = ols(XY / uy, YL / uy, XYL / uy, X2Y / uy),\n        predict = x => Math.exp(c0 + c1 * (x - ux));\n\n  return {\n    coef: [Math.exp(c0 - c1 * ux), c1],\n    predict: predict,\n    rSquared: rSquared(data, x, y, uy, predict)\n  };\n}\n\n// License: https://github.com/HarryStevens/d3-regression/blob/master/LICENSE\n\nfunction pow (data, x, y) {\n  let X = 0,\n      Y = 0,\n      XY = 0,\n      X2 = 0,\n      YS = 0,\n      n = 0;\n  visitPoints(data, x, y, (dx, dy) => {\n    const lx = Math.log(dx),\n          ly = Math.log(dy);\n    ++n;\n    X += (lx - X) / n;\n    Y += (ly - Y) / n;\n    XY += (lx * ly - XY) / n;\n    X2 += (lx * lx - X2) / n;\n    YS += (dy - YS) / n;\n  });\n\n  const coef = ols(X, Y, XY, X2),\n        predict = x => coef[0] * Math.pow(x, coef[1]);\n\n  coef[0] = Math.exp(coef[0]);\n  return {\n    coef: coef,\n    predict: predict,\n    rSquared: rSquared(data, x, y, YS, predict)\n  };\n}\n\nfunction quad (data, x, y) {\n  const [xv, yv, ux, uy] = points(data, x, y),\n        n = xv.length;\n  let X2 = 0,\n      X3 = 0,\n      X4 = 0,\n      XY = 0,\n      X2Y = 0,\n      i,\n      dx,\n      dy,\n      x2;\n\n  for (i = 0; i < n;) {\n    dx = xv[i];\n    dy = yv[i++];\n    x2 = dx * dx;\n    X2 += (x2 - X2) / i;\n    X3 += (x2 * dx - X3) / i;\n    X4 += (x2 * x2 - X4) / i;\n    XY += (dx * dy - XY) / i;\n    X2Y += (x2 * dy - X2Y) / i;\n  }\n\n  const X2X2 = X4 - X2 * X2,\n        d = X2 * X2X2 - X3 * X3,\n        a = (X2Y * X2 - XY * X3) / d,\n        b = (XY * X2X2 - X2Y * X3) / d,\n        c = -a * X2,\n        predict = x => {\n    x = x - ux;\n    return a * x * x + b * x + c + uy;\n  }; // transform coefficients back from mean-centered space\n\n\n  return {\n    coef: [c - b * ux + a * ux * ux + uy, b - 2 * a * ux, a],\n    predict: predict,\n    rSquared: rSquared(data, x, y, uy, predict)\n  };\n}\n\n// License: https://github.com/HarryStevens/d3-regression/blob/master/LICENSE\n// ... which was adapted from regression-js by Tom Alexander\n// Source: https://github.com/Tom-Alexander/regression-js/blob/master/src/regression.js#L246\n// License: https://github.com/Tom-Alexander/regression-js/blob/master/LICENSE\n\nfunction poly (data, x, y, order) {\n  // use more efficient methods for lower orders\n  if (order === 1) return linear(data, x, y);\n  if (order === 2) return quad(data, x, y);\n  const [xv, yv, ux, uy] = points(data, x, y),\n        n = xv.length,\n        lhs = [],\n        rhs = [],\n        k = order + 1;\n  let i, j, l, v, c;\n\n  for (i = 0; i < k; ++i) {\n    for (l = 0, v = 0; l < n; ++l) {\n      v += Math.pow(xv[l], i) * yv[l];\n    }\n\n    lhs.push(v);\n    c = new Float64Array(k);\n\n    for (j = 0; j < k; ++j) {\n      for (l = 0, v = 0; l < n; ++l) {\n        v += Math.pow(xv[l], i + j);\n      }\n\n      c[j] = v;\n    }\n\n    rhs.push(c);\n  }\n\n  rhs.push(lhs);\n\n  const coef = gaussianElimination(rhs),\n        predict = x => {\n    x -= ux;\n    let y = uy + coef[0] + coef[1] * x + coef[2] * x * x;\n\n    for (i = 3; i < k; ++i) y += coef[i] * Math.pow(x, i);\n\n    return y;\n  };\n\n  return {\n    coef: uncenter(k, coef, -ux, uy),\n    predict: predict,\n    rSquared: rSquared(data, x, y, uy, predict)\n  };\n}\n\nfunction uncenter(k, a, x, y) {\n  const z = Array(k);\n  let i, j, v, c; // initialize to zero\n\n  for (i = 0; i < k; ++i) z[i] = 0; // polynomial expansion\n\n\n  for (i = k - 1; i >= 0; --i) {\n    v = a[i];\n    c = 1;\n    z[i] += v;\n\n    for (j = 1; j <= i; ++j) {\n      c *= (i + 1 - j) / j; // binomial coefficent\n\n      z[i - j] += v * Math.pow(x, j) * c;\n    }\n  } // bias term\n\n\n  z[0] += y;\n  return z;\n} // Given an array for a two-dimensional matrix and the polynomial order,\n// solve A * x = b using Gaussian elimination.\n\n\nfunction gaussianElimination(matrix) {\n  const n = matrix.length - 1,\n        coef = [];\n  let i, j, k, r, t;\n\n  for (i = 0; i < n; ++i) {\n    r = i; // max row\n\n    for (j = i + 1; j < n; ++j) {\n      if (Math.abs(matrix[i][j]) > Math.abs(matrix[i][r])) {\n        r = j;\n      }\n    }\n\n    for (k = i; k < n + 1; ++k) {\n      t = matrix[k][i];\n      matrix[k][i] = matrix[k][r];\n      matrix[k][r] = t;\n    }\n\n    for (j = i + 1; j < n; ++j) {\n      for (k = n; k >= i; k--) {\n        matrix[k][j] -= matrix[k][i] * matrix[i][j] / matrix[i][i];\n      }\n    }\n  }\n\n  for (j = n - 1; j >= 0; --j) {\n    t = 0;\n\n    for (k = j + 1; k < n; ++k) {\n      t += matrix[k][j] * coef[k];\n    }\n\n    coef[j] = (matrix[n][j] - t) / matrix[j][j];\n  }\n\n  return coef;\n}\n\nconst maxiters = 2,\n      epsilon = 1e-12; // Adapted from science.js by Jason Davies\n// Source: https://github.com/jasondavies/science.js/blob/master/src/stats/loess.js\n// License: https://github.com/jasondavies/science.js/blob/master/LICENSE\n\nfunction loess (data, x, y, bandwidth) {\n  const [xv, yv, ux, uy] = points(data, x, y, true),\n        n = xv.length,\n        bw = Math.max(2, ~~(bandwidth * n)),\n        // # nearest neighbors\n  yhat = new Float64Array(n),\n        residuals = new Float64Array(n),\n        robustWeights = new Float64Array(n).fill(1);\n\n  for (let iter = -1; ++iter <= maxiters;) {\n    const interval = [0, bw - 1];\n\n    for (let i = 0; i < n; ++i) {\n      const dx = xv[i],\n            i0 = interval[0],\n            i1 = interval[1],\n            edge = dx - xv[i0] > xv[i1] - dx ? i0 : i1;\n      let W = 0,\n          X = 0,\n          Y = 0,\n          XY = 0,\n          X2 = 0;\n      const denom = 1 / Math.abs(xv[edge] - dx || 1); // avoid singularity!\n\n      for (let k = i0; k <= i1; ++k) {\n        const xk = xv[k],\n              yk = yv[k],\n              w = tricube(Math.abs(dx - xk) * denom) * robustWeights[k],\n              xkw = xk * w;\n        W += w;\n        X += xkw;\n        Y += yk * w;\n        XY += yk * xkw;\n        X2 += xk * xkw;\n      } // linear regression fit\n\n\n      const [a, b] = ols(X / W, Y / W, XY / W, X2 / W);\n      yhat[i] = a + b * dx;\n      residuals[i] = Math.abs(yv[i] - yhat[i]);\n      updateInterval(xv, i + 1, interval);\n    }\n\n    if (iter === maxiters) {\n      break;\n    }\n\n    const medianResidual = median(residuals);\n    if (Math.abs(medianResidual) < epsilon) break;\n\n    for (let i = 0, arg, w; i < n; ++i) {\n      arg = residuals[i] / (6 * medianResidual); // default to epsilon (rather than zero) for large deviations\n      // keeping weights tiny but non-zero prevents singularites\n\n      robustWeights[i] = arg >= 1 ? epsilon : (w = 1 - arg * arg) * w;\n    }\n  }\n\n  return output(xv, yhat, ux, uy);\n} // weighting kernel for local regression\n\nfunction tricube(x) {\n  return (x = 1 - x * x * x) * x * x;\n} // advance sliding window interval of nearest neighbors\n\n\nfunction updateInterval(xv, i, interval) {\n  const val = xv[i];\n  let left = interval[0],\n      right = interval[1] + 1;\n  if (right >= xv.length) return; // step right if distance to new right edge is <= distance to old left edge\n  // step when distance is equal to ensure movement over duplicate x values\n\n  while (i > left && xv[right] - val <= val - xv[left]) {\n    interval[0] = ++left;\n    interval[1] = right;\n    ++right;\n  }\n} // generate smoothed output points\n// average points with repeated x values\n\n\nfunction output(xv, yhat, ux, uy) {\n  const n = xv.length,\n        out = [];\n  let i = 0,\n      cnt = 0,\n      prev = [],\n      v;\n\n  for (; i < n; ++i) {\n    v = xv[i] + ux;\n\n    if (prev[0] === v) {\n      // average output values via online update\n      prev[1] += (yhat[i] - prev[1]) / ++cnt;\n    } else {\n      // add new output point\n      cnt = 0;\n      prev[1] += uy;\n      prev = [v, yhat[i]];\n      out.push(prev);\n    }\n  }\n\n  prev[1] += uy;\n  return out;\n}\n\n// subdivide up to accuracy of 0.5 degrees\nconst MIN_RADIANS = 0.5 * Math.PI / 180; // Adaptively sample an interpolated function over a domain extent\n\nfunction sampleCurve (f, extent, minSteps, maxSteps) {\n  minSteps = minSteps || 25;\n  maxSteps = Math.max(minSteps, maxSteps || 200);\n\n  const point = x => [x, f(x)],\n        minX = extent[0],\n        maxX = extent[1],\n        span = maxX - minX,\n        stop = span / maxSteps,\n        prev = [point(minX)],\n        next = [];\n\n  if (minSteps === maxSteps) {\n    // no adaptation, sample uniform grid directly and return\n    for (let i = 1; i < maxSteps; ++i) {\n      prev.push(point(minX + i / minSteps * span));\n    }\n\n    prev.push(point(maxX));\n    return prev;\n  } else {\n    // sample minimum points on uniform grid\n    // then move on to perform adaptive refinement\n    next.push(point(maxX));\n\n    for (let i = minSteps; --i > 0;) {\n      next.push(point(minX + i / minSteps * span));\n    }\n  }\n\n  let p0 = prev[0];\n  let p1 = next[next.length - 1];\n  const sx = 1 / span;\n  const sy = scaleY(p0[1], next);\n\n  while (p1) {\n    // midpoint for potential curve subdivision\n    const pm = point((p0[0] + p1[0]) / 2);\n    const dx = pm[0] - p0[0] >= stop;\n\n    if (dx && angleDelta(p0, pm, p1, sx, sy) > MIN_RADIANS) {\n      // maximum resolution has not yet been met, and\n      // subdivision midpoint is sufficiently different from endpoint\n      // save subdivision, push midpoint onto the visitation stack\n      next.push(pm);\n    } else {\n      // subdivision midpoint sufficiently similar to endpoint\n      // skip subdivision, store endpoint, move to next point on the stack\n      p0 = p1;\n      prev.push(p1);\n      next.pop();\n    }\n\n    p1 = next[next.length - 1];\n  }\n\n  return prev;\n}\n\nfunction scaleY(init, points) {\n  let ymin = init;\n  let ymax = init;\n  const n = points.length;\n\n  for (let i = 0; i < n; ++i) {\n    const y = points[i][1];\n    if (y < ymin) ymin = y;\n    if (y > ymax) ymax = y;\n  }\n\n  return 1 / (ymax - ymin);\n}\n\nfunction angleDelta(p, q, r, sx, sy) {\n  const a0 = Math.atan2(sy * (r[1] - p[1]), sx * (r[0] - p[0])),\n        a1 = Math.atan2(sy * (q[1] - p[1]), sx * (q[0] - p[0]));\n  return Math.abs(a0 - a1);\n}\n\nexport { estimateBandwidth as bandwidthNRD, bin, bootstrapCI, cumulativeLogNormal, cumulativeNormal, cumulativeUniform, densityLogNormal, densityNormal, densityUniform, dotbin, quantileLogNormal, quantileNormal, quantileUniform, quantiles, quartiles, random, integer as randomInteger, kde as randomKDE, lcg as randomLCG, lognormal as randomLogNormal, mixture as randomMixture, gaussian as randomNormal, uniform as randomUniform, exp as regressionExp, linear as regressionLinear, loess as regressionLoess, log as regressionLog, poly as regressionPoly, pow as regressionPow, quad as regressionQuad, sampleCurve, sampleLogNormal, sampleNormal, sampleUniform, setRandom };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}