{"ast":null,"code":"import _slicedToArray from\"/Users/weihangzhang/Documents/webpage/gosling-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useRef}from'react';import{GoslingComponent}from'gosling.js';import{VegaLite}from'react-vega';var goslingSpec={layout:'linear',arrangement:'vertical',centerRadius:0.8,xDomain:{chromosome:'1'},style:{select:{color:'black',stroke:'black',strokeWidth:6,arrange:'behind',opacity:0.1}},views:[{tracks:[{title:'ALT + Mouse Drag For Range Selection',id:'scatterplot-track',experimental:{mouseEvents:true},data:{url:'https://server.gosling-lang.org/api/v1/tileset_info/?d=cistrome-multivec',type:'multivec',row:'sample',column:'position',value:'peak',categories:['sample 1','sample 2','sample 3','sample 4'],binSize:4},mark:'point',x:{field:'position',type:'genomic'},y:{field:'peak',type:'quantitative'},size:{field:'peak',type:'quantitative'},color:{field:'sample',type:'nominal',legend:true},width:600,height:200}]}]};var vegaLiteSpec={width:450,height:400,mark:'bar',encoding:{x:{field:'peak',type:'ordinal',bin:true},y:{field:'peak',type:'quantitative',aggregate:'count'},color:{field:'sample',type:'nominal',scale:{domain:['sample 1','sample 2','sample 3','sample 4'],range:['#E79F00','#029F73','#0072B2','#CB7AA7']}}},data:{name:'table'}};function VegaLiteExample(){var gosRef=useRef(null);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),selectedData=_useState2[0],setSelectedData=_useState2[1];useEffect(function(){if(!gosRef.current)return;gosRef.current.api.subscribe('rangeSelect',function(_,e){return setSelectedData(e.data);});return function(){return gosRef.current.api.unsubscribe('rangeSelect');};},[gosRef]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(GoslingComponent,{ref:gosRef,spec:goslingSpec,experimental:{reactive:true}}),/*#__PURE__*/React.createElement(\"div\",{style:{marginLeft:80}},/*#__PURE__*/React.createElement(VegaLite,{spec:vegaLiteSpec,data:{table:selectedData}})));}export default VegaLiteExample;","map":{"version":3,"names":["React","useEffect","useState","useRef","GoslingComponent","VegaLite","goslingSpec","layout","arrangement","centerRadius","xDomain","chromosome","style","select","color","stroke","strokeWidth","arrange","opacity","views","tracks","title","id","experimental","mouseEvents","data","url","type","row","column","value","categories","binSize","mark","x","field","y","size","legend","width","height","vegaLiteSpec","encoding","bin","aggregate","scale","domain","range","name","VegaLiteExample","gosRef","selectedData","setSelectedData","current","api","subscribe","_","e","unsubscribe","reactive","marginLeft","table"],"sources":["/Users/weihangzhang/Documents/webpage/gosling-react/src/example/VegaLite.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport { GoslingComponent } from 'gosling.js';\nimport { VegaLite } from 'react-vega'\n\nconst goslingSpec = {\n\tlayout: 'linear',\n\tarrangement: 'vertical',\n\tcenterRadius: 0.8,\n\txDomain: { chromosome: '1' },\n\tstyle: {\n\t\tselect: { color: 'black', stroke: 'black', strokeWidth: 6, arrange: 'behind', opacity: 0.1 }\n\t},\n\tviews: [\n\t\t{\n\t\t\ttracks: [\n\t\t\t\t{\n\t\t\t\t\ttitle: 'ALT + Mouse Drag For Range Selection',\n\t\t\t\t\tid: 'scatterplot-track',\n\t\t\t\t\texperimental: { mouseEvents: true },\n\t\t\t\t\tdata: {\n\t\t\t\t\t\turl: 'https://server.gosling-lang.org/api/v1/tileset_info/?d=cistrome-multivec',\n\t\t\t\t\t\ttype: 'multivec',\n\t\t\t\t\t\trow: 'sample',\n\t\t\t\t\t\tcolumn: 'position',\n\t\t\t\t\t\tvalue: 'peak',\n\t\t\t\t\t\tcategories: ['sample 1', 'sample 2', 'sample 3', 'sample 4'],\n\t\t\t\t\t\tbinSize: 4\n\t\t\t\t\t},\n\t\t\t\t\tmark: 'point',\n\t\t\t\t\tx: { field: 'position', type: 'genomic' },\n\t\t\t\t\ty: { field: 'peak', type: 'quantitative' },\n\t\t\t\t\tsize: { field: 'peak', type: 'quantitative' },\n\t\t\t\t\tcolor: { field: 'sample', type: 'nominal', legend: true },\n\t\t\t\t\twidth: 600,\n\t\t\t\t\theight: 200\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t]\n};\n\nconst vegaLiteSpec = {\n\twidth: 450,\n\theight: 400,\n\tmark: 'bar',\n\tencoding: {\n\t\tx: { field: 'peak', type: 'ordinal', bin: true },\n\t\ty: { field: 'peak', type: 'quantitative', aggregate: 'count' },\n\t\tcolor: { field: 'sample', type: 'nominal', scale: { domain: ['sample 1', 'sample 2', 'sample 3', 'sample 4'], range: ['#E79F00', '#029F73', '#0072B2', '#CB7AA7'] }}\n\t},\n\tdata: { name: 'table' }\n};\n\nfunction VegaLiteExample() {\n\tconst gosRef = useRef(null);\n\n\tconst [selectedData, setSelectedData] = useState([]);\n\n\tuseEffect(() => {\n\t\tif (!gosRef.current) return;\n\t\tgosRef.current.api.subscribe('rangeSelect', (_, e) => setSelectedData(e.data));\n\t\treturn () => gosRef.current.api.unsubscribe('rangeSelect');\n\t}, [gosRef]);\n\n\treturn (\n\t\t<>\n\t\t\t<GoslingComponent\n\t\t\t\tref={gosRef}\n\t\t\t\tspec={goslingSpec}\n\t\t\t\texperimental={{ reactive: true }}\n\t\t\t/>\n\n\t\t\t<div style={{ marginLeft: 80 }}>\n\t\t\t\t<VegaLite spec={vegaLiteSpec} data={{ table: selectedData }} />\n\t\t\t</div>\n\t\t</>\n\t);\n}\n\nexport default VegaLiteExample;"],"mappings":"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"},"metadata":{},"sourceType":"module"}