{"ast":null,"code":"import _toConsumableArray from \"/Users/weihangzhang/Documents/webpage/gosling-react/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _createForOfIteratorHelper from \"/Users/weihangzhang/Documents/webpage/gosling-react/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport { writeConfig } from 'vega';\nimport { isObject, mergeConfig } from 'vega-util';\nimport { AXIS_CONFIGS, isConditionalAxisValue } from './axis';\nimport { signalOrValueRefWithCondition, signalRefOrValue } from './compile/common';\nimport { getAllCompositeMarks } from './compositemark';\nimport { replaceExprRef } from './expr';\nimport { VL_ONLY_LEGEND_CONFIG } from './guide';\nimport { HEADER_CONFIGS } from './header';\nimport { defaultLegendConfig } from './legend';\nimport * as mark from './mark';\nimport { MARK_CONFIGS, PRIMITIVE_MARKS, VL_ONLY_MARK_CONFIG_PROPERTIES, VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX } from './mark';\nimport { assembleParameterSignals } from './parameter';\nimport { defaultScaleConfig } from './scale';\nimport { defaultConfig as defaultSelectionConfig } from './selection';\nimport { DEFAULT_SPACING, isStep } from './spec/base';\nimport { extractTitleConfig } from './title';\nimport { duplicate, getFirstDefined, isEmpty, keys, omit } from './util';\nexport function getViewConfigContinuousSize(viewConfig, channel) {\n  var _a;\n  return (_a = viewConfig[channel]) !== null && _a !== void 0 ? _a : viewConfig[channel === 'width' ? 'continuousWidth' : 'continuousHeight']; // get width/height for backwards compatibility\n}\n\nexport function getViewConfigDiscreteStep(viewConfig, channel) {\n  var size = getViewConfigDiscreteSize(viewConfig, channel);\n  return isStep(size) ? size.step : DEFAULT_STEP;\n}\nexport function getViewConfigDiscreteSize(viewConfig, channel) {\n  var _a;\n  var size = (_a = viewConfig[channel]) !== null && _a !== void 0 ? _a : viewConfig[channel === 'width' ? 'discreteWidth' : 'discreteHeight']; // get width/height for backwards compatibility\n  return getFirstDefined(size, {\n    step: viewConfig.step\n  });\n}\nexport var DEFAULT_STEP = 20;\nexport var defaultViewConfig = {\n  continuousWidth: 200,\n  continuousHeight: 200,\n  step: DEFAULT_STEP\n};\nexport function isVgScheme(rangeScheme) {\n  return rangeScheme && !!rangeScheme['scheme'];\n}\nexport var defaultConfig = {\n  background: 'white',\n  padding: 5,\n  timeFormat: '%b %d, %Y',\n  countTitle: 'Count of Records',\n  view: defaultViewConfig,\n  mark: mark.defaultMarkConfig,\n  arc: {},\n  area: {},\n  bar: mark.defaultBarConfig,\n  circle: {},\n  geoshape: {},\n  image: {},\n  line: {},\n  point: {},\n  rect: mark.defaultRectConfig,\n  rule: {\n    color: 'black'\n  },\n  square: {},\n  text: {\n    color: 'black'\n  },\n  tick: mark.defaultTickConfig,\n  trail: {},\n  boxplot: {\n    size: 14,\n    extent: 1.5,\n    box: {},\n    median: {\n      color: 'white'\n    },\n    outliers: {},\n    rule: {},\n    ticks: null\n  },\n  errorbar: {\n    center: 'mean',\n    rule: true,\n    ticks: false\n  },\n  errorband: {\n    band: {\n      opacity: 0.3\n    },\n    borders: false\n  },\n  scale: defaultScaleConfig,\n  projection: {},\n  legend: defaultLegendConfig,\n  header: {\n    titlePadding: 10,\n    labelPadding: 10\n  },\n  headerColumn: {},\n  headerRow: {},\n  headerFacet: {},\n  selection: defaultSelectionConfig,\n  style: {},\n  title: {},\n  facet: {\n    spacing: DEFAULT_SPACING\n  },\n  concat: {\n    spacing: DEFAULT_SPACING\n  },\n  normalizedNumberFormat: '.0%'\n};\n// Tableau10 color palette, copied from `vegaScale.scheme('tableau10')`\nvar tab10 = ['#4c78a8', '#f58518', '#e45756', '#72b7b2', '#54a24b', '#eeca3b', '#b279a2', '#ff9da6', '#9d755d', '#bab0ac'];\nexport var DEFAULT_FONT_SIZE = {\n  text: 11,\n  guideLabel: 10,\n  guideTitle: 11,\n  groupTitle: 13,\n  groupSubtitle: 12\n};\nexport var DEFAULT_COLOR = {\n  blue: tab10[0],\n  orange: tab10[1],\n  red: tab10[2],\n  teal: tab10[3],\n  green: tab10[4],\n  yellow: tab10[5],\n  purple: tab10[6],\n  pink: tab10[7],\n  brown: tab10[8],\n  gray0: '#000',\n  gray1: '#111',\n  gray2: '#222',\n  gray3: '#333',\n  gray4: '#444',\n  gray5: '#555',\n  gray6: '#666',\n  gray7: '#777',\n  gray8: '#888',\n  gray9: '#999',\n  gray10: '#aaa',\n  gray11: '#bbb',\n  gray12: '#ccc',\n  gray13: '#ddd',\n  gray14: '#eee',\n  gray15: '#fff'\n};\nexport function colorSignalConfig() {\n  var color = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return {\n    signals: [{\n      name: 'color',\n      value: isObject(color) ? Object.assign(Object.assign({}, DEFAULT_COLOR), color) : DEFAULT_COLOR\n    }],\n    mark: {\n      color: {\n        signal: 'color.blue'\n      }\n    },\n    rule: {\n      color: {\n        signal: 'color.gray0'\n      }\n    },\n    text: {\n      color: {\n        signal: 'color.gray0'\n      }\n    },\n    style: {\n      'guide-label': {\n        fill: {\n          signal: 'color.gray0'\n        }\n      },\n      'guide-title': {\n        fill: {\n          signal: 'color.gray0'\n        }\n      },\n      'group-title': {\n        fill: {\n          signal: 'color.gray0'\n        }\n      },\n      'group-subtitle': {\n        fill: {\n          signal: 'color.gray0'\n        }\n      },\n      cell: {\n        stroke: {\n          signal: 'color.gray8'\n        }\n      }\n    },\n    axis: {\n      domainColor: {\n        signal: 'color.gray13'\n      },\n      gridColor: {\n        signal: 'color.gray8'\n      },\n      tickColor: {\n        signal: 'color.gray13'\n      }\n    },\n    range: {\n      category: [{\n        signal: 'color.blue'\n      }, {\n        signal: 'color.orange'\n      }, {\n        signal: 'color.red'\n      }, {\n        signal: 'color.teal'\n      }, {\n        signal: 'color.green'\n      }, {\n        signal: 'color.yellow'\n      }, {\n        signal: 'color.purple'\n      }, {\n        signal: 'color.pink'\n      }, {\n        signal: 'color.brown'\n      }, {\n        signal: 'color.grey8'\n      }]\n    }\n  };\n}\nexport function fontSizeSignalConfig(fontSize) {\n  return {\n    signals: [{\n      name: 'fontSize',\n      value: isObject(fontSize) ? Object.assign(Object.assign({}, DEFAULT_FONT_SIZE), fontSize) : DEFAULT_FONT_SIZE\n    }],\n    text: {\n      fontSize: {\n        signal: 'fontSize.text'\n      }\n    },\n    style: {\n      'guide-label': {\n        fontSize: {\n          signal: 'fontSize.guideLabel'\n        }\n      },\n      'guide-title': {\n        fontSize: {\n          signal: 'fontSize.guideTitle'\n        }\n      },\n      'group-title': {\n        fontSize: {\n          signal: 'fontSize.groupTitle'\n        }\n      },\n      'group-subtitle': {\n        fontSize: {\n          signal: 'fontSize.groupSubtitle'\n        }\n      }\n    }\n  };\n}\nexport function fontConfig(font) {\n  return {\n    text: {\n      font: font\n    },\n    style: {\n      'guide-label': {\n        font: font\n      },\n      'guide-title': {\n        font: font\n      },\n      'group-title': {\n        font: font\n      },\n      'group-subtitle': {\n        font: font\n      }\n    }\n  };\n}\nfunction getAxisConfigInternal(axisConfig) {\n  var props = keys(axisConfig || {});\n  var axisConfigInternal = {};\n  var _iterator = _createForOfIteratorHelper(props),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var prop = _step.value;\n      var val = axisConfig[prop];\n      axisConfigInternal[prop] = isConditionalAxisValue(val) ? signalOrValueRefWithCondition(val) : signalRefOrValue(val);\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  return axisConfigInternal;\n}\nfunction getStyleConfigInternal(styleConfig) {\n  var props = keys(styleConfig);\n  var styleConfigInternal = {};\n  var _iterator2 = _createForOfIteratorHelper(props),\n    _step2;\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var prop = _step2.value;\n      // We need to cast to cheat a bit here since styleConfig can be either mark config or axis config\n      styleConfigInternal[prop] = getAxisConfigInternal(styleConfig[prop]);\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n  return styleConfigInternal;\n}\nvar configPropsWithExpr = [].concat(_toConsumableArray(MARK_CONFIGS), _toConsumableArray(AXIS_CONFIGS), _toConsumableArray(HEADER_CONFIGS), ['background', 'padding', 'legend', 'lineBreak', 'scale', 'style', 'title', 'view']);\n/**\n * Merge specified config with default config and config for the `color` flag,\n * then replace all expressions with signals\n */\nexport function initConfig() {\n  var specifiedConfig = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var color = specifiedConfig.color,\n    font = specifiedConfig.font,\n    fontSize = specifiedConfig.fontSize,\n    selection = specifiedConfig.selection,\n    restConfig = __rest(specifiedConfig, [\"color\", \"font\", \"fontSize\", \"selection\"]);\n  var mergedConfig = mergeConfig({}, duplicate(defaultConfig), font ? fontConfig(font) : {}, color ? colorSignalConfig(color) : {}, fontSize ? fontSizeSignalConfig(fontSize) : {}, restConfig || {});\n  // mergeConfig doesn't recurse and overrides object values.\n  if (selection) {\n    writeConfig(mergedConfig, 'selection', selection, true);\n  }\n  var outputConfig = omit(mergedConfig, configPropsWithExpr);\n  for (var _i = 0, _arr = ['background', 'lineBreak', 'padding']; _i < _arr.length; _i++) {\n    var prop = _arr[_i];\n    if (mergedConfig[prop]) {\n      outputConfig[prop] = signalRefOrValue(mergedConfig[prop]);\n    }\n  }\n  var _iterator3 = _createForOfIteratorHelper(mark.MARK_CONFIGS),\n    _step3;\n  try {\n    for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n      var markConfigType = _step3.value;\n      if (mergedConfig[markConfigType]) {\n        // FIXME: outputConfig[markConfigType] expects that types are replaced recursively but replaceExprRef only replaces one level deep\n        outputConfig[markConfigType] = replaceExprRef(mergedConfig[markConfigType]);\n      }\n    }\n  } catch (err) {\n    _iterator3.e(err);\n  } finally {\n    _iterator3.f();\n  }\n  var _iterator4 = _createForOfIteratorHelper(AXIS_CONFIGS),\n    _step4;\n  try {\n    for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n      var axisConfigType = _step4.value;\n      if (mergedConfig[axisConfigType]) {\n        outputConfig[axisConfigType] = getAxisConfigInternal(mergedConfig[axisConfigType]);\n      }\n    }\n  } catch (err) {\n    _iterator4.e(err);\n  } finally {\n    _iterator4.f();\n  }\n  var _iterator5 = _createForOfIteratorHelper(HEADER_CONFIGS),\n    _step5;\n  try {\n    for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n      var headerConfigType = _step5.value;\n      if (mergedConfig[headerConfigType]) {\n        outputConfig[headerConfigType] = replaceExprRef(mergedConfig[headerConfigType]);\n      }\n    }\n  } catch (err) {\n    _iterator5.e(err);\n  } finally {\n    _iterator5.f();\n  }\n  if (mergedConfig.legend) {\n    outputConfig.legend = replaceExprRef(mergedConfig.legend);\n  }\n  if (mergedConfig.scale) {\n    outputConfig.scale = replaceExprRef(mergedConfig.scale);\n  }\n  if (mergedConfig.style) {\n    outputConfig.style = getStyleConfigInternal(mergedConfig.style);\n  }\n  if (mergedConfig.title) {\n    outputConfig.title = replaceExprRef(mergedConfig.title);\n  }\n  if (mergedConfig.view) {\n    outputConfig.view = replaceExprRef(mergedConfig.view);\n  }\n  return outputConfig;\n}\nvar MARK_STYLES = new Set(['view'].concat(_toConsumableArray(PRIMITIVE_MARKS)));\nvar VL_ONLY_CONFIG_PROPERTIES = ['color', 'fontSize', 'background', 'padding', 'facet', 'concat', 'numberFormat', 'numberFormatType', 'normalizedNumberFormat', 'normalizedNumberFormatType', 'timeFormat', 'countTitle', 'header', 'axisQuantitative', 'axisTemporal', 'axisDiscrete', 'axisPoint', 'axisXBand', 'axisXPoint', 'axisXDiscrete', 'axisXQuantitative', 'axisXTemporal', 'axisYBand', 'axisYPoint', 'axisYDiscrete', 'axisYQuantitative', 'axisYTemporal', 'scale', 'selection', 'overlay' // FIXME: Redesign and unhide this\n];\n\nvar VL_ONLY_ALL_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX = Object.assign({\n  view: ['continuousWidth', 'continuousHeight', 'discreteWidth', 'discreteHeight', 'step']\n}, VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX);\nexport function stripAndRedirectConfig(config) {\n  config = duplicate(config);\n  var _iterator6 = _createForOfIteratorHelper(VL_ONLY_CONFIG_PROPERTIES),\n    _step6;\n  try {\n    for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n      var _prop4 = _step6.value;\n      delete config[_prop4];\n    }\n  } catch (err) {\n    _iterator6.e(err);\n  } finally {\n    _iterator6.f();\n  }\n  if (config.axis) {\n    // delete condition axis config\n    for (var prop in config.axis) {\n      if (isConditionalAxisValue(config.axis[prop])) {\n        delete config.axis[prop];\n      }\n    }\n  }\n  if (config.legend) {\n    var _iterator7 = _createForOfIteratorHelper(VL_ONLY_LEGEND_CONFIG),\n      _step7;\n    try {\n      for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n        var _prop = _step7.value;\n        delete config.legend[_prop];\n      }\n    } catch (err) {\n      _iterator7.e(err);\n    } finally {\n      _iterator7.f();\n    }\n  }\n  // Remove Vega-Lite only generic mark config\n  if (config.mark) {\n    var _iterator8 = _createForOfIteratorHelper(VL_ONLY_MARK_CONFIG_PROPERTIES),\n      _step8;\n    try {\n      for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n        var _prop2 = _step8.value;\n        delete config.mark[_prop2];\n      }\n    } catch (err) {\n      _iterator8.e(err);\n    } finally {\n      _iterator8.f();\n    }\n    if (config.mark.tooltip && isObject(config.mark.tooltip)) {\n      delete config.mark.tooltip;\n    }\n  }\n  if (config.params) {\n    config.signals = (config.signals || []).concat(assembleParameterSignals(config.params));\n    delete config.params;\n  }\n  var _iterator9 = _createForOfIteratorHelper(MARK_STYLES),\n    _step9;\n  try {\n    for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n      var markType = _step9.value;\n      // Remove Vega-Lite-only mark config\n      var _iterator11 = _createForOfIteratorHelper(VL_ONLY_MARK_CONFIG_PROPERTIES),\n        _step11;\n      try {\n        for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {\n          var _prop6 = _step11.value;\n          delete config[markType][_prop6];\n        }\n        // Remove Vega-Lite only mark-specific config\n      } catch (err) {\n        _iterator11.e(err);\n      } finally {\n        _iterator11.f();\n      }\n      var vlOnlyMarkSpecificConfigs = VL_ONLY_ALL_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX[markType];\n      if (vlOnlyMarkSpecificConfigs) {\n        var _iterator12 = _createForOfIteratorHelper(vlOnlyMarkSpecificConfigs),\n          _step12;\n        try {\n          for (_iterator12.s(); !(_step12 = _iterator12.n()).done;) {\n            var _prop5 = _step12.value;\n            delete config[markType][_prop5];\n          }\n        } catch (err) {\n          _iterator12.e(err);\n        } finally {\n          _iterator12.f();\n        }\n      }\n      // Redirect mark config to config.style so that mark config only affect its own mark type\n      // without affecting other marks that share the same underlying Vega marks.\n      // For example, config.rect should not affect bar marks.\n      redirectConfigToStyleConfig(config, markType);\n    }\n  } catch (err) {\n    _iterator9.e(err);\n  } finally {\n    _iterator9.f();\n  }\n  var _iterator10 = _createForOfIteratorHelper(getAllCompositeMarks()),\n    _step10;\n  try {\n    for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {\n      var m = _step10.value;\n      // Clean up the composite mark config as we don't need them in the output specs anymore\n      delete config[m];\n    }\n  } catch (err) {\n    _iterator10.e(err);\n  } finally {\n    _iterator10.f();\n  }\n  redirectTitleConfig(config);\n  // Remove empty config objects.\n  for (var _prop3 in config) {\n    if (isObject(config[_prop3]) && isEmpty(config[_prop3])) {\n      delete config[_prop3];\n    }\n  }\n  return isEmpty(config) ? undefined : config;\n}\n/**\n *\n * Redirect config.title -- so that title config do not affect header labels,\n * which also uses `title` directive to implement.\n *\n * For subtitle configs in config.title, keep them in config.title as header titles never have subtitles.\n */\nfunction redirectTitleConfig(config) {\n  var _extractTitleConfig = extractTitleConfig(config.title),\n    titleMarkConfig = _extractTitleConfig.titleMarkConfig,\n    subtitleMarkConfig = _extractTitleConfig.subtitleMarkConfig,\n    subtitle = _extractTitleConfig.subtitle;\n  // set config.style if title/subtitleMarkConfig is not an empty object\n  if (!isEmpty(titleMarkConfig)) {\n    config.style['group-title'] = Object.assign(Object.assign({}, config.style['group-title']), titleMarkConfig // config.title has higher precedence than config.style.group-title in Vega\n    );\n  }\n\n  if (!isEmpty(subtitleMarkConfig)) {\n    config.style['group-subtitle'] = Object.assign(Object.assign({}, config.style['group-subtitle']), subtitleMarkConfig);\n  }\n  // subtitle part can stay in config.title since header titles do not use subtitle\n  if (!isEmpty(subtitle)) {\n    config.title = subtitle;\n  } else {\n    delete config.title;\n  }\n}\nfunction redirectConfigToStyleConfig(config, prop,\n// string = composite mark\ntoProp, compositeMarkPart) {\n  var propConfig = compositeMarkPart ? config[prop][compositeMarkPart] : config[prop];\n  if (prop === 'view') {\n    toProp = 'cell'; // View's default style is \"cell\"\n  }\n\n  var style = Object.assign(Object.assign({}, propConfig), config.style[toProp !== null && toProp !== void 0 ? toProp : prop]);\n  // set config.style if it is not an empty object\n  if (!isEmpty(style)) {\n    config.style[toProp !== null && toProp !== void 0 ? toProp : prop] = style;\n  }\n  if (!compositeMarkPart) {\n    // For composite mark, so don't delete the whole config yet as we have to do multiple redirections.\n    delete config[prop];\n  }\n}","map":{"version":3,"sources":["../../src/config.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { writeConfig } from 'vega';\nimport { isObject, mergeConfig } from 'vega-util';\nimport { AXIS_CONFIGS, isConditionalAxisValue } from './axis';\nimport { signalOrValueRefWithCondition, signalRefOrValue } from './compile/common';\nimport { getAllCompositeMarks } from './compositemark';\nimport { replaceExprRef } from './expr';\nimport { VL_ONLY_LEGEND_CONFIG } from './guide';\nimport { HEADER_CONFIGS } from './header';\nimport { defaultLegendConfig } from './legend';\nimport * as mark from './mark';\nimport { MARK_CONFIGS, PRIMITIVE_MARKS, VL_ONLY_MARK_CONFIG_PROPERTIES, VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX } from './mark';\nimport { assembleParameterSignals } from './parameter';\nimport { defaultScaleConfig } from './scale';\nimport { defaultConfig as defaultSelectionConfig } from './selection';\nimport { DEFAULT_SPACING, isStep } from './spec/base';\nimport { extractTitleConfig } from './title';\nimport { duplicate, getFirstDefined, isEmpty, keys, omit } from './util';\nexport function getViewConfigContinuousSize(viewConfig, channel) {\n    var _a;\n    return (_a = viewConfig[channel]) !== null && _a !== void 0 ? _a : viewConfig[channel === 'width' ? 'continuousWidth' : 'continuousHeight']; // get width/height for backwards compatibility\n}\nexport function getViewConfigDiscreteStep(viewConfig, channel) {\n    const size = getViewConfigDiscreteSize(viewConfig, channel);\n    return isStep(size) ? size.step : DEFAULT_STEP;\n}\nexport function getViewConfigDiscreteSize(viewConfig, channel) {\n    var _a;\n    const size = (_a = viewConfig[channel]) !== null && _a !== void 0 ? _a : viewConfig[channel === 'width' ? 'discreteWidth' : 'discreteHeight']; // get width/height for backwards compatibility\n    return getFirstDefined(size, { step: viewConfig.step });\n}\nexport const DEFAULT_STEP = 20;\nexport const defaultViewConfig = {\n    continuousWidth: 200,\n    continuousHeight: 200,\n    step: DEFAULT_STEP\n};\nexport function isVgScheme(rangeScheme) {\n    return rangeScheme && !!rangeScheme['scheme'];\n}\nexport const defaultConfig = {\n    background: 'white',\n    padding: 5,\n    timeFormat: '%b %d, %Y',\n    countTitle: 'Count of Records',\n    view: defaultViewConfig,\n    mark: mark.defaultMarkConfig,\n    arc: {},\n    area: {},\n    bar: mark.defaultBarConfig,\n    circle: {},\n    geoshape: {},\n    image: {},\n    line: {},\n    point: {},\n    rect: mark.defaultRectConfig,\n    rule: { color: 'black' },\n    square: {},\n    text: { color: 'black' },\n    tick: mark.defaultTickConfig,\n    trail: {},\n    boxplot: {\n        size: 14,\n        extent: 1.5,\n        box: {},\n        median: { color: 'white' },\n        outliers: {},\n        rule: {},\n        ticks: null\n    },\n    errorbar: {\n        center: 'mean',\n        rule: true,\n        ticks: false\n    },\n    errorband: {\n        band: {\n            opacity: 0.3\n        },\n        borders: false\n    },\n    scale: defaultScaleConfig,\n    projection: {},\n    legend: defaultLegendConfig,\n    header: { titlePadding: 10, labelPadding: 10 },\n    headerColumn: {},\n    headerRow: {},\n    headerFacet: {},\n    selection: defaultSelectionConfig,\n    style: {},\n    title: {},\n    facet: { spacing: DEFAULT_SPACING },\n    concat: { spacing: DEFAULT_SPACING },\n    normalizedNumberFormat: '.0%'\n};\n// Tableau10 color palette, copied from `vegaScale.scheme('tableau10')`\nconst tab10 = [\n    '#4c78a8',\n    '#f58518',\n    '#e45756',\n    '#72b7b2',\n    '#54a24b',\n    '#eeca3b',\n    '#b279a2',\n    '#ff9da6',\n    '#9d755d',\n    '#bab0ac'\n];\nexport const DEFAULT_FONT_SIZE = {\n    text: 11,\n    guideLabel: 10,\n    guideTitle: 11,\n    groupTitle: 13,\n    groupSubtitle: 12\n};\nexport const DEFAULT_COLOR = {\n    blue: tab10[0],\n    orange: tab10[1],\n    red: tab10[2],\n    teal: tab10[3],\n    green: tab10[4],\n    yellow: tab10[5],\n    purple: tab10[6],\n    pink: tab10[7],\n    brown: tab10[8],\n    gray0: '#000',\n    gray1: '#111',\n    gray2: '#222',\n    gray3: '#333',\n    gray4: '#444',\n    gray5: '#555',\n    gray6: '#666',\n    gray7: '#777',\n    gray8: '#888',\n    gray9: '#999',\n    gray10: '#aaa',\n    gray11: '#bbb',\n    gray12: '#ccc',\n    gray13: '#ddd',\n    gray14: '#eee',\n    gray15: '#fff'\n};\nexport function colorSignalConfig(color = {}) {\n    return {\n        signals: [\n            {\n                name: 'color',\n                value: isObject(color) ? Object.assign(Object.assign({}, DEFAULT_COLOR), color) : DEFAULT_COLOR\n            }\n        ],\n        mark: { color: { signal: 'color.blue' } },\n        rule: { color: { signal: 'color.gray0' } },\n        text: {\n            color: { signal: 'color.gray0' }\n        },\n        style: {\n            'guide-label': {\n                fill: { signal: 'color.gray0' }\n            },\n            'guide-title': {\n                fill: { signal: 'color.gray0' }\n            },\n            'group-title': {\n                fill: { signal: 'color.gray0' }\n            },\n            'group-subtitle': {\n                fill: { signal: 'color.gray0' }\n            },\n            cell: {\n                stroke: { signal: 'color.gray8' }\n            }\n        },\n        axis: {\n            domainColor: { signal: 'color.gray13' },\n            gridColor: { signal: 'color.gray8' },\n            tickColor: { signal: 'color.gray13' }\n        },\n        range: {\n            category: [\n                { signal: 'color.blue' },\n                { signal: 'color.orange' },\n                { signal: 'color.red' },\n                { signal: 'color.teal' },\n                { signal: 'color.green' },\n                { signal: 'color.yellow' },\n                { signal: 'color.purple' },\n                { signal: 'color.pink' },\n                { signal: 'color.brown' },\n                { signal: 'color.grey8' }\n            ]\n        }\n    };\n}\nexport function fontSizeSignalConfig(fontSize) {\n    return {\n        signals: [\n            {\n                name: 'fontSize',\n                value: isObject(fontSize) ? Object.assign(Object.assign({}, DEFAULT_FONT_SIZE), fontSize) : DEFAULT_FONT_SIZE\n            }\n        ],\n        text: {\n            fontSize: { signal: 'fontSize.text' }\n        },\n        style: {\n            'guide-label': {\n                fontSize: { signal: 'fontSize.guideLabel' }\n            },\n            'guide-title': {\n                fontSize: { signal: 'fontSize.guideTitle' }\n            },\n            'group-title': {\n                fontSize: { signal: 'fontSize.groupTitle' }\n            },\n            'group-subtitle': {\n                fontSize: { signal: 'fontSize.groupSubtitle' }\n            }\n        }\n    };\n}\nexport function fontConfig(font) {\n    return {\n        text: { font },\n        style: {\n            'guide-label': { font },\n            'guide-title': { font },\n            'group-title': { font },\n            'group-subtitle': { font }\n        }\n    };\n}\nfunction getAxisConfigInternal(axisConfig) {\n    const props = keys(axisConfig || {});\n    const axisConfigInternal = {};\n    for (const prop of props) {\n        const val = axisConfig[prop];\n        axisConfigInternal[prop] = isConditionalAxisValue(val)\n            ? signalOrValueRefWithCondition(val)\n            : signalRefOrValue(val);\n    }\n    return axisConfigInternal;\n}\nfunction getStyleConfigInternal(styleConfig) {\n    const props = keys(styleConfig);\n    const styleConfigInternal = {};\n    for (const prop of props) {\n        // We need to cast to cheat a bit here since styleConfig can be either mark config or axis config\n        styleConfigInternal[prop] = getAxisConfigInternal(styleConfig[prop]);\n    }\n    return styleConfigInternal;\n}\nconst configPropsWithExpr = [\n    ...MARK_CONFIGS,\n    ...AXIS_CONFIGS,\n    ...HEADER_CONFIGS,\n    'background',\n    'padding',\n    'legend',\n    'lineBreak',\n    'scale',\n    'style',\n    'title',\n    'view'\n];\n/**\n * Merge specified config with default config and config for the `color` flag,\n * then replace all expressions with signals\n */\nexport function initConfig(specifiedConfig = {}) {\n    const { color, font, fontSize, selection } = specifiedConfig, restConfig = __rest(specifiedConfig, [\"color\", \"font\", \"fontSize\", \"selection\"]);\n    const mergedConfig = mergeConfig({}, duplicate(defaultConfig), font ? fontConfig(font) : {}, color ? colorSignalConfig(color) : {}, fontSize ? fontSizeSignalConfig(fontSize) : {}, restConfig || {});\n    // mergeConfig doesn't recurse and overrides object values.\n    if (selection) {\n        writeConfig(mergedConfig, 'selection', selection, true);\n    }\n    const outputConfig = omit(mergedConfig, configPropsWithExpr);\n    for (const prop of ['background', 'lineBreak', 'padding']) {\n        if (mergedConfig[prop]) {\n            outputConfig[prop] = signalRefOrValue(mergedConfig[prop]);\n        }\n    }\n    for (const markConfigType of mark.MARK_CONFIGS) {\n        if (mergedConfig[markConfigType]) {\n            // FIXME: outputConfig[markConfigType] expects that types are replaced recursively but replaceExprRef only replaces one level deep\n            outputConfig[markConfigType] = replaceExprRef(mergedConfig[markConfigType]);\n        }\n    }\n    for (const axisConfigType of AXIS_CONFIGS) {\n        if (mergedConfig[axisConfigType]) {\n            outputConfig[axisConfigType] = getAxisConfigInternal(mergedConfig[axisConfigType]);\n        }\n    }\n    for (const headerConfigType of HEADER_CONFIGS) {\n        if (mergedConfig[headerConfigType]) {\n            outputConfig[headerConfigType] = replaceExprRef(mergedConfig[headerConfigType]);\n        }\n    }\n    if (mergedConfig.legend) {\n        outputConfig.legend = replaceExprRef(mergedConfig.legend);\n    }\n    if (mergedConfig.scale) {\n        outputConfig.scale = replaceExprRef(mergedConfig.scale);\n    }\n    if (mergedConfig.style) {\n        outputConfig.style = getStyleConfigInternal(mergedConfig.style);\n    }\n    if (mergedConfig.title) {\n        outputConfig.title = replaceExprRef(mergedConfig.title);\n    }\n    if (mergedConfig.view) {\n        outputConfig.view = replaceExprRef(mergedConfig.view);\n    }\n    return outputConfig;\n}\nconst MARK_STYLES = new Set(['view', ...PRIMITIVE_MARKS]);\nconst VL_ONLY_CONFIG_PROPERTIES = [\n    'color',\n    'fontSize',\n    'background',\n    'padding',\n    'facet',\n    'concat',\n    'numberFormat',\n    'numberFormatType',\n    'normalizedNumberFormat',\n    'normalizedNumberFormatType',\n    'timeFormat',\n    'countTitle',\n    'header',\n    'axisQuantitative',\n    'axisTemporal',\n    'axisDiscrete',\n    'axisPoint',\n    'axisXBand',\n    'axisXPoint',\n    'axisXDiscrete',\n    'axisXQuantitative',\n    'axisXTemporal',\n    'axisYBand',\n    'axisYPoint',\n    'axisYDiscrete',\n    'axisYQuantitative',\n    'axisYTemporal',\n    'scale',\n    'selection',\n    'overlay' // FIXME: Redesign and unhide this\n];\nconst VL_ONLY_ALL_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX = Object.assign({ view: ['continuousWidth', 'continuousHeight', 'discreteWidth', 'discreteHeight', 'step'] }, VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX);\nexport function stripAndRedirectConfig(config) {\n    config = duplicate(config);\n    for (const prop of VL_ONLY_CONFIG_PROPERTIES) {\n        delete config[prop];\n    }\n    if (config.axis) {\n        // delete condition axis config\n        for (const prop in config.axis) {\n            if (isConditionalAxisValue(config.axis[prop])) {\n                delete config.axis[prop];\n            }\n        }\n    }\n    if (config.legend) {\n        for (const prop of VL_ONLY_LEGEND_CONFIG) {\n            delete config.legend[prop];\n        }\n    }\n    // Remove Vega-Lite only generic mark config\n    if (config.mark) {\n        for (const prop of VL_ONLY_MARK_CONFIG_PROPERTIES) {\n            delete config.mark[prop];\n        }\n        if (config.mark.tooltip && isObject(config.mark.tooltip)) {\n            delete config.mark.tooltip;\n        }\n    }\n    if (config.params) {\n        config.signals = (config.signals || []).concat(assembleParameterSignals(config.params));\n        delete config.params;\n    }\n    for (const markType of MARK_STYLES) {\n        // Remove Vega-Lite-only mark config\n        for (const prop of VL_ONLY_MARK_CONFIG_PROPERTIES) {\n            delete config[markType][prop];\n        }\n        // Remove Vega-Lite only mark-specific config\n        const vlOnlyMarkSpecificConfigs = VL_ONLY_ALL_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX[markType];\n        if (vlOnlyMarkSpecificConfigs) {\n            for (const prop of vlOnlyMarkSpecificConfigs) {\n                delete config[markType][prop];\n            }\n        }\n        // Redirect mark config to config.style so that mark config only affect its own mark type\n        // without affecting other marks that share the same underlying Vega marks.\n        // For example, config.rect should not affect bar marks.\n        redirectConfigToStyleConfig(config, markType);\n    }\n    for (const m of getAllCompositeMarks()) {\n        // Clean up the composite mark config as we don't need them in the output specs anymore\n        delete config[m];\n    }\n    redirectTitleConfig(config);\n    // Remove empty config objects.\n    for (const prop in config) {\n        if (isObject(config[prop]) && isEmpty(config[prop])) {\n            delete config[prop];\n        }\n    }\n    return isEmpty(config) ? undefined : config;\n}\n/**\n *\n * Redirect config.title -- so that title config do not affect header labels,\n * which also uses `title` directive to implement.\n *\n * For subtitle configs in config.title, keep them in config.title as header titles never have subtitles.\n */\nfunction redirectTitleConfig(config) {\n    const { titleMarkConfig, subtitleMarkConfig, subtitle } = extractTitleConfig(config.title);\n    // set config.style if title/subtitleMarkConfig is not an empty object\n    if (!isEmpty(titleMarkConfig)) {\n        config.style['group-title'] = Object.assign(Object.assign({}, config.style['group-title']), titleMarkConfig // config.title has higher precedence than config.style.group-title in Vega\n        );\n    }\n    if (!isEmpty(subtitleMarkConfig)) {\n        config.style['group-subtitle'] = Object.assign(Object.assign({}, config.style['group-subtitle']), subtitleMarkConfig);\n    }\n    // subtitle part can stay in config.title since header titles do not use subtitle\n    if (!isEmpty(subtitle)) {\n        config.title = subtitle;\n    }\n    else {\n        delete config.title;\n    }\n}\nfunction redirectConfigToStyleConfig(config, prop, // string = composite mark\ntoProp, compositeMarkPart) {\n    const propConfig = compositeMarkPart ? config[prop][compositeMarkPart] : config[prop];\n    if (prop === 'view') {\n        toProp = 'cell'; // View's default style is \"cell\"\n    }\n    const style = Object.assign(Object.assign({}, propConfig), config.style[toProp !== null && toProp !== void 0 ? toProp : prop]);\n    // set config.style if it is not an empty object\n    if (!isEmpty(style)) {\n        config.style[toProp !== null && toProp !== void 0 ? toProp : prop] = style;\n    }\n    if (!compositeMarkPart) {\n        // For composite mark, so don't delete the whole config yet as we have to do multiple redirections.\n        delete config[prop];\n    }\n}\n//# sourceMappingURL=config.js.map"]},"metadata":{},"sourceType":"module"}