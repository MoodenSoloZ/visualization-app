{"ast":null,"code":"import _createForOfIteratorHelper from \"/Users/weihangzhang/Documents/webpage/gosling-react/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport { isNumber, isObject } from 'vega-util';\nimport { keys } from '../util';\nimport { isConcatSpec, isVConcatSpec } from './concat';\nimport { isFacetMapping, isFacetSpec } from './facet';\nexport function getStepFor(_ref) {\n  var step = _ref.step,\n    offsetIsDiscrete = _ref.offsetIsDiscrete;\n  var _a;\n  if (offsetIsDiscrete) {\n    return (_a = step.for) !== null && _a !== void 0 ? _a : 'offset';\n  } else {\n    return 'position';\n  }\n}\nexport function isStep(size) {\n  return isObject(size) && size['step'] !== undefined;\n}\nexport function isFrameMixins(o) {\n  return o['view'] || o['width'] || o['height'];\n}\nexport var DEFAULT_SPACING = 20;\nvar COMPOSITION_LAYOUT_INDEX = {\n  align: 1,\n  bounds: 1,\n  center: 1,\n  columns: 1,\n  spacing: 1\n};\nvar COMPOSITION_LAYOUT_PROPERTIES = keys(COMPOSITION_LAYOUT_INDEX);\nexport function extractCompositionLayout(spec, specType, config) {\n  var _a, _b;\n  var compositionConfig = config[specType];\n  var layout = {};\n  // Apply config first\n  var spacingConfig = compositionConfig.spacing,\n    columns = compositionConfig.columns;\n  if (spacingConfig !== undefined) {\n    layout.spacing = spacingConfig;\n  }\n  if (columns !== undefined) {\n    if (isFacetSpec(spec) && !isFacetMapping(spec.facet) || isConcatSpec(spec)) {\n      layout.columns = columns;\n    }\n  }\n  if (isVConcatSpec(spec)) {\n    layout.columns = 1;\n  }\n  // Then copy properties from the spec\n  var _iterator = _createForOfIteratorHelper(COMPOSITION_LAYOUT_PROPERTIES),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var prop = _step.value;\n      if (spec[prop] !== undefined) {\n        if (prop === 'spacing') {\n          var spacing = spec[prop];\n          layout[prop] = isNumber(spacing) ? spacing : {\n            row: (_a = spacing.row) !== null && _a !== void 0 ? _a : spacingConfig,\n            column: (_b = spacing.column) !== null && _b !== void 0 ? _b : spacingConfig\n          };\n        } else {\n          layout[prop] = spec[prop];\n        }\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  return layout;\n}","map":{"version":3,"sources":["../../../src/spec/base.ts"],"names":[],"mappings":";AACA,SAAQ,QAAQ,EAAE,QAAQ,QAAO,WAAW;AAQ5C,SAAc,IAAI,QAAO,SAAS;AAElC,SAAQ,YAAY,EAAE,aAAa,QAAO,UAAU;AACpD,SAAQ,cAAc,EAAE,WAAW,QAAO,SAAS;AAuDnD,OAAM,SAAU,UAAU,OAAkE;EAAA,IAAhE,IAAI,QAAJ,IAAI;IAAE,gBAAgB,QAAhB,gBAAgB;;EAChD,IAAI,gBAAgB,EAAE;IACpB,OAAO,CAAA,EAAA,GAAA,IAAI,CAAC,GAAG,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAI,QAAQ;GAC5B,MAAM;IACL,OAAO,UAAU;EAClB;AACH;AAEA,OAAM,SAAU,MAAM,CAAC,IAA4C,EAAA;EACjE,OAAO,QAAQ,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,SAAS;AACrD;AAuCA,OAAM,SAAU,aAAa,CAAC,CAAM,EAAA;EAClC,OAAO,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC;AAC/C;AAqHA,OAAO,IAAM,eAAe,GAAG,EAAE;AAuCjC,IAAM,wBAAwB,GAAoD;EAChF,KAAK,EAAE,CAAC;EACR,MAAM,EAAE,CAAC;EACT,MAAM,EAAE,CAAC;EACT,OAAO,EAAE,CAAC;EACV,OAAO,EAAE;CACV;AAED,IAAM,6BAA6B,GAAG,IAAI,CAAC,wBAAwB,CAAC;AAIpE,OAAM,SAAU,wBAAwB,CACtC,IAAoB,EACpB,QAAuC,EACvC,MAA+B,EAAA;;EAE/B,IAAM,iBAAiB,GAAG,MAAM,CAAC,QAAQ,CAAC;EAC1C,IAAM,MAAM,GAAwC,CAAA,CAAE;EAEtD;EACA,IAAgB,aAAa,GAAa,iBAAiB,CAApD,OAAO;IAAiB,OAAO,GAAI,iBAAiB,CAA5B,OAAO;EACtC,IAAI,aAAa,KAAK,SAAS,EAAE;IAC/B,MAAM,CAAC,OAAO,GAAG,aAAa;EAC/B;EAED,IAAI,OAAO,KAAK,SAAS,EAAE;IACzB,IAAK,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,IAAK,YAAY,CAAC,IAAI,CAAC,EAAE;MAC5E,MAAM,CAAC,OAAO,GAAG,OAAO;IACzB;EACF;EAED,IAAI,aAAa,CAAC,IAAI,CAAC,EAAE;IACvB,MAAM,CAAC,OAAO,GAAG,CAAC;EACnB;EAED;EAAA,2CACmB,6BAA6B;IAAA;EAAA;IAAhD,oDAAkD;MAAA,IAAvC,IAAI;MACb,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,SAAS,EAAE;QAC5B,IAAI,IAAI,KAAK,SAAS,EAAE;UACtB,IAAM,OAAO,GAA4B,IAAI,CAAC,IAAI,CAAC;UAEnD,MAAM,CAAC,IAAI,CAAC,GAAG,QAAQ,CAAC,OAAO,CAAC,GAC5B,OAAO,GACP;YACE,GAAG,EAAE,CAAA,EAAA,GAAA,OAAO,CAAC,GAAG,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAI,aAAa;YACjC,MAAM,EAAE,CAAA,EAAA,GAAA,OAAO,CAAC,MAAM,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAI;WAC3B;SACN,MAAM;UACJ,MAAM,CAAC,IAAI,CAAS,GAAG,IAAI,CAAC,IAAI,CAAC;QACnC;MACF;;EACF;IAAA;EAAA;IAAA;EAAA;EAED,OAAO,MAAM;AACf","sourceRoot":"","sourcesContent":["import { isNumber, isObject } from 'vega-util';\nimport { keys } from '../util';\nimport { isConcatSpec, isVConcatSpec } from './concat';\nimport { isFacetMapping, isFacetSpec } from './facet';\nexport function getStepFor({ step, offsetIsDiscrete }) {\n    var _a;\n    if (offsetIsDiscrete) {\n        return (_a = step.for) !== null && _a !== void 0 ? _a : 'offset';\n    }\n    else {\n        return 'position';\n    }\n}\nexport function isStep(size) {\n    return isObject(size) && size['step'] !== undefined;\n}\nexport function isFrameMixins(o) {\n    return o['view'] || o['width'] || o['height'];\n}\nexport const DEFAULT_SPACING = 20;\nconst COMPOSITION_LAYOUT_INDEX = {\n    align: 1,\n    bounds: 1,\n    center: 1,\n    columns: 1,\n    spacing: 1\n};\nconst COMPOSITION_LAYOUT_PROPERTIES = keys(COMPOSITION_LAYOUT_INDEX);\nexport function extractCompositionLayout(spec, specType, config) {\n    var _a, _b;\n    const compositionConfig = config[specType];\n    const layout = {};\n    // Apply config first\n    const { spacing: spacingConfig, columns } = compositionConfig;\n    if (spacingConfig !== undefined) {\n        layout.spacing = spacingConfig;\n    }\n    if (columns !== undefined) {\n        if ((isFacetSpec(spec) && !isFacetMapping(spec.facet)) || isConcatSpec(spec)) {\n            layout.columns = columns;\n        }\n    }\n    if (isVConcatSpec(spec)) {\n        layout.columns = 1;\n    }\n    // Then copy properties from the spec\n    for (const prop of COMPOSITION_LAYOUT_PROPERTIES) {\n        if (spec[prop] !== undefined) {\n            if (prop === 'spacing') {\n                const spacing = spec[prop];\n                layout[prop] = isNumber(spacing)\n                    ? spacing\n                    : {\n                        row: (_a = spacing.row) !== null && _a !== void 0 ? _a : spacingConfig,\n                        column: (_b = spacing.column) !== null && _b !== void 0 ? _b : spacingConfig\n                    };\n            }\n            else {\n                layout[prop] = spec[prop];\n            }\n        }\n    }\n    return layout;\n}\n//# sourceMappingURL=base.js.map"]},"metadata":{},"sourceType":"module"}