{"ast":null,"code":"import _slicedToArray from \"/Users/weihangzhang/Documents/webpage/gosling-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"/Users/weihangzhang/Documents/webpage/gosling-react/src/example/MouseEvents.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { GoslingComponent } from 'gosling.js';\nfunction MouseEvents() {\n  _s();\n  var _this = this;\n  var gosRef = useRef();\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    position = _useState2[0],\n    setPosition = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    data = _useState4[0],\n    setData = _useState4[1];\n  useEffect(function () {\n    if (!gosRef.current) return;\n    gosRef.current.api.subscribe('click', function (_, eventData) {\n      var p = eventData.genomicPosition;\n      setPosition(\"\".concat(p.chromosome, \":\").concat(p.position));\n      setData(eventData.data);\n    });\n    gosRef.current.api.subscribe('rangeSelect', function (_, eventData) {\n      if (!eventData || !eventData.genomicRange) {\n        // range selection cleared\n        setPosition('N/A');\n        setData([]);\n      } else {\n        var p = eventData.genomicRange;\n        if (p.length === 2) setPosition(\"\".concat(p[0].chromosome, \":\").concat(p[0].position, \"-\").concat(p[1].chromosome, \":\").concat(p[1].position));\n        setData(eventData.data.length > 10 ? eventData.data.slice(0, 10) : eventData.data);\n      }\n    });\n    return function () {\n      gosRef.current.api.unsubscribe('click');\n      gosRef.current.api.unsubscribe('rangeSelect');\n    };\n  }, [gosRef]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: 30,\n      marginLeft: 80\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 4\n    }\n  }, \"Selected Position: \", position ? position : 'N/A'), /*#__PURE__*/React.createElement(GoslingComponent, {\n    ref: gosRef,\n    spec: {\n      title: 'Basic Marks: bar',\n      subtitle: 'Tutorial Examples',\n      tracks: [{\n        experimental: {\n          mouseEvents: true\n        },\n        layout: 'linear',\n        width: 800,\n        height: 180,\n        data: {\n          url: 'https://resgen.io/api/v1/tileset_info/?d=UvVPeLHuRDiYA3qwFlm7xQ',\n          type: 'multivec',\n          row: 'sample',\n          column: 'position',\n          value: 'peak',\n          categories: ['sample 1'],\n          binSize: 5\n        },\n        mark: 'bar',\n        x: {\n          field: 'start',\n          type: 'genomic',\n          axis: 'bottom'\n        },\n        xe: {\n          field: 'end',\n          type: 'genomic'\n        },\n        y: {\n          field: \"peak\",\n          type: 'quantitative',\n          axis: 'right'\n        },\n        size: {\n          value: 5\n        }\n      }]\n    },\n    experimental: {\n      reactive: true\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 4\n    }\n  }), data.length === 0 ? null : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mx-[60px]\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table-fixed border-collapse border border-slate-400\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    className: \"capitalize\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    className: \"border border-slate-300  bg-slate-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 10\n    }\n  }, Object.keys(data[0]).map(function (d) {\n    return /*#__PURE__*/React.createElement(\"th\", {\n      className: \"px-1\",\n      key: d,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 95\n      }\n    }, d);\n  }))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 6\n    }\n  }, data.map(function (d) {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      className: \"border border-slate-300\",\n      key: JSON.stringify(d),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 22\n      }\n    }, Object.entries(d).map(function (datum) {\n      return /*#__PURE__*/React.createElement(\"td\", {\n        className: \"px-1\",\n        key: datum[0],\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 118\n        }\n      }, datum[1]);\n    }));\n  })))));\n}\n_s(MouseEvents, \"NyNXMNG8lX/qZfU8tOv6MBuMqHM=\");\n_c = MouseEvents;\nexport default MouseEvents;\nvar _c;\n$RefreshReg$(_c, \"MouseEvents\");","map":{"version":3,"names":["React","useEffect","useRef","useState","GoslingComponent","MouseEvents","gosRef","position","setPosition","data","setData","current","api","subscribe","_","eventData","p","genomicPosition","chromosome","genomicRange","length","slice","unsubscribe","marginTop","marginLeft","title","subtitle","tracks","experimental","mouseEvents","layout","width","height","url","type","row","column","value","categories","binSize","mark","x","field","axis","xe","y","size","reactive","Object","keys","map","d","JSON","stringify","entries","datum"],"sources":["/Users/weihangzhang/Documents/webpage/gosling-react/src/example/MouseEvents.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { GoslingComponent } from 'gosling.js';\n\nfunction MouseEvents() {\n\n\tconst gosRef = useRef();\n\tconst [position, setPosition] = useState();\n\tconst [data, setData] = useState([]);\n\n\tuseEffect(() => {\n\t\tif(!gosRef.current) return;\n\n\t\tgosRef.current.api.subscribe('click', (_, eventData) => {\n\t\t\tconst { genomicPosition: p } = eventData;\n\t\t\tsetPosition(`${p.chromosome}:${p.position}`)\n\t\t\tsetData(eventData.data);\n\t\t});\n\n\t\tgosRef.current.api.subscribe('rangeSelect', (_, eventData) => {\n\t\t\tif(!eventData || !eventData.genomicRange) {\n\t\t\t\t// range selection cleared\n\t\t\t\tsetPosition('N/A');\n\t\t\t\tsetData([]);\n\t\t\t} else {\n\t\t\t\tconst { genomicRange: p } = eventData;\n\t\t\t\tif(p.length === 2) setPosition(`${p[0].chromosome}:${p[0].position}-${p[1].chromosome}:${p[1].position}`);\n\t\t\t\tsetData(eventData.data.length > 10 ? eventData.data.slice(0, 10) : eventData.data);\n\t\t\t}\n\t\t});\n\n\t\treturn () => {\n\t\t\tgosRef.current.api.unsubscribe('click');\n\t\t\tgosRef.current.api.unsubscribe('rangeSelect');\n\t\t}\n\t}, [gosRef]);\n\n\treturn (\n\t\t<div>\n\t\t\t<div style={{ marginTop: 30, marginLeft: 80 }}>\n\t\t\t\tSelected Position: {position ? position : 'N/A'}\n\t\t\t</div>\n\t\t\t<GoslingComponent\n\t\t\t\tref={gosRef}\n\t\t\t\tspec={{\n\t\t\t\t\ttitle: 'Basic Marks: bar',\n\t\t\t\t\tsubtitle: 'Tutorial Examples',\n\t\t\t\t\ttracks: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\texperimental: { mouseEvents: true },\n\t\t\t\t\t\t\tlayout: 'linear',\n\t\t\t\t\t\t\twidth: 800,\n\t\t\t\t\t\t\theight: 180,\n\t\t\t\t\t\t\tdata: \n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\turl: 'https://resgen.io/api/v1/tileset_info/?d=UvVPeLHuRDiYA3qwFlm7xQ',\n\t\t\t\t\t\t\t\ttype: 'multivec',\n\t\t\t\t\t\t\t\trow: 'sample',\n\t\t\t\t\t\t\t    column: 'position',\n\t\t\t\t\t\t\t    value: 'peak',\n\t\t\t\t\t\t\t    categories: ['sample 1'],\n\t\t\t\t\t\t\t    binSize: 5\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tmark: 'bar',\n\t\t\t\t\t\t\tx: {field: 'start', type: 'genomic', axis: 'bottom'},\n\t\t\t\t\t\t\txe: {field: 'end', type: 'genomic'},\n\t\t\t\t\t\t\ty: {field: \"peak\", type: 'quantitative', axis: 'right'},\n\t\t\t\t\t\t\tsize: {value: 5}\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}}\n\t\t\texperimental={{ reactive: true }}\n\t\t\t/>\n\t\t\t{data.length === 0 ? null : (<div  className='mx-[60px]'>\n\t\t\t\t<table className='table-fixed border-collapse border border-slate-400'>\n\t\t\t\t\t<thead className='capitalize'>\n\t\t\t\t\t    <tr className='border border-slate-300  bg-slate-100'>{Object.keys(data[0]).map(d => <th className='px-1' key={d}>{d}</th>)}</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{data.map(d => <tr className='border border-slate-300' key={JSON.stringify(d)}>{Object.entries(d).map(datum => <td className='px-1' key={datum[0]}>{datum[1]}</td>)}</tr>)}\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>)}\n\t\t</div>\n\t);\n}\n\nexport default MouseEvents;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}